!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("ethers")):"function"==typeof define&&define.amd?define(["exports","ethers"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self)["sequence-waas"]={},e.ethers)}(this,(function(e,t){"use strict";function n(){return n=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)({}).hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},n.apply(null,arguments)}function s(e,t){if(null==e)return{};var n={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.includes(s))continue;n[s]=e[s]}return n}BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");const r=e=>{const t=e.toString(16);return`${t.length%2==0?"0x":"0x0"}${t}`};var i=function(e){return e[e.DEBUG=1]="DEBUG",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.DISABLED=5]="DISABLED",e}(i||{});new class{constructor(e){this.config=e,this.logLevel=void 0,this.configure(e)}configure(e){switch(this.config=n({},this.config,e),this.config.logLevel){case"DEBUG":this.logLevel=i.DEBUG;break;case"INFO":default:this.logLevel=i.INFO;break;case"WARN":this.logLevel=i.WARN;break;case"ERROR":this.logLevel=i.ERROR;break;case"DISABLED":this.logLevel=i.DISABLED}void 0===this.config.silence&&(this.config.silence=!1)}debug(e,...t){!0!==this.config.silence&&this.logLevel===i.DEBUG&&console.log(e,...t)}info(e,...t){!0!==this.config.silence&&this.logLevel<=i.INFO&&console.log(e,...t)}warn(e,...t){!0!==this.config.silence&&this.logLevel<=i.WARN&&(console.warn(e,...t),this.config.onwarn&&this.config.onwarn(e,t))}error(e,...t){!0!==this.config.silence&&this.logLevel<=i.ERROR&&(console.error(e,...t),this.config.onerror&&this.config.onerror(e,t))}}({logLevel:"INFO",silence:!0});function o(e){var t="";return n(e),t;function n(e){if(null===e||"object"!=typeof e||null!=e.toJSON)t+=JSON.stringify(e);else if(Array.isArray(e)){t+="[";var s=!1;e.forEach((function(e){s&&(t+=","),s=!0,void 0===e&&(e=null),n(e)})),t+="]"}else{t+="{";var r=Object.keys(e).filter((function(t){return void 0!==e[t]})).sort();r.forEach((function(s,r){return function(e,s,r){r>0&&(t+=",");t+=JSON.stringify(s),t+=":",n(e[s])}(e,s,r)})),t+="}"}}}const a=["signatures"];let c;const d="@sequence.timeDrift";function u(){return"object"==="object".sessionStorage}function l(){if(u()){const e=window.sessionStorage.getItem(d);if(e)return parseInt(e,10)}return c}function h(e,t,n){const s=Math.abs(Math.floor(l()||0)),r=Math.floor(Date.now()/1e3-s);return{version:"1 (Web 2.0.26)",issuedAt:r,expiresAt:r+t+2*s,name:e,data:n}}async function p(e,s){const r=function(e){const{version:n,issuedAt:s,expiresAt:r,name:i,data:a}=e,c={version:n,issuedAt:s,expiresAt:r,name:i,data:a},d=t.ethers.toUtf8Bytes(o(c));return t.ethers.getBytes(t.ethers.keccak256(d))}(s),i=await e.sign(new Uint8Array(r));return n({},s,{signatures:[{sessionId:await e.sessionId(),signature:i}]})}let f=function(e){return e.initiateAuth="initiateAuth",e.openSession="openSession",e.closeSession="closeSession",e.validateSession="validateSession",e.finishValidateSession="finishValidateSession",e.listSessions="listSessions",e.getSession="getSession",e.sessionAuthProof="sessionAuthProof",e.feeOptions="feeOptions",e.signMessage="signMessage",e.sendTransaction="sendTransaction",e.getTransactionReceipt="getTransactionReceipt",e.federateAccount="federateAccount",e.removeAccount="removeAccount",e.listAccounts="listAccounts",e.getIdToken="getIdToken",e}({}),m=function(e){return e.transaction="transaction",e.erc20send="erc20send",e.erc721send="erc721send",e.erc1155send="erc1155send",e.delayedEncode="delayedEncode",e.contractCall="contractCall",e}({}),g=function(e){return e.authInitiated="authInitiated",e.sessionOpened="sessionOpened",e.sessionClosed="sessionClosed",e.sessionList="sessionList",e.validationRequired="validationRequired",e.validationStarted="validationStarted",e.validationFinished="validationFinished",e.sessionAuthProof="sessionAuthProof",e.signedMessage="signedMessage",e.feeOptions="feeOptions",e.transactionReceipt="transactionReceipt",e.transactionFailed="transactionFailed",e.getSessionResponse="getSessionResponse",e.accountList="accountList",e.accountFederated="accountFederated",e.accountRemoved="accountRemoved",e.idToken="idToken",e}({}),y=function(e){return e.unknown="unknown",e.erc20Token="erc20Token",e.erc1155Token="erc1155Token",e}({}),w=function(e){return e.None="None",e.Guest="Guest",e.OIDC="OIDC",e.Email="Email",e.PlayFab="PlayFab",e.Stytch="Stytch",e}({});const E=["lifespan"],b=["lifespan"],S=["lifespan"],v=["lifespan"],A=["lifespan"],I=["lifespan"],T=["lifespan"],O=["lifespan"],R=["lifespan"];async function k(e){let{lifespan:t}=e,n=s(e,E);return h(f.initiateAuth,t,n)}async function x(e){let{lifespan:t}=e,n=s(e,b);return h(f.openSession,t,n)}function P(e){let{lifespan:t}=e,n=s(e,A);return h(f.closeSession,t,n)}const M=["token","to","value"],N=["token","to","id","safe","data"],C=["token","to","values","data"],_=["to","value","abi","func","args"];function U({lifespan:e,wallet:n,identifier:s,chainId:i,transactions:o,transactionsFeeQuote:a,transactionsFeeOption:c}){return h(f.sendTransaction,e,{identifier:s,wallet:n,network:i.toString(),transactions:L(o,c).map((e=>{if(!e.to||e.to===t.ethers.ZeroAddress)throw new Error("Contract creation not supported");return j(e)?{type:"transaction",to:e.to,value:r(BigInt(e.value||0)),data:t.ethers.hexlify(e.data||"0x")}:e})),transactionsFeeQuote:a})}function L(e,t){const n=[...e];if(t)switch(t.token.type){case y.unknown:n.push({to:t.to,value:t.value});break;case y.erc20Token:if(!t.token.contractAddress)throw new Error("contract address is required");n.push($({tokenAddress:t.token.contractAddress,to:t.to,value:t.value}));break;case y.erc1155Token:if(!t.token.contractAddress)throw new Error("contract address is required");if(!t.token.tokenID)throw new Error("token ID is required");n.push(D({tokenAddress:t.token.contractAddress,to:t.to,vals:[{id:t.token.tokenID,amount:t.value}]}))}return n}function $(e){const t=e,s=e;if(void 0!==t.token)return{type:"erc20send",tokenAddress:t.token,to:t.to,value:t.value.toString()};if(void 0!==s.tokenAddress)return n({type:"erc20send"},s);throw new Error("Invalid ERC20 transaction")}function B(e){const t=e,s=e;if(void 0!==t.token)return{type:"erc721send",tokenAddress:t.token,to:t.to,id:t.id,data:t.data,safe:t.safe};if(void 0!==s.tokenAddress)return n({type:"erc721send"},s);throw new Error("Invalid ERC721 transaction")}function D(e){const t=e,n=e;if(void 0!==t.values)return{type:"erc1155send",vals:t.values.map((e=>({id:e.id,amount:e.amount.toString()}))),tokenAddress:t.token,to:t.to,data:t.data};if(void 0!==n.vals)return{type:"erc1155send",vals:n.vals.map((e=>({id:e.id,amount:e.amount}))),tokenAddress:n.tokenAddress,to:n.to,data:n.data};throw new Error("Invalid ERC1155 transaction")}function F(e){const t=e,n=e;if(void 0!==t.abi)return{type:"contractCall",to:t.to,value:r(BigInt(t.value||0)),data:{abi:t.abi,func:t.func,args:t.args}};if(void 0!==n.data)return{type:"contractCall",to:n.to,value:n.value,data:n.data};throw new Error("Invalid contract transaction")}function j(e){return!["transaction","erc20send","erc721send","erc1155send","delayedEncode","contractCall"].includes(e.type)}class q{constructor(e,t,n){this.store=e,this.key=t,this.defaultValue=n}async get(){const e=await this.store.get(this.key);return e||this.defaultValue}async set(e){e?await this.store.set(this.key,e):await this.store.set(this.key,null)}}class H{constructor(){this.store=void 0,V.isAvailable()?this.store=new V:this.store=new W}async get(e){return this.store.get(e)}async set(e,t){return this.store.set(e,t)}}class V{static isAvailable(){return"object"==="object".localStorage}constructor(){if(!V.isAvailable())throw new Error("No localStorage")}async get(e){return window.localStorage.getItem(e)}async set(e,t){t?window.localStorage.setItem(e,t):window.localStorage.removeItem(e)}}class W{constructor(){this.store={},this.store={}}async get(e){return this.store[e]||null}async set(e,t){t?this.store[e]=t:delete this.store[e]}}var z=Object.freeze({__proto__:null,StoreObj:q,LocalStore:H,WindowLocalStorage:V,MemoryStore:W});const G="seq-waas-session-p256k1",K="seq-waas-session";async function X(e,n){const s=await n.get(G,K,e);if(!s)throw new Error("No private key found");const r=new t.ethers.Wallet(s);return{sessionId:()=>r.getAddress(),sign:e=>r.signMessage(e),clear:async()=>{await n.delete(G,K,e)}}}async function Y(e){return async function(e,n){const s=new t.ethers.Wallet(e),r=await s.getAddress();return await n.set(G,K,r,e),X(r,n)}(t.ethers.Wallet.createRandom().privateKey,e)}let Z=function(e){return e[e.ECDSAP256K1=0]="ECDSAP256K1",e[e.ECDSAP256R1=1]="ECDSAP256R1",e}({});const J="seq-waas-session-p256r1",Q="seq-waas-session";async function ee(e,n,s){const r=await s.get(J,Q,e);if(!r||!r.privateKey)throw new Error("No private key found");const i=new TextEncoder;return{sessionId:async()=>{const e=await n.exportKey("raw",r.publicKey),s=new Uint8Array(e.byteLength+1);return s[0]=Z.ECDSAP256R1,s.set(new Uint8Array(e),1),t.ethers.hexlify(s)},sign:async e=>{"string"==typeof e&&(e.startsWith("0x")?(e=e.slice(2),e=t.ethers.getBytes(e)):e=i.encode(e));const s=await n.sign({name:"ECDSA",hash:{name:"SHA-256"}},r.privateKey,e);return t.ethers.hexlify(new Uint8Array(s))},clear:async()=>{await s.delete(J,Q,e)}}}async function te(e,n,s){const r=await async function(e,n){const s=await e.exportKey("raw",n),r=new Uint8Array(s.byteLength+1);return r[0]=Z.ECDSAP256R1,r.set(new Uint8Array(s),1),t.ethers.hexlify(r)}(n,e.publicKey);return await s.set(J,Q,r,e),ee(r,n,s)}async function ne(e,t,n){if(!n)throw new Error("No secure store available");return t?ee(e,t,n):X(e,n)}async function se(e,t){if(!t)throw new Error("No secure store available");return e?async function(e,t){return te(await e.generateKey({name:"ECDSA",namedCurve:"P-256"},!1,["sign","verify"]),e,t)}(e,t):Y(t)}const re=["lifespan"],ie=["lifespan"],oe=["lifespan"];let ae=function(e){return e[e.MAINNET=1]="MAINNET",e[e.ROPSTEN=3]="ROPSTEN",e[e.RINKEBY=4]="RINKEBY",e[e.GOERLI=5]="GOERLI",e[e.KOVAN=42]="KOVAN",e[e.SEPOLIA=11155111]="SEPOLIA",e[e.POLYGON=137]="POLYGON",e[e.POLYGON_MUMBAI=80001]="POLYGON_MUMBAI",e[e.POLYGON_ZKEVM=1101]="POLYGON_ZKEVM",e[e.POLYGON_AMOY=80002]="POLYGON_AMOY",e[e.BSC=56]="BSC",e[e.BSC_TESTNET=97]="BSC_TESTNET",e[e.OPTIMISM=10]="OPTIMISM",e[e.OPTIMISM_KOVAN=69]="OPTIMISM_KOVAN",e[e.OPTIMISM_GOERLI=420]="OPTIMISM_GOERLI",e[e.OPTIMISM_SEPOLIA=11155420]="OPTIMISM_SEPOLIA",e[e.ARBITRUM=42161]="ARBITRUM",e[e.ARBITRUM_GOERLI=421613]="ARBITRUM_GOERLI",e[e.ARBITRUM_SEPOLIA=421614]="ARBITRUM_SEPOLIA",e[e.ARBITRUM_NOVA=42170]="ARBITRUM_NOVA",e[e.AVALANCHE=43114]="AVALANCHE",e[e.AVALANCHE_TESTNET=43113]="AVALANCHE_TESTNET",e[e.GNOSIS=100]="GNOSIS",e[e.BASE=8453]="BASE",e[e.BASE_GOERLI=84531]="BASE_GOERLI",e[e.BASE_SEPOLIA=84532]="BASE_SEPOLIA",e[e.HOMEVERSE_TESTNET=40875]="HOMEVERSE_TESTNET",e[e.HOMEVERSE=19011]="HOMEVERSE",e[e.XAI=660279]="XAI",e[e.XAI_SEPOLIA=37714555429]="XAI_SEPOLIA",e[e.XR_SEPOLIA=2730]="XR_SEPOLIA",e[e.TELOS=40]="TELOS",e[e.B3=8333]="B3",e[e.B3_SEPOLIA=1993]="B3_SEPOLIA",e[e.APECHAIN=33139]="APECHAIN",e[e.APECHAIN_TESTNET=33111]="APECHAIN_TESTNET",e[e.BLAST=81457]="BLAST",e[e.BLAST_SEPOLIA=168587773]="BLAST_SEPOLIA",e[e.BORNE_TESTNET=94984]="BORNE_TESTNET",e[e.SKALE_NEBULA=1482601649]="SKALE_NEBULA",e[e.SKALE_NEBULA_TESTNET=37084624]="SKALE_NEBULA_TESTNET",e[e.SONEIUM_MINATO=1946]="SONEIUM_MINATO",e[e.TOY_TESTNET=21e6]="TOY_TESTNET",e[e.IMMUTABLE_ZKEVM=13371]="IMMUTABLE_ZKEVM",e[e.IMMUTABLE_ZKEVM_TESTNET=13473]="IMMUTABLE_ZKEVM_TESTNET",e[e.ROOT_NETWORK=7668]="ROOT_NETWORK",e[e.ROOT_NETWORK_PORCINI=7672]="ROOT_NETWORK_PORCINI",e[e.HARDHAT=31337]="HARDHAT",e[e.HARDHAT_2=31338]="HARDHAT_2",e}({}),ce=function(e){return e.MAINNET="mainnet",e.TESTNET="testnet",e}({});const de={[ae.MAINNET]:{chainId:ae.MAINNET,type:ce.MAINNET,name:"mainnet",title:"Ethereum",logoURI:`https://assets.sequence.info/images/networks/medium/${ae.MAINNET}.webp`,blockExplorer:{name:"Etherscan",rootUrl:"https://etherscan.io/"},nativeToken:{symbol:"ETH",name:"Ether",decimals:18},ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e"},[ae.ROPSTEN]:{chainId:ae.ROPSTEN,type:ce.TESTNET,name:"ropsten",title:"Ropsten",logoURI:`https://assets.sequence.info/images/networks/medium/${ae.ROPSTEN}.webp`,testnet:!0,blockExplorer:{name:"Etherscan (Ropsten)",rootUrl:"https://ropsten.etherscan.io/"},nativeToken:{symbol:"roETH",name:"Ropsten Ether",decimals:18},ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",deprecated:!0},[ae.RINKEBY]:{chainId:ae.RINKEBY,type:ce.TESTNET,name:"rinkeby",title:"Rinkeby",logoURI:`https://assets.sequence.info/images/networks/medium/${ae.RINKEBY}.webp`,testnet:!0,blockExplorer:{name:"Etherscan (Rinkeby)",rootUrl:"https://rinkeby.etherscan.io/"},nativeToken:{symbol:"rETH",name:"Rinkeby Ether",decimals:18},ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",deprecated:!0},[ae.GOERLI]:{chainId:ae.GOERLI,type:ce.TESTNET,name:"goerli",title:"Goerli",logoURI:`https://assets.sequence.info/images/networks/medium/${ae.GOERLI}.webp`,testnet:!0,blockExplorer:{name:"Etherscan (Goerli)",rootUrl:"https://goerli.etherscan.io/"},nativeToken:{symbol:"gETH",name:"Goerli Ether",decimals:18},ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",deprecated:!0},[ae.KOVAN]:{chainId:ae.KOVAN,type:ce.TESTNET,name:"kovan",title:"Kovan",logoURI:`https://assets.sequence.info/images/networks/medium/${ae.KOVAN}.webp`,testnet:!0,blockExplorer:{name:"Etherscan (Kovan)",rootUrl:"https://kovan.etherscan.io/"},nativeToken:{symbol:"kETH",name:"Kovan Ether",decimals:18},deprecated:!0},[ae.SEPOLIA]:{chainId:ae.SEPOLIA,type:ce.TESTNET,name:"sepolia",title:"Sepolia",logoURI:`https://assets.sequence.info/images/networks/medium/${ae.SEPOLIA}.webp`,testnet:!0,blockExplorer:{name:"Etherscan (Sepolia)",rootUrl:"https://sepolia.etherscan.io/"},nativeToken:{symbol:"sETH",name:"Sepolia Ether",decimals:18}},[ae.POLYGON]:{chainId:ae.POLYGON,type:ce.MAINNET,name:"polygon",title:"Polygon",logoURI:`https://assets.sequence.info/images/networks/medium/${ae.POLYGON}.webp`,blockExplorer:{name:"Polygonscan",rootUrl:"https://polygonscan.com/"},nativeToken:{symbol:"POL",name:"POL",decimals:18}},[ae.POLYGON_MUMBAI]:{chainId:ae.POLYGON_MUMBAI,type:ce.TESTNET,name:"mumbai",title:"Polygon Mumbai",logoURI:`https://assets.sequence.info/images/networks/medium/${ae.POLYGON_MUMBAI}.webp`,testnet:!0,blockExplorer:{name:"Polygonscan (Mumbai)",rootUrl:"https://mumbai.polygonscan.com/"},nativeToken:{symbol:"mMATIC",name:"Mumbai Polygon",decimals:18},deprecated:!0},[ae.POLYGON_AMOY]:{chainId:ae.POLYGON_AMOY,type:ce.TESTNET,name:"amoy",title:"Polygon Amoy",logoURI:`https://assets.sequence.info/images/networks/medium/${ae.POLYGON_AMOY}.webp`,testnet:!0,blockExplorer:{name:"OKLink (Amoy)",rootUrl:"https://www.oklink.com/amoy/"},nativeToken:{symbol:"aPOL",name:"Amoy POL",decimals:18}},[ae.POLYGON_ZKEVM]:{chainId:ae.POLYGON_ZKEVM,type:ce.MAINNET,name:"polygon-zkevm",title:"Polygon zkEVM",logoURI:`https://assets.sequence.info/images/networks/medium/${ae.POLYGON_ZKEVM}.webp`,blockExplorer:{name:"Polygonscan (zkEVM)",rootUrl:"https://zkevm.polygonscan.com/"},nativeToken:{symbol:"ETH",name:"Ether",decimals:18}},[ae.BSC]:{chainId:ae.BSC,type:ce.MAINNET,name:"bsc",title:"BNB Smart Chain",logoURI:`https://assets.sequence.info/images/networks/medium/${ae.BSC}.webp`,blockExplorer:{name:"BSCScan",rootUrl:"https://bscscan.com/"},nativeToken:{symbol:"BNB",name:"BNB",decimals:18}},[ae.BSC_TESTNET]:{chainId:ae.BSC_TESTNET,type:ce.TESTNET,name:"bsc-testnet",title:"BNB Smart Chain Testnet",logoURI:`https://assets.sequence.info/images/networks/medium/${ae.BSC_TESTNET}.webp`,testnet:!0,blockExplorer:{name:"BSCScan (Testnet)",rootUrl:"https://testnet.bscscan.com/"},nativeToken:{symbol:"tBNB",name:"Testnet BNB",decimals:18}},[ae.OPTIMISM]:{chainId:ae.OPTIMISM,type:ce.MAINNET,name:"optimism",title:"Optimism",logoURI:`https://assets.sequence.info/images/networks/medium/${ae.OPTIMISM}.webp`,blockExplorer:{name:"Etherscan (Optimism)",rootUrl:"https://optimistic.etherscan.io/"},nativeToken:{symbol:"ETH",name:"Ether",decimals:18}},[ae.OPTIMISM_KOVAN]:{chainId:ae.OPTIMISM_KOVAN,type:ce.TESTNET,name:"optimism-kovan",title:"Optimism Kovan",logoURI:`https://assets.sequence.info/images/networks/medium/${ae.OPTIMISM_KOVAN}.webp`,testnet:!0,blockExplorer:{name:"Etherscan (Optimism Kovan)",rootUrl:"https://kovan-optimistic.etherscan.io/"},nativeToken:{symbol:"kETH",name:"Kovan Ether",decimals:18},deprecated:!0},[ae.OPTIMISM_GOERLI]:{chainId:ae.OPTIMISM_GOERLI,type:ce.TESTNET,name:"optimism-goerli",title:"Optimism Goerli",logoURI:`https://assets.sequence.info/images/networks/medium/${ae.OPTIMISM_GOERLI}.webp`,testnet:!0,blockExplorer:{name:"Etherscan (Optimism Goerli)",rootUrl:"https://goerli-optimistic.etherscan.io/"},nativeToken:{symbol:"gETH",name:"Goerli Ether",decimals:18},deprecated:!0},[ae.OPTIMISM_SEPOLIA]:{chainId:ae.OPTIMISM_SEPOLIA,type:ce.TESTNET,name:"optimism-sepolia",title:"Optimism Sepolia",logoURI:`https://assets.sequence.info/images/networks/medium/${ae.OPTIMISM_SEPOLIA}.webp`,testnet:!0,blockExplorer:{name:"Etherscan (Optimism Sepolia)",rootUrl:"https://sepolia-optimistic.etherscan.io/"},nativeToken:{symbol:"sETH",name:"Sepolia Ether",decimals:18}},[ae.ARBITRUM]:{chainId:ae.ARBITRUM,type:ce.MAINNET,name:"arbitrum",title:"Arbitrum One",logoURI:`https://assets.sequence.info/images/networks/medium/${ae.ARBITRUM}.webp`,blockExplorer:{name:"Arbiscan",rootUrl:"https://arbiscan.io/"},nativeToken:{symbol:"ETH",name:"Ether",decimals:18}},[ae.ARBITRUM_GOERLI]:{chainId:ae.ARBITRUM_GOERLI,type:ce.TESTNET,name:"arbitrum-goerli",title:"Arbitrum Goerli",logoURI:`https://assets.sequence.info/images/networks/medium/${ae.ARBITRUM_GOERLI}.webp`,testnet:!0,blockExplorer:{name:"Arbiscan (Goerli Testnet)",rootUrl:"https://testnet.arbiscan.io/"},nativeToken:{symbol:"gETH",name:"Goerli Ether",decimals:18},deprecated:!0},[ae.ARBITRUM_SEPOLIA]:{chainId:ae.ARBITRUM_SEPOLIA,type:ce.TESTNET,name:"arbitrum-sepolia",title:"Arbitrum Sepolia",logoURI:`https://assets.sequence.info/images/networks/medium/${ae.ARBITRUM_SEPOLIA}.webp`,testnet:!0,blockExplorer:{name:"Arbiscan (Sepolia Testnet)",rootUrl:"https://sepolia.arbiscan.io/"},nativeToken:{symbol:"sETH",name:"Sepolia Ether",decimals:18}},[ae.ARBITRUM_NOVA]:{chainId:ae.ARBITRUM_NOVA,type:ce.MAINNET,name:"arbitrum-nova",title:"Arbitrum Nova",logoURI:`https://assets.sequence.info/images/networks/medium/${ae.ARBITRUM_NOVA}.webp`,blockExplorer:{name:"Arbiscan Nova",rootUrl:"https://nova.arbiscan.io/"},nativeToken:{symbol:"ETH",name:"Ether",decimals:18}},[ae.AVALANCHE]:{chainId:ae.AVALANCHE,type:ce.MAINNET,name:"avalanche",title:"Avalanche",logoURI:`https://assets.sequence.info/images/networks/medium/${ae.AVALANCHE}.webp`,blockExplorer:{name:"Snowtrace",rootUrl:"https://subnets.avax.network/c-chain/"},nativeToken:{symbol:"AVAX",name:"AVAX",decimals:18}},[ae.AVALANCHE_TESTNET]:{chainId:ae.AVALANCHE_TESTNET,type:ce.TESTNET,name:"avalanche-testnet",title:"Avalanche Testnet",logoURI:`https://assets.sequence.info/images/networks/medium/${ae.AVALANCHE_TESTNET}.webp`,testnet:!0,blockExplorer:{name:"Snowtrace (Testnet)",rootUrl:"https://subnets-test.avax.network/c-chain/"},nativeToken:{symbol:"tAVAX",name:"Testnet AVAX",decimals:18}},[ae.GNOSIS]:{chainId:ae.GNOSIS,type:ce.MAINNET,name:"gnosis",title:"Gnosis Chain",logoURI:`https://assets.sequence.info/images/networks/medium/${ae.GNOSIS}.webp`,blockExplorer:{name:"Gnosis Chain Explorer",rootUrl:"https://blockscout.com/xdai/mainnet/"},nativeToken:{symbol:"XDAI",name:"XDAI",decimals:18}},[ae.BASE]:{chainId:ae.BASE,type:ce.MAINNET,name:"base",title:"Base (Coinbase)",logoURI:`https://assets.sequence.info/images/networks/medium/${ae.BASE}.webp`,blockExplorer:{name:"Base Explorer",rootUrl:"https://basescan.org/"},nativeToken:{symbol:"ETH",name:"Ether",decimals:18}},[ae.BASE_GOERLI]:{chainId:ae.BASE_GOERLI,type:ce.TESTNET,name:"base-goerli",title:"Base Goerli",logoURI:`https://assets.sequence.info/images/networks/medium/${ae.BASE_GOERLI}.webp`,testnet:!0,blockExplorer:{name:"Base Goerli Explorer",rootUrl:"https://goerli.basescan.org/"},nativeToken:{symbol:"gETH",name:"Goerli Ether",decimals:18},deprecated:!0},[ae.BASE_SEPOLIA]:{chainId:ae.BASE_SEPOLIA,type:ce.TESTNET,name:"base-sepolia",title:"Base Sepolia",logoURI:`https://assets.sequence.info/images/networks/medium/${ae.BASE_SEPOLIA}.webp`,testnet:!0,blockExplorer:{name:"Base Sepolia Explorer",rootUrl:"https://base-sepolia.blockscout.com/"},nativeToken:{symbol:"sETH",name:"Sepolia Ether",decimals:18}},[ae.HOMEVERSE]:{chainId:ae.HOMEVERSE,type:ce.MAINNET,name:"homeverse",title:"Oasys Homeverse",logoURI:`https://assets.sequence.info/images/networks/medium/${ae.HOMEVERSE}.webp`,blockExplorer:{name:"Oasys Homeverse Explorer",rootUrl:"https://explorer.oasys.homeverse.games/"},nativeToken:{symbol:"OAS",name:"OAS",decimals:18}},[ae.HOMEVERSE_TESTNET]:{chainId:ae.HOMEVERSE_TESTNET,type:ce.TESTNET,name:"homeverse-testnet",title:"Oasys Homeverse Testnet",logoURI:`https://assets.sequence.info/images/networks/medium/${ae.HOMEVERSE_TESTNET}.webp`,testnet:!0,blockExplorer:{name:"Oasys Homeverse Explorer (Testnet)",rootUrl:"https://explorer.testnet.oasys.homeverse.games/"},nativeToken:{symbol:"tOAS",name:"Testnet OAS",decimals:18}},[ae.XAI]:{chainId:ae.XAI,type:ce.MAINNET,name:"xai",title:"Xai",logoURI:`https://assets.sequence.info/images/networks/medium/${ae.XAI}.webp`,blockExplorer:{name:"Xai Explorer",rootUrl:"https://explorer.xai-chain.net/"},nativeToken:{symbol:"XAI",name:"XAI",decimals:18}},[ae.XAI_SEPOLIA]:{chainId:ae.XAI_SEPOLIA,type:ce.TESTNET,name:"xai-sepolia",title:"Xai Sepolia",logoURI:`https://assets.sequence.info/images/networks/medium/${ae.XAI_SEPOLIA}.webp`,testnet:!0,blockExplorer:{name:"Xai Sepolia Explorer",rootUrl:"https://testnet-explorer-v2.xai-chain.net/"},nativeToken:{symbol:"sXAI",name:"Sepolia XAI",decimals:18}},[ae.XR_SEPOLIA]:{chainId:ae.XR_SEPOLIA,type:ce.TESTNET,name:"xr-sepolia",title:"XR Sepolia",logoURI:`https://assets.sequence.info/images/networks/medium/${ae.XR_SEPOLIA}.webp`,testnet:!0,blockExplorer:{name:"XR Sepolia Explorer",rootUrl:"https://xr-sepolia-testnet.explorer.caldera.xyz/"},nativeToken:{symbol:"tXR",name:"Sepolia XR",decimals:18}},[ae.B3]:{chainId:ae.B3,type:ce.MAINNET,name:"b3",title:"B3",logoURI:`https://assets.sequence.info/images/networks/medium/${ae.B3}.webp`,testnet:!1,blockExplorer:{name:"B3 Explorer",rootUrl:"https://explorer.b3.fun/"},nativeToken:{symbol:"ETH",name:"Ether",decimals:18}},[ae.B3_SEPOLIA]:{chainId:ae.B3_SEPOLIA,type:ce.TESTNET,name:"b3-sepolia",title:"B3 Sepolia",logoURI:`https://assets.sequence.info/images/networks/medium/${ae.B3_SEPOLIA}.webp`,testnet:!0,blockExplorer:{name:"B3 Sepolia Explorer",rootUrl:"https://sepolia.explorer.b3.fun/"},nativeToken:{symbol:"ETH",name:"Ether",decimals:18}},[ae.APECHAIN]:{chainId:ae.APECHAIN,type:ce.MAINNET,name:"apechain",title:"APE Chain",logoURI:`https://assets.sequence.info/images/networks/medium/${ae.APECHAIN}.webp`,testnet:!1,blockExplorer:{name:"APE Chain Explorer",rootUrl:"https://apechain.calderaexplorer.xyz/"},nativeToken:{symbol:"APE",name:"ApeCoin",decimals:18}},[ae.APECHAIN_TESTNET]:{chainId:ae.APECHAIN_TESTNET,type:ce.TESTNET,name:"apechain-testnet",title:"APE Chain Testnet",logoURI:`https://assets.sequence.info/images/networks/medium/${ae.APECHAIN_TESTNET}.webp`,testnet:!0,blockExplorer:{name:"APE Chain Explorer",rootUrl:"https://curtis.explorer.caldera.xyz/"},nativeToken:{symbol:"APE",name:"ApeCoin",decimals:18}},[ae.BLAST]:{chainId:ae.BLAST,type:ce.MAINNET,name:"blast",title:"Blast",logoURI:`https://assets.sequence.info/images/networks/medium/${ae.BLAST}.webp`,blockExplorer:{name:"Blast Explorer",rootUrl:"https://blastscan.io/"},nativeToken:{symbol:"ETH",name:"Ether",decimals:18}},[ae.BLAST_SEPOLIA]:{chainId:ae.BLAST_SEPOLIA,type:ce.TESTNET,name:"blast-sepolia",title:"Blast Sepolia",logoURI:`https://assets.sequence.info/images/networks/medium/${ae.BLAST_SEPOLIA}.webp`,testnet:!0,blockExplorer:{name:"Blast Sepolia Explorer",rootUrl:"https://sepolia.blastexplorer.io/"},nativeToken:{symbol:"ETH",name:"Ether",decimals:18}},[ae.TELOS]:{chainId:ae.TELOS,type:ce.MAINNET,name:"telos",title:"Telos",logoURI:`https://assets.sequence.info/images/networks/medium/${ae.TELOS}.webp`,blockExplorer:{name:"Telos Explorer",rootUrl:"https://explorer.telos.net/network/"},nativeToken:{symbol:"TLOS",name:"TLOS",decimals:18}},[ae.BORNE_TESTNET]:{chainId:ae.BORNE_TESTNET,type:ce.TESTNET,name:"borne-testnet",title:"Borne Testnet",logoURI:`https://assets.sequence.info/images/networks/medium/${ae.BORNE_TESTNET}.webp`,testnet:!0,blockExplorer:{name:"Borne Testnet Explorer",rootUrl:"https://subnets-test.avax.network/bornegfdn"},nativeToken:{symbol:"BORNE",name:"BORNE",decimals:18}},[ae.SKALE_NEBULA]:{chainId:ae.SKALE_NEBULA,type:ce.MAINNET,name:"skale-nebula",title:"SKALE Nebula Gaming Hub",logoURI:`https://assets.sequence.info/images/networks/medium/${ae.SKALE_NEBULA}.webp`,testnet:!1,blockExplorer:{name:"SKALE Nebula Gaming Hub Explorer",rootUrl:"https://green-giddy-denebola.explorer.mainnet.skalenodes.com/"},nativeToken:{symbol:"sFUEL",name:"SKALE Fuel",decimals:18}},[ae.SKALE_NEBULA_TESTNET]:{chainId:ae.SKALE_NEBULA_TESTNET,type:ce.TESTNET,name:"skale-nebula-testnet",title:"SKALE Nebula Gaming Hub Testnet",logoURI:`https://assets.sequence.info/images/networks/medium/${ae.SKALE_NEBULA_TESTNET}.webp`,testnet:!0,blockExplorer:{name:"SKALE Nebula Gaming Hub Testnet Explorer",rootUrl:"https://lanky-ill-funny-testnet.explorer.testnet.skalenodes.com/"},nativeToken:{symbol:"sFUEL",name:"SKALE Fuel",decimals:18}},[ae.SONEIUM_MINATO]:{chainId:ae.SONEIUM_MINATO,type:ce.TESTNET,name:"soneium-minato",title:"Soneium Minato (Testnet)",logoURI:`https://assets.sequence.info/images/networks/medium/${ae.SONEIUM_MINATO}.webp`,testnet:!0,blockExplorer:{name:"Soneium Minato Explorer",rootUrl:"https://explorer-testnet.soneium.org/"},nativeToken:{symbol:"ETH",name:"Ether",decimals:18}},[ae.TOY_TESTNET]:{chainId:ae.TOY_TESTNET,type:ce.TESTNET,name:"toy-testnet",title:"TOY (Testnet)",logoURI:`https://assets.sequence.info/images/networks/medium/${ae.TOY_TESTNET}.webp`,testnet:!0,blockExplorer:{name:"TOY Testnet Explorer",rootUrl:"https://toy-chain-testnet.explorer.caldera.xyz/"},nativeToken:{symbol:"TOY",name:"TOY",decimals:18}},[ae.IMMUTABLE_ZKEVM]:{chainId:ae.IMMUTABLE_ZKEVM,type:ce.MAINNET,name:"immutable-zkevm",title:"Immutable zkEVM",logoURI:`https://assets.sequence.info/images/networks/medium/${ae.IMMUTABLE_ZKEVM}.webp`,testnet:!1,blockExplorer:{name:"Immutable zkEVM Explorer",rootUrl:"https://explorer.immutable.com/"},nativeToken:{symbol:"IMX",name:"IMX",decimals:18}},[ae.IMMUTABLE_ZKEVM_TESTNET]:{chainId:ae.IMMUTABLE_ZKEVM_TESTNET,type:ce.TESTNET,name:"immutable-zkevm-testnet",title:"Immutable zkEVM Testnet",logoURI:`https://assets.sequence.info/images/networks/medium/${ae.IMMUTABLE_ZKEVM_TESTNET}.webp`,testnet:!0,blockExplorer:{name:"Immutable zkEVM Testnet Explorer",rootUrl:"https://explorer.testnet.immutable.com/"},nativeToken:{symbol:"IMX",name:"IMX",decimals:18}},[ae.ROOT_NETWORK]:{chainId:ae.ROOT_NETWORK,type:ce.MAINNET,name:"rootnet",title:"The Root Network",logoURI:`https://assets.sequence.info/images/networks/medium/${ae.ROOT_NETWORK}.webp`,testnet:!1,blockExplorer:{name:"The Root Network Explorer",rootUrl:"https://rootscan.io/"},nativeToken:{symbol:"XRP",name:"XRP",decimals:18}},[ae.ROOT_NETWORK_PORCINI]:{chainId:ae.ROOT_NETWORK_PORCINI,type:ce.TESTNET,name:"rootnet-porcini",title:"The Root Network Porcini Testnet",logoURI:`https://assets.sequence.info/images/networks/medium/${ae.ROOT_NETWORK_PORCINI}.webp`,testnet:!0,blockExplorer:{name:"The Root Network Porcini Testnet Explorer",rootUrl:"https://porcini.rootscan.io/"},nativeToken:{symbol:"XRP",name:"XRP",decimals:18}},[ae.HARDHAT]:{chainId:ae.HARDHAT,name:"hardhat",title:"Hardhat (local testnet)",nativeToken:{symbol:"ETH",name:"Ether",decimals:18}},[ae.HARDHAT_2]:{chainId:ae.HARDHAT_2,name:"hardhat2",title:"Hardhat (local testnet)",nativeToken:{symbol:"ETH",name:"Ether",decimals:18}}},ue=(e,t=!1)=>(((e,t=!1,n=!1)=>{if(!e)throw new Error("invalid network config: empty config");const s=[];if(Array.isArray(e)?s.push(...e):s.push(e),0===s.length){if(t)throw new Error("invalid network config: empty config");return!1}const r=s.map((e=>e.chainId)).sort(),i=r.filter(((e,t)=>r.indexOf(e)!==t));if(i.length>0){if(t)throw new Error(`invalid network config: duplicate chainIds ${i}`);return!1}s.forEach((e=>e.name=e.name.toLowerCase()));const o=s.map((e=>e.name)).sort(),a=o.filter(((e,t)=>o.indexOf(e)!==t));if(a.length>0){if(t)throw new Error(`invalid network config: duplicate network names ${a}`);return!1}let c=!1;for(let e=0;e<s.length;e++){const r=s[e];if(!(r.rpcUrl&&""!==r.rpcUrl||r.provider)){if(t)throw new Error(`invalid network config for chainId ${r.chainId}: rpcUrl or provider must be provided`);return!1}if(!n&&!r.relayer){if(t)throw new Error(`invalid network config for chainId ${r.chainId}: relayer must be provided`);return!1}if(r.isDefaultChain){if(c){if(t)throw new Error(`invalid network config for chainId ${r.chainId}: DefaultChain is already set by another config`);return!1}c=!0}}if(!c){if(t)throw new Error("invalid network config: DefaultChain must be set");return!1}})(e,!0,t),e),le=e=>{if(!e)return[];const t=e.sort(((e,t)=>e.chainId===t.chainId?0:e.chainId<t.chainId?-1:1)),n=t.findIndex((e=>e.isDefaultChain));return n>0&&t.splice(0,0,t.splice(n,1)[0]),t},he=(e,t)=>"string"==typeof e?(t=t||{},e.replace(/\$\{\s*([$#@\-\d\w]+)\s*\}/gim,(function(e,n){let s=t[n];return s="function"==typeof s?s():null==s?"":"object"==typeof s||"symbol"==typeof s?s.toString():s.valueOf(),s}))):"",pe=e=>he("https://${network}-indexer.sequence.app",{network:e}),fe=e=>he("https://${network}-relayer.sequence.app",{network:e}),me=(e,t)=>{const s=de[e];if(!s)throw new Error(`Network with chainId ${e} not found`);const r=(e=>he("https://nodes.sequence.app/${network}",{network:e}))(s.name);return n({},s,{rpcUrl:r,indexerUrl:pe(s.name),relayer:{url:fe(s.name),provider:{url:r}}},t)},ge=[n({},de[ae.HARDHAT],{rpcUrl:"http://localhost:8545",relayer:{url:"http://localhost:3000",provider:{url:"http://localhost:8545"}}}),n({},de[ae.HARDHAT_2],{rpcUrl:"http://localhost:9545",relayer:{url:"http://localhost:3000",provider:{url:"http://localhost:9545"}}})];(e=>{ue(le(e))})([n({},me(ae.POLYGON),{isDefaultChain:!0,isAuthChain:!0}),me(ae.MAINNET),me(ae.BSC),me(ae.AVALANCHE),me(ae.ARBITRUM),me(ae.ARBITRUM_NOVA),me(ae.OPTIMISM),me(ae.OPTIMISM_SEPOLIA),me(ae.POLYGON_ZKEVM),me(ae.GNOSIS),me(ae.RINKEBY,{disabled:!0}),me(ae.GOERLI,{disabled:!0}),me(ae.SEPOLIA),me(ae.POLYGON_MUMBAI,{disabled:!0}),me(ae.POLYGON_AMOY),me(ae.BSC_TESTNET),me(ae.ARBITRUM_SEPOLIA),me(ae.BASE),me(ae.BASE_SEPOLIA),me(ae.HOMEVERSE),me(ae.HOMEVERSE_TESTNET),me(ae.XAI),me(ae.XAI_SEPOLIA),me(ae.AVALANCHE_TESTNET),me(ae.XR_SEPOLIA),me(ae.B3),me(ae.B3_SEPOLIA),me(ae.APECHAIN),me(ae.APECHAIN_TESTNET),me(ae.BLAST),me(ae.BLAST_SEPOLIA),me(ae.TELOS),me(ae.BORNE_TESTNET),me(ae.SKALE_NEBULA),me(ae.SKALE_NEBULA_TESTNET),me(ae.SONEIUM_MINATO),me(ae.TOY_TESTNET),me(ae.IMMUTABLE_ZKEVM),me(ae.IMMUTABLE_ZKEVM_TESTNET),me(ae.ROOT_NETWORK),me(ae.ROOT_NETWORK_PORCINI),...ge]);t.ethers.JsonRpcProvider;const ye=Object.entries(de).reduce(((e,[t,n])=>(e[n.name]=n.chainId,e)),{}),we=Object.entries(ye).reduce(((e,[t,n])=>(e[n]=t,e)),{});function Ee(e){const t="number"==typeof e?e:parseInt(e);if(t in we)return t;const n=e.toString().toLowerCase();if(n in ye)return ye[n];throw new Error(`Unknown network: ${e}`)}function be(e){return we[Ee(e)]}var Se=Object.freeze({__proto__:null,isSimpleNetwork:function(e){return Ee(e)in ye},toNetworkID:Ee,nameOfNetwork:be,rpcNode:function(e){return"https://nodes.sequence.app/"+be(e)}});const ve=()=>Ae()?new Ie:null;function Ae(){return"object"==="object".crypto&&"object"==="object".crypto.subtle}class Ie{constructor(){if(!Ae())throw new Error("window.crypto.subtle is not available")}generateKey(e,t,n){return window.crypto.subtle.generateKey(e,t,n)}importKey(e,t,n,s,r){return window.crypto.subtle.importKey(e,t,n,s,r)}async exportKey(e,t){const n=await window.crypto.subtle.exportKey(e,t);return new Uint8Array(n)}async digest(e,t){const n=await window.crypto.subtle.digest(e,t);return new Uint8Array(n)}async sign(e,t,n){const s=await window.crypto.subtle.sign(e,t,n);return new Uint8Array(s)}verify(e,t,n,s){return window.crypto.subtle.verify(e,t,n,s)}getRandomValues(e){const t=new Uint8Array(e);return window.crypto.getRandomValues(t)}}let Te,Oe;const Re=new WeakMap,ke=new WeakMap,xe=new WeakMap,Pe=new WeakMap,Me=new WeakMap;let Ne={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return ke.get(e);if("objectStoreNames"===t)return e.objectStoreNames||xe.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ue(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function Ce(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(Oe||(Oe=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(...t){return e.apply(Le(this),t),Ue(Re.get(this))}:function(...t){return Ue(e.apply(Le(this),t))}:function(t,...n){const s=e.call(Le(this),t,...n);return xe.set(s,t.sort?t.sort():[t]),Ue(s)}}function _e(e){return"function"==typeof e?Ce(e):(e instanceof IDBTransaction&&function(e){if(ke.has(e))return;const t=new Promise(((t,n)=>{const s=()=>{e.removeEventListener("complete",r),e.removeEventListener("error",i),e.removeEventListener("abort",i)},r=()=>{t(),s()},i=()=>{n(e.error||new DOMException("AbortError","AbortError")),s()};e.addEventListener("complete",r),e.addEventListener("error",i),e.addEventListener("abort",i)}));ke.set(e,t)}(e),t=e,(Te||(Te=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some((e=>t instanceof e))?new Proxy(e,Ne):e);var t}function Ue(e){if(e instanceof IDBRequest)return function(e){const t=new Promise(((t,n)=>{const s=()=>{e.removeEventListener("success",r),e.removeEventListener("error",i)},r=()=>{t(Ue(e.result)),s()},i=()=>{n(e.error),s()};e.addEventListener("success",r),e.addEventListener("error",i)}));return t.then((t=>{t instanceof IDBCursor&&Re.set(t,e)})).catch((()=>{})),Me.set(t,e),t}(e);if(Pe.has(e))return Pe.get(e);const t=_e(e);return t!==e&&(Pe.set(e,t),Me.set(t,e)),t}const Le=e=>Me.get(e);const $e=["get","getKey","getAll","getAllKeys","count"],Be=["put","add","delete","clear"],De=new Map;function Fe(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!=typeof t)return;if(De.get(t))return De.get(t);const n=t.replace(/FromIndex$/,""),s=t!==n,r=Be.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!r&&!$e.includes(n))return;const i=async function(e,...t){const i=this.transaction(e,r?"readwrite":"readonly");let o=i.store;return s&&(o=o.index(t.shift())),(await Promise.all([o[n](...t),r&&i.done]))[0]};return De.set(t,i),i}Ne=(e=>({...e,get:(t,n,s)=>Fe(t,n)||e.get(t,n,s),has:(t,n)=>!!Fe(t,n)||e.has(t,n)}))(Ne);const je=()=>qe()?new He:null;function qe(){return"object"==typeof indexedDB}class He{constructor(){if(this.db=void 0,!qe())throw new Error("IndexedDB is not available");this.db=null}async openDB(e,t,n){return this.db||(this.db=await function(e,t,{blocked:n,upgrade:s,blocking:r,terminated:i}={}){const o=indexedDB.open(e,t),a=Ue(o);return s&&o.addEventListener("upgradeneeded",(e=>{s(Ue(o.result),e.oldVersion,e.newVersion,Ue(o.transaction),e)})),n&&o.addEventListener("blocked",(e=>n(e.oldVersion,e.newVersion,e))),a.then((e=>{i&&e.addEventListener("close",(()=>i())),r&&e.addEventListener("versionchange",(e=>r(e.oldVersion,e.newVersion,e)))})).catch((()=>{})),a}(e,1,{upgrade(e){e.createObjectStore(t)}})),this.db}async get(e,t,n){const s=await this.openDB(e,t,1),r=s.transaction(t,"readonly"),i=await s.get(t,n);return await r.done,i}async set(e,t,n,s){const r=await this.openDB(e,t,1),i=r.transaction(t,"readwrite");return await r.put(t,s,n),await i.done,!0}async delete(e,t,n){const s=await this.openDB(e,t,1),r=s.transaction(t,"readwrite");return await s.delete(t,n),await r.done,!0}}const Ve=300;class We{constructor(e={network:1},t=new H,n=ve(),s=je()){this.config=e,this.store=t,this.cryptoBackend=n,this.secureStoreBackend=s,this.status=void 0,this.sessionId=void 0,this.wallet=void 0,this.sessionObservers=[],this.gettingSessionIdPromise=void 0,this.status=new q(this.store,"@0xsequence.waas.status","signed-out"),this.sessionId=new q(this.store,"@0xsequence.waas.session_id",void 0),this.wallet=new q(this.store,"@0xsequence.waas.wallet",void 0)}async getAddress(){return this.getWalletAddress()}async getWalletAddress(){if(!await this.isSignedIn())throw new Error("Not signed in");const e=await this.wallet.get();if(!e)throw new Error("No wallet");return e}async commonArgs(e){var t;return n({},e,{identifier:null==e?void 0:e.identifier,wallet:await this.getWalletAddress(),lifespan:null!=(t=null==e?void 0:e.lifespan)?t:Ve,chainId:Ee(e.network||this.config.network)})}async signIntent(e){const t=await this.getSessionId();if(void 0===t)throw new Error("session not open");return p(await ne(t,this.cryptoBackend,this.secureStoreBackend),e)}async signUsingSessionKey(e){const t=await this.getSessionId();if(!t)throw new Error("session not open");return(await ne(t,this.cryptoBackend,this.secureStoreBackend)).sign(e)}async getSessionId(){var e=this;if(this.gettingSessionIdPromise)return this.gettingSessionIdPromise;return this.gettingSessionIdPromise=async function(){let t=await e.sessionId.get();if(!t){const n=await se(e.cryptoBackend,e.secureStoreBackend);t=await n.sessionId(),await e.sessionId.set(t),e.signalObservers(e.sessionObservers,t)}return e.gettingSessionIdPromise=void 0,t}(),this.gettingSessionIdPromise}async signInWithIdToken(e){if("signed-out"!==await this.status.get())throw await this.completeSignOut(),new Error("you are already signed in");const t=await this.getSessionId(),n=await x({sessionId:t,identityType:w.None,idToken:e,lifespan:Ve});return await this.status.set("pending"),this.signIntent(n)}async initiateGuestAuth(){const e=await this.getSessionId(),t=await k({sessionId:e,identityType:w.Guest,verifier:e,lifespan:Ve});return this.signIntent(t)}async initiateEmailAuth(e){const t=await this.getSessionId(),n=await k({sessionId:t,identityType:w.Email,verifier:`${e};${t}`,lifespan:Ve});return this.signIntent(n)}async initiateIdTokenAuth(e,n){const s=await this.getSessionId(),r=t.ethers.id(e),i=await k({sessionId:s,identityType:w.OIDC,verifier:`${r};${n}`,lifespan:Ve});return this.signIntent(i)}async initiateStytchAuth(e,n){const s=await this.getSessionId(),r=t.ethers.id(e),i=await k({sessionId:s,identityType:w.Stytch,verifier:`${r};${n}`,lifespan:Ve});return this.signIntent(i)}async initiatePlayFabAuth(e,n){const s=await this.getSessionId(),r=t.ethers.id(n),i=await k({sessionId:s,identityType:w.PlayFab,verifier:`${e}|${r}`,lifespan:Ve});return this.signIntent(i)}async completeAuth(e,t){const s=await this.getSessionId(),r=await x(n({},t,{sessionId:s,lifespan:Ve},e));return await this.status.set("pending"),this.signIntent(r)}onSessionStateChanged(e){return this.sessionObservers.push(e),()=>{this.sessionObservers=this.sessionObservers.filter((t=>t!=e))}}async signOut({lifespan:e,sessionId:t}={}){if(!(t=t||await this.sessionId.get()))throw new Error("session not open");const n=P({lifespan:e||Ve,sessionId:t});return this.signIntent(n)}async signOutSession(e){const t=P({lifespan:Ve,sessionId:e});return this.signIntent(t)}async listSessions(){const e=function(e){let{lifespan:t}=e,n=s(e,I);return h(f.listSessions,t,n)}({lifespan:Ve,wallet:await this.getWalletAddress()});return this.signIntent(e)}async completeSignOut(){await Promise.all([this.status.set("signed-out"),this.wallet.set(void 0),this.sessionId.set(void 0)]),this.signalObservers(this.sessionObservers,null)}async completeSignIn(e){if(e.result)return this.completeSignIn(e.result);const t=await this.status.get();if("sessionOpened"!==e.code)throw new Error("Invalid receipt");if("pending"!==t)throw new Error("No pending sign in");return await Promise.all([this.status.set("signed-in"),this.wallet.set(e.data.wallet)]),e.data.wallet}async isSignedIn(){return"signed-in"===await this.status.get()}async sessionAuthProof(e){var t;const n=function(e){let{lifespan:t}=e,n=s(e,O);return h(f.sessionAuthProof,t,n)}({lifespan:null!=(t=e.lifespan)?t:Ve,network:Ee(e.network||this.config.network).toString(),wallet:await this.getWalletAddress(),nonce:e.nonce});return this.signIntent(n)}async signMessage(e){var s;const r=function({wallet:e,chainId:n,message:s,lifespan:r}){return h(f.signMessage,r,{wallet:e,network:n.toString(),message:s.startsWith("0x")?s:t.ethers.hexlify(t.ethers.toUtf8Bytes(s))})}(n({chainId:Ee(e.network||this.config.network)},e,{lifespan:null!=(s=e.lifespan)?s:Ve,wallet:await this.getWalletAddress()}));return this.signIntent(r)}async sendTransaction(e){const t=U(await this.commonArgs(e));return this.signIntent(t)}async getTransactionReceipt(e){const t=function({lifespan:e,chainId:t,wallet:n,metaTxHash:s}){return h(f.getTransactionReceipt,e,{wallet:n,network:t.toString(),metaTxHash:s})}(await this.commonArgs(e));return this.signIntent(t)}async sendERC20(e){if(e.token.toLowerCase()===e.to.toLowerCase())throw new Error("Cannot burn tokens using sendERC20");const t=function(e){let{token:t,to:r,value:i}=e,o=s(e,M);return U(n({transactions:[$({tokenAddress:t,to:r,value:i.toString()})]},o))}(await this.commonArgs(e));return this.signIntent(t)}async sendERC721(e){if(e.token.toLowerCase()===e.to.toLowerCase())throw new Error("Cannot burn tokens using sendERC721");const t=function(e){let{token:t,to:r,id:i,safe:o,data:a}=e,c=s(e,N);return U(n({transactions:[B({tokenAddress:t,to:r,id:i,data:a,safe:o})]},c))}(await this.commonArgs(e));return this.signIntent(t)}async sendERC1155(e){if(e.token.toLowerCase()===e.to.toLowerCase())throw new Error("Cannot burn tokens using sendERC1155");const t=function(e){let{token:t,to:r,values:i,data:o}=e,a=s(e,C);const c=i.map((e=>({id:e.id,amount:BigInt(e.amount).toString()})));return U(n({transactions:[D({tokenAddress:t,to:r,vals:c,data:o})]},a))}(await this.commonArgs(e));return this.signIntent(t)}async callContract(e){const t=function(e){let{to:t,value:r,abi:i,func:o,args:a}=e,c=s(e,_);return U(n({transactions:[F({to:t,value:BigInt(r||0).toString(),data:{abi:i,func:o,args:a}})]},c))}(await this.commonArgs(e));return this.signIntent(t)}async feeOptions(e){const n=function({lifespan:e,wallet:n,identifier:s,chainId:i,transactions:o}){return h(f.feeOptions,e,{identifier:s,wallet:n,network:i.toString(),transactions:o.map((e=>{if(!e.to||e.to===t.ethers.ZeroAddress)throw new Error("Contract creation not supported");return j(e)?{type:"transaction",to:e.to,value:r(BigInt(e.value||0)),data:t.ethers.hexlify(e.data||"0x")}:e}))})}(await this.commonArgs(e));return this.signIntent(n)}async validateSession({deviceMetadata:e}){const t=await this.sessionId.get();if(!t)throw new Error("session not open");const n=await async function(e){let{lifespan:t}=e,n=s(e,S);return h(f.validateSession,t,n)}({lifespan:Ve,sessionId:t,deviceMetadata:e,wallet:await this.getWalletAddress()});return this.signIntent(n)}async getSession(){const e=await this.sessionId.get();if(!e)throw new Error("session not open");const t=function(e){let{lifespan:t}=e,n=s(e,T);return h(f.getSession,t,n)}({sessionId:e,wallet:await this.getWalletAddress(),lifespan:Ve});return this.signIntent(t)}async finishValidateSession(e,t){const n=await this.sessionId.get();if(!n)throw new Error("session not open");const r=function(e){let{lifespan:t}=e,n=s(e,v);return h(f.finishValidateSession,t,n)}({sessionId:n,wallet:await this.getWalletAddress(),lifespan:Ve,salt:e,challenge:t});return this.signIntent(r)}async listAccounts(){const e=function(e){let{lifespan:t}=e,n=s(e,re);return h(f.listAccounts,t,n)}({wallet:await this.getWalletAddress(),lifespan:Ve});return this.signIntent(e)}async linkAccount(e){const t=await this.sessionId.get();if(!t)throw new Error("session not open");const r=function(e){let{lifespan:t}=e,n=s(e,ie);return h(f.federateAccount,t,n)}(n({wallet:await this.getWalletAddress(),lifespan:Ve,sessionId:t},e));return this.signIntent(r)}async removeAccount({accountId:e}){const t=function(e){let{lifespan:t}=e,n=s(e,oe);return h(f.removeAccount,t,n)}({wallet:await this.getWalletAddress(),lifespan:Ve,accountId:e});return this.signIntent(t)}async getIdToken({nonce:e}){const t=await this.sessionId.get();if(!t)throw new Error("session not open");const n=function(e){let{lifespan:t}=e,n=s(e,R);return h(f.getIdToken,t,n)}({wallet:await this.getWalletAddress(),lifespan:Ve,sessionId:t,nonce:e});return this.signIntent(n)}async batch(e){const t=function(e){if(0===e.length)throw new Error("No packets provided");const t=e[0].data.network,n=e[0].data.wallet,s=e[0].expiresAt-e[0].issuedAt,r=e[0].data.identifier,i=e[0].data.transactionsFeeQuote;if(!e.every((e=>e.data.network===t)))throw new Error("All packets must have the same chainId");if(!e.every((e=>e.data.wallet===n)))throw new Error("All packets must have the same wallet");return h(f.sendTransaction,s,{network:t,wallet:n,identifier:r,transactions:e.flatMap((e=>e.data.transactions)),transactionsFeeQuote:i})}(e);return this.signIntent(t)}signalObservers(e,t){e.forEach((e=>e(t)))}async updateIntentTime(e,t){const n=function(e,t){const n=s(e,a),r=e.expiresAt-e.issuedAt;return n.issuedAt=Math.floor(t.getTime()/1e3),n.expiresAt=n.issuedAt+r,n}(e,t);return this.signIntent(n)}}class ze{constructor(e,t){this.hostname=void 0,this.fetch=void 0,this.path="/rpc/WaasAuthenticator/",this.registerSession=(e,t,n)=>this.fetch(this.url("RegisterSession"),Ge(e,t,n)).then((e=>Ke(e).then((e=>({session:e.session,response:e.response})))),(e=>{throw Ze.new({cause:`fetch(): ${e.message||""}`})})),this.sendIntent=(e,t,n)=>this.fetch(this.url("SendIntent"),Ge(e,t,n)).then((e=>Ke(e).then((e=>({response:e.response})))),(e=>{throw Ze.new({cause:`fetch(): ${e.message||""}`})})),this.chainList=(e,t)=>this.fetch(this.url("ChainList"),Ge({},e,t)).then((e=>Ke(e).then((e=>({chains:e.chains})))),(e=>{throw Ze.new({cause:`fetch(): ${e.message||""}`})})),this.hostname=e,this.fetch=(e,n)=>t(e,n)}url(e){return this.hostname+this.path+e}}const Ge=(e={},t={},s=null)=>({method:"POST",headers:n({},t,{"Content-Type":"application/json"}),body:JSON.stringify(e||{}),signal:s}),Ke=e=>e.text().then((t=>{let n;try{n=JSON.parse(t)}catch(n){let s="";throw n instanceof Error&&(s=n.message),tt.new({status:e.status,cause:`JSON.parse(): ${s}: response text: ${t}`})}if(!e.ok){const e="number"==typeof n.code?n.code:0;throw(gt[e]||Xe).new(n)}return n}));class Xe extends Error{constructor(e,t,n,s,r){super(n),this.name=void 0,this.code=void 0,this.message=void 0,this.status=void 0,this.cause=void 0,this.msg=void 0,this.name=e||"WebrpcError",this.code="number"==typeof t?t:0,this.message=n||`endpoint error ${this.code}`,this.msg=this.message,this.status="number"==typeof s?s:0,this.cause=r,Object.setPrototypeOf(this,Xe.prototype)}static new(e){return new this(e.error,e.code,e.message||e.msg,e.status,e.cause)}}class Ye extends Xe{constructor(e="WebrpcEndpoint",t=0,n="endpoint error",s=0,r){super(e,t,n,s,r),Object.setPrototypeOf(this,Ye.prototype)}}class Ze extends Xe{constructor(e="WebrpcRequestFailed",t=-1,n="request failed",s=0,r){super(e,t,n,s,r),Object.setPrototypeOf(this,Ze.prototype)}}class Je extends Xe{constructor(e="WebrpcBadRoute",t=-2,n="bad route",s=0,r){super(e,t,n,s,r),Object.setPrototypeOf(this,Je.prototype)}}class Qe extends Xe{constructor(e="WebrpcBadMethod",t=-3,n="bad method",s=0,r){super(e,t,n,s,r),Object.setPrototypeOf(this,Qe.prototype)}}class et extends Xe{constructor(e="WebrpcBadRequest",t=-4,n="bad request",s=0,r){super(e,t,n,s,r),Object.setPrototypeOf(this,et.prototype)}}class tt extends Xe{constructor(e="WebrpcBadResponse",t=-5,n="bad response",s=0,r){super(e,t,n,s,r),Object.setPrototypeOf(this,tt.prototype)}}class nt extends Xe{constructor(e="WebrpcServerPanic",t=-6,n="server panic",s=0,r){super(e,t,n,s,r),Object.setPrototypeOf(this,nt.prototype)}}class st extends Xe{constructor(e="WebrpcInternalError",t=-7,n="internal error",s=0,r){super(e,t,n,s,r),Object.setPrototypeOf(this,st.prototype)}}class rt extends Xe{constructor(e="WebrpcClientDisconnected",t=-8,n="client disconnected",s=0,r){super(e,t,n,s,r),Object.setPrototypeOf(this,rt.prototype)}}class it extends Xe{constructor(e="WebrpcStreamLost",t=-9,n="stream lost",s=0,r){super(e,t,n,s,r),Object.setPrototypeOf(this,it.prototype)}}class ot extends Xe{constructor(e="WebrpcStreamFinished",t=-10,n="stream finished",s=0,r){super(e,t,n,s,r),Object.setPrototypeOf(this,ot.prototype)}}class at extends Xe{constructor(e="Unauthorized",t=1e3,n="Unauthorized access",s=0,r){super(e,t,n,s,r),Object.setPrototypeOf(this,at.prototype)}}class ct extends Xe{constructor(e="TenantNotFound",t=1001,n="Tenant not found",s=0,r){super(e,t,n,s,r),Object.setPrototypeOf(this,ct.prototype)}}class dt extends Xe{constructor(e="EmailAlreadyInUse",t=7e3,n="Could not create account as the email is already in use",s=0,r){super(e,t,n,s,r),Object.setPrototypeOf(this,dt.prototype)}}class ut extends Xe{constructor(e="AccountAlreadyLinked",t=7001,n="Could not link account as it is linked to another wallet",s=0,r){super(e,t,n,s,r),Object.setPrototypeOf(this,ut.prototype)}}class lt extends Xe{constructor(e="ProofVerificationFailed",t=7002,n="The authentication proof could not be verified",s=0,r){super(e,t,n,s,r),Object.setPrototypeOf(this,lt.prototype)}}class ht extends Xe{constructor(e="AnswerIncorrect",t=7003,n="The provided answer is incorrect",s=0,r){super(e,t,n,s,r),Object.setPrototypeOf(this,ht.prototype)}}class pt extends Xe{constructor(e="ChallengeExpired",t=7004,n="The challenge has expired",s=0,r){super(e,t,n,s,r),Object.setPrototypeOf(this,pt.prototype)}}class ft extends Xe{constructor(e="TooManyAttempts",t=7005,n="Too many attempts",s=0,r){super(e,t,n,s,r),Object.setPrototypeOf(this,ft.prototype)}}let mt=function(e){return e.WebrpcEndpoint="WebrpcEndpoint",e.WebrpcRequestFailed="WebrpcRequestFailed",e.WebrpcBadRoute="WebrpcBadRoute",e.WebrpcBadMethod="WebrpcBadMethod",e.WebrpcBadRequest="WebrpcBadRequest",e.WebrpcBadResponse="WebrpcBadResponse",e.WebrpcServerPanic="WebrpcServerPanic",e.WebrpcInternalError="WebrpcInternalError",e.WebrpcClientDisconnected="WebrpcClientDisconnected",e.WebrpcStreamLost="WebrpcStreamLost",e.WebrpcStreamFinished="WebrpcStreamFinished",e.Unauthorized="Unauthorized",e.TenantNotFound="TenantNotFound",e.EmailAlreadyInUse="EmailAlreadyInUse",e.AccountAlreadyLinked="AccountAlreadyLinked",e.ProofVerificationFailed="ProofVerificationFailed",e.AnswerIncorrect="AnswerIncorrect",e.ChallengeExpired="ChallengeExpired",e.TooManyAttempts="TooManyAttempts",e}({});const gt={0:Ye,[-1]:Ze,[-2]:Je,[-3]:Qe,[-4]:et,[-5]:tt,[-6]:nt,[-7]:st,[-8]:rt,[-9]:it,[-10]:ot,1e3:at,1001:ct,7e3:dt,7001:ut,7002:lt,7003:ht,7004:pt,7005:ft};function yt(e){return"object"==typeof e&&e.code===g.authInitiated&&"object"==typeof e.data&&"string"==typeof e.data.sessionId&&"string"==typeof e.data.identityType&&"number"==typeof e.data.expiresIn}function wt(e){return"object"==typeof e&&"string"==typeof e.code&&"transactionReceipt"===e.code&&"object"==typeof e.data&&"string"==typeof e.data.txHash&&"object"==typeof e.data.receipt&&"object"==typeof e.data.request}function Et(e){return"object"==typeof e&&"string"==typeof e.code&&"transactionReceipt"===e.code&&"object"==typeof e.data&&"string"==typeof e.data.metaTxHash&&!e.data.txHash&&"object"==typeof e.data.request}function bt(e){return"object"==typeof e&&"string"==typeof e.code&&"transactionFailed"===e.code&&"object"==typeof e.data&&"object"==typeof e.data.request&&Array.isArray(e.data.simulations)&&"string"==typeof e.data.error}function St(e){return wt(e)||bt(e)||Et(e)}function vt(e){return"object"==typeof e&&"string"==typeof e.code&&"signedMessage"===e.code&&"object"==typeof e.data&&"string"==typeof e.data.message&&"string"==typeof e.data.signature}function At(e){return"object"==typeof e&&"string"==typeof e.code&&"sessionAuthProof"===e.code&&"object"==typeof e.data&&"string"==typeof e.data.sessionId&&"string"==typeof e.data.network&&"string"==typeof e.data.wallet&&"string"==typeof e.data.message&&"string"==typeof e.data.signature}function It(e){return"object"==typeof e&&"string"==typeof e.code&&"feeOptions"===e.code&&"object"==typeof e.data&&Array.isArray(e.data.feeOptions)}function Tt(e){return"object"==typeof e&&e.code===g.validationRequired&&"object"==typeof e.data&&"string"==typeof e.data.sessionId}function Ot(e){return"object"==typeof e&&e.code===g.validationFinished&&"object"==typeof e.data}function Rt(e){return"object"==typeof e&&"string"==typeof e.code&&"sessionClosed"===e.code}function kt(e){return"object"==typeof e&&"string"==typeof e.code&&"getSessionResponse"===e.code&&"object"==typeof e.data&&"string"==typeof e.data.session&&"string"==typeof e.data.wallet}function xt(e){return"object"==typeof e&&e.code===g.accountFederated&&"object"==typeof e.data&&"object"==typeof e.data.account}function Pt(e){return"object"==typeof e&&e.code===g.accountList&&"object"==typeof e.data}function Mt(e){var t,n;return!!(e instanceof Xe&&(null!=(t=e.cause)&&t.endsWith("intent is invalid: intent expired")||null!=(n=e.cause)&&n.endsWith("intent is invalid: intent issued in the future")))}function Nt(e){return"object"==typeof e&&e.code===g.idToken&&"object"==typeof e.data&&"string"==typeof e.data.idToken}const Ct=e=>{let t=e.httpHandler;return{setHttpHandler(e){t=e},httpHandler:()=>t,updateHttpClientConfig(e,n){t.updateHttpClientConfig(e,n)},httpHandlerConfigs:()=>t.httpHandlerConfigs()}};var _t,Ut,Lt,$t,Bt;!function(e){e.HEADER="header",e.QUERY="query"}(_t||(_t={})),function(e){e.HEADER="header",e.QUERY="query"}(Ut||(Ut={})),function(e){e.HTTP="http",e.HTTPS="https"}(Lt||(Lt={})),function(e){e.MD5="md5",e.CRC32="crc32",e.CRC32C="crc32c",e.SHA1="sha1",e.SHA256="sha256"}($t||($t={})),function(e){e[e.HEADER=0]="HEADER",e[e.TRAILER=1]="TRAILER"}(Bt||(Bt={}));const Dt="__smithy_context";var Ft,jt;!function(e){e.PROFILE="profile",e.SSO_SESSION="sso-session",e.SERVICES="services"}(Ft||(Ft={})),function(e){e.HTTP_0_9="http/0.9",e.HTTP_1_0="http/1.0",e.TDS_8_0="tds/8.0"}(jt||(jt={}));class qt{constructor(e){this.method=e.method||"GET",this.hostname=e.hostname||"localhost",this.port=e.port,this.query=e.query||{},this.headers=e.headers||{},this.body=e.body,this.protocol=e.protocol?":"!==e.protocol.slice(-1)?`${e.protocol}:`:e.protocol:"https:",this.path=e.path?"/"!==e.path.charAt(0)?`/${e.path}`:e.path:"/",this.username=e.username,this.password=e.password,this.fragment=e.fragment}static clone(e){const t=new qt({...e,headers:{...e.headers}});var n;return t.query&&(t.query=(n=t.query,Object.keys(n).reduce(((e,t)=>{const s=n[t];return{...e,[t]:Array.isArray(s)?[...s]:s}}),{}))),t}static isInstance(e){if(!e)return!1;const t=e;return"method"in t&&"protocol"in t&&"hostname"in t&&"path"in t&&"object"==typeof t.query&&"object"==typeof t.headers}clone(){return qt.clone(this)}}class Ht{constructor(e){this.statusCode=e.statusCode,this.reason=e.reason,this.headers=e.headers||{},this.body=e.body}static isInstance(e){if(!e)return!1;const t=e;return"number"==typeof t.statusCode&&"object"==typeof t.headers}}const Vt={name:"hostHeaderMiddleware",step:"build",priority:"low",tags:["HOST"],override:!0},Wt=e=>({applyToStack:t=>{t.add((e=>t=>async n=>{if(!qt.isInstance(n.request))return t(n);const{request:s}=n,{handlerProtocol:r=""}=e.requestHandler.metadata||{};if(r.indexOf("h2")>=0&&!s.headers[":authority"])delete s.headers.host,s.headers[":authority"]=s.hostname+(s.port?":"+s.port:"");else if(!s.headers.host){let e=s.hostname;null!=s.port&&(e+=`:${s.port}`),s.headers.host=e}return t(n)})(e),Vt)}}),zt={name:"loggerMiddleware",tags:["LOGGER"],step:"initialize",override:!0},Gt="X-Amzn-Trace-Id",Kt={step:"build",tags:["RECURSION_DETECTION"],name:"recursionDetectionMiddleware",override:!0,priority:"low"},Xt=e=>({applyToStack:t=>{t.add((e=>t=>async n=>{const{request:s}=n;if(!qt.isInstance(s)||"node"!==e.runtime||s.headers.hasOwnProperty(Gt))return t(n);const r=process.env.AWS_LAMBDA_FUNCTION_NAME,i=process.env._X_AMZN_TRACE_ID,o=e=>"string"==typeof e&&e.length>0;return o(r)&&o(i)&&(s.headers[Gt]=i),t({...n,request:s})})(e),Kt)}}),Yt=e=>e[Dt]||(e[Dt]={}),Zt=e=>{if("function"==typeof e)return e;const t=Promise.resolve(e);return()=>t};const Jt=(e,t)=>(n,s)=>async r=>{const i=e.httpAuthSchemeProvider(await t.httpAuthSchemeParametersProvider(e,s,r.input)),o=function(e){const t=new Map;for(const n of e)t.set(n.schemeId,n);return t}(e.httpAuthSchemes),a=Yt(s),c=[];for(const n of i){const r=o.get(n.schemeId);if(!r){c.push(`HttpAuthScheme \`${n.schemeId}\` was not enabled for this service.`);continue}const i=r.identityProvider(await t.identityProviderConfigProvider(e));if(!i){c.push(`HttpAuthScheme \`${n.schemeId}\` did not have an IdentityProvider configured.`);continue}const{identityProperties:d={},signingProperties:u={}}=n.propertiesExtractor?.(e,s)||{};n.identityProperties=Object.assign(n.identityProperties||{},d),n.signingProperties=Object.assign(n.signingProperties||{},u),a.selectedHttpAuthScheme={httpAuthOption:n,identity:await i(n.identityProperties),signer:r.signer};break}if(!a.selectedHttpAuthScheme)throw new Error(c.join("\n"));return n(r)},Qt={step:"serialize",tags:["HTTP_AUTH_SCHEME"],name:"httpAuthSchemeMiddleware",override:!0,relation:"before",toMiddleware:"endpointV2Middleware"},en={name:"deserializerMiddleware",step:"deserialize",tags:["DESERIALIZER"],override:!0},tn={name:"serializerMiddleware",step:"serialize",tags:["SERIALIZER"],override:!0};function nn(e,t,n){return{applyToStack:s=>{s.add(((e,t)=>n=>async s=>{const{response:r}=await n(s);try{return{response:r,output:await t(r,e)}}catch(e){if(Object.defineProperty(e,"$response",{value:r}),!("$metadata"in e)){const t="Deserialization error: to see the raw response, inspect the hidden field {error}.$response on this object.";e.message+="\n  "+t,void 0!==e.$responseBodyText&&e.$response&&(e.$response.body=e.$responseBodyText)}throw e}})(e,n),en),s.add(((e,t)=>(n,s)=>async r=>{const i=s.endpointV2?.url&&e.urlParser?async()=>e.urlParser(s.endpointV2.url):e.endpoint;if(!i)throw new Error("No valid endpoint provider available.");const o=await t(r.input,{...e,endpoint:i});return n({...r,request:o})})(e,t),tn)}}}const sn=e=>e=>{throw e},rn=(e,t)=>{},on={step:"finalizeRequest",tags:["HTTP_SIGNING"],name:"httpSigningMiddleware",aliases:["apiKeyMiddleware","tokenMiddleware","awsAuthMiddleware"],override:!0,relation:"after",toMiddleware:"retryMiddleware"},an=e=>({applyToStack:e=>{e.addRelativeTo(((e,t)=>async n=>{if(!qt.isInstance(n.request))return e(n);const s=Yt(t).selectedHttpAuthScheme;if(!s)throw new Error("No HttpAuthScheme was selected: unable to sign request");const{httpAuthOption:{signingProperties:r={}},identity:i,signer:o}=s,a=await e({...n,request:await o.sign(n.request,i,r)}).catch((o.errorHandler||sn)(r));return(o.successHandler||rn)(a.response,r),a}),on)}}),cn=e=>{if("function"==typeof e)return e;const t=Promise.resolve(e);return()=>t},dn={},un=new Array(64);for(let e=0,t="A".charCodeAt(0),n="Z".charCodeAt(0);e+t<=n;e++){const n=String.fromCharCode(e+t);dn[n]=e,un[e]=n}for(let e=0,t="a".charCodeAt(0),n="z".charCodeAt(0);e+t<=n;e++){const n=String.fromCharCode(e+t),s=e+26;dn[n]=s,un[s]=n}for(let e=0;e<10;e++){dn[e.toString(10)]=e+52;const t=e.toString(10),n=e+52;dn[t]=n,un[n]=t}dn["+"]=62,un[62]="+",dn["/"]=63,un[63]="/";const ln=e=>{let t=e.length/4*3;"=="===e.slice(-2)?t-=2:"="===e.slice(-1)&&t--;const n=new ArrayBuffer(t),s=new DataView(n);for(let t=0;t<e.length;t+=4){let n=0,r=0;for(let s=t,i=t+3;s<=i;s++)if("="!==e[s]){if(!(e[s]in dn))throw new TypeError(`Invalid character ${e[s]} in base64 string.`);n|=dn[e[s]]<<6*(i-s),r+=6}else n>>=6;const i=t/4*3;n>>=r%8;const o=Math.floor(r/8);for(let e=0;e<o;e++){const t=8*(o-e-1);s.setUint8(i+e,(n&255<<t)>>t)}}return new Uint8Array(n)},hn=e=>(new TextEncoder).encode(e),pn=e=>"string"==typeof e?hn(e):ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(e),fn=e=>{if("string"==typeof e)return e;if("object"!=typeof e||"number"!=typeof e.byteOffset||"number"!=typeof e.byteLength)throw new Error("@smithy/util-utf8: toUtf8 encoder function only accepts string | Uint8Array.");return new TextDecoder("utf-8").decode(e)};function mn(e){let t;t="string"==typeof e?hn(e):e;const n="object"==typeof t&&"number"==typeof t.length,s="object"==typeof t&&"number"==typeof t.byteOffset&&"number"==typeof t.byteLength;if(!n&&!s)throw new Error("@smithy/util-base64: toBase64 encoder function only accepts string | Uint8Array.");let r="";for(let e=0;e<t.length;e+=3){let n=0,s=0;for(let r=e,i=Math.min(e+3,t.length);r<i;r++)n|=t[r]<<8*(i-r-1),s+=8;const i=Math.ceil(s/6);n<<=6*i-s;for(let e=1;e<=i;e++){const t=6*(i-e);r+=un[(n&63<<t)>>t]}r+="==".slice(0,4-i)}return r}class gn extends Uint8Array{static fromString(e,t="utf-8"){if("string"==typeof e)return function(e,t){return"base64"===t?gn.mutate(ln(e)):gn.mutate(hn(e))}(e,t);throw new Error(`Unsupported conversion from ${typeof e} to Uint8ArrayBlobAdapter.`)}static mutate(e){return Object.setPrototypeOf(e,gn.prototype),e}transformToString(e="utf-8"){return function(e,t="utf-8"){return"base64"===t?mn(e):fn(e)}(this,e)}}const yn=e=>encodeURIComponent(e).replace(/[!'()*]/g,wn),wn=e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`;const En={},bn={};for(let e=0;e<256;e++){let t=e.toString(16).toLowerCase();1===t.length&&(t=`0${t}`),En[e]=t,bn[t]=e}function Sn(e){let t="";for(let n=0;n<e.byteLength;n++)t+=En[e[n]];return t}class vn{constructor(e){this.authSchemes=new Map;for(const[t,n]of Object.entries(e))void 0!==n&&this.authSchemes.set(t,n)}getIdentityProvider(e){return this.authSchemes.get(e)}}class An{async sign(e,t,n){return e}}const In=(Tn=3e5,e=>On(e)&&e.expiration.getTime()-Date.now()<Tn);var Tn;const On=e=>void 0!==e.expiration;const Rn=new RegExp("^(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}$"),kn=e=>Rn.test(e)||e.startsWith("[")&&e.endsWith("]"),xn=new RegExp("^(?!.*-$)(?!-)[a-zA-Z0-9-]{1,63}$"),Pn=(e,t=!1)=>{if(!t)return xn.test(e);const n=e.split(".");for(const e of n)if(!Pn(e))return!1;return!0},Mn={},Nn="endpoints";function Cn(e){return"object"!=typeof e||null==e?e:"ref"in e?`$${Cn(e.ref)}`:"fn"in e?`${e.fn}(${(e.argv||[]).map(Cn).join(", ")})`:JSON.stringify(e,null,2)}class _n extends Error{constructor(e){super(e),this.name="EndpointError"}}const Un=(e,t)=>(e=>{const t=e.split("."),n=[];for(const s of t){const t=s.indexOf("[");if(-1!==t){if(s.indexOf("]")!==s.length-1)throw new _n(`Path: '${e}' does not end with ']'`);const r=s.slice(t+1,-1);if(Number.isNaN(parseInt(r)))throw new _n(`Invalid array index: '${r}' in path: '${e}'`);0!==t&&n.push(s.slice(0,t)),n.push(r)}else n.push(s)}return n})(t).reduce(((n,s)=>{if("object"!=typeof n)throw new _n(`Index '${s}' in '${t}' not found in '${JSON.stringify(e)}'`);return Array.isArray(n)?n[parseInt(s)]:n[s]}),e),Ln={[Lt.HTTP]:80,[Lt.HTTPS]:443},$n={booleanEquals:(e,t)=>e===t,getAttr:Un,isSet:e=>null!=e,isValidHostLabel:Pn,not:e=>!e,parseURL:e=>{const t=(()=>{try{if(e instanceof URL)return e;if("object"==typeof e&&"hostname"in e){const{hostname:t,port:n,protocol:s="",path:r="",query:i={}}=e,o=new URL(`${s}//${t}${n?`:${n}`:""}${r}`);return o.search=Object.entries(i).map((([e,t])=>`${e}=${t}`)).join("&"),o}return new URL(e)}catch(e){return null}})();if(!t)return console.error(`Unable to parse ${JSON.stringify(e)} as a whatwg URL.`),null;const n=t.href,{host:s,hostname:r,pathname:i,protocol:o,search:a}=t;if(a)return null;const c=o.slice(0,-1);if(!Object.values(Lt).includes(c))return null;const d=kn(r);return{scheme:c,authority:`${s}${n.includes(`${s}:${Ln[c]}`)||"string"==typeof e&&e.includes(`${s}:${Ln[c]}`)?`:${Ln[c]}`:""}`,path:i,normalizedPath:i.endsWith("/")?i:`${i}/`,isIp:d}},stringEquals:(e,t)=>e===t,substring:(e,t,n,s)=>t>=n||e.length<n?null:s?e.substring(e.length-n,e.length-t):e.substring(t,n),uriEncode:e=>encodeURIComponent(e).replace(/[!*'()]/g,(e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`))},Bn=(e,t)=>{const n=[],s={...t.endpointParams,...t.referenceRecord};let r=0;for(;r<e.length;){const t=e.indexOf("{",r);if(-1===t){n.push(e.slice(r));break}n.push(e.slice(r,t));const i=e.indexOf("}",t);if(-1===i){n.push(e.slice(t));break}"{"===e[t+1]&&"}"===e[i+1]&&(n.push(e.slice(t+1,i)),r=i+2);const o=e.substring(t+1,i);if(o.includes("#")){const[e,t]=o.split("#");n.push(Un(s[e],t))}else n.push(s[o]);r=i+1}return n.join("")},Dn=(e,t,n)=>{if("string"==typeof e)return Bn(e,n);if(e.fn)return Fn(e,n);if(e.ref)return(({ref:e},t)=>({...t.endpointParams,...t.referenceRecord}[e]))(e,n);throw new _n(`'${t}': ${String(e)} is not a string, function or reference.`)},Fn=({fn:e,argv:t},n)=>{const s=t.map((e=>["boolean","number"].includes(typeof e)?e:Dn(e,"arg",n))),r=e.split(".");return r[0]in Mn&&null!=r[1]?Mn[r[0]][r[1]](...s):$n[e](...s)},jn=({assign:e,...t},n)=>{if(e&&e in n.referenceRecord)throw new _n(`'${e}' is already defined in Reference Record.`);const s=Fn(t,n);return n.logger?.debug?.(`${Nn} evaluateCondition: ${Cn(t)} = ${Cn(s)}`),{result:""===s||!!s,...null!=e&&{toAssign:{name:e,value:s}}}},qn=(e=[],t)=>{const n={};for(const s of e){const{result:e,toAssign:r}=jn(s,{...t,referenceRecord:{...t.referenceRecord,...n}});if(!e)return{result:e};r&&(n[r.name]=r.value,t.logger?.debug?.(`${Nn} assign: ${r.name} := ${Cn(r.value)}`))}return{result:!0,referenceRecord:n}},Hn=(e,t)=>Object.entries(e).reduce(((e,[n,s])=>({...e,[n]:s.map((e=>{const s=Dn(e,"Header value entry",t);if("string"!=typeof s)throw new _n(`Header '${n}' value '${s}' is not a string`);return s}))})),{}),Vn=(e,t)=>{if(Array.isArray(e))return e.map((e=>Vn(e,t)));switch(typeof e){case"string":return Bn(e,t);case"object":if(null===e)throw new _n(`Unexpected endpoint property: ${e}`);return Wn(e,t);case"boolean":return e;default:throw new _n("Unexpected endpoint property type: "+typeof e)}},Wn=(e,t)=>Object.entries(e).reduce(((e,[n,s])=>({...e,[n]:Vn(s,t)})),{}),zn=(e,t)=>{const n=Dn(e,"Endpoint URL",t);if("string"==typeof n)try{return new URL(n)}catch(e){throw console.error(`Failed to construct URL with ${n}`,e),e}throw new _n("Endpoint URL must be a string, got "+typeof n)},Gn=(e,t)=>{const{conditions:n,endpoint:s}=e,{result:r,referenceRecord:i}=qn(n,t);if(!r)return;const o={...t,referenceRecord:{...t.referenceRecord,...i}},{url:a,properties:c,headers:d}=s;return t.logger?.debug?.(`${Nn} Resolving endpoint from template: ${Cn(s)}`),{...null!=d&&{headers:Hn(d,o)},...null!=c&&{properties:Wn(c,o)},url:zn(a,o)}},Kn=(e,t)=>{const{conditions:n,error:s}=e,{result:r,referenceRecord:i}=qn(n,t);if(r)throw new _n(Dn(s,"Error",{...t,referenceRecord:{...t.referenceRecord,...i}}))},Xn=(e,t)=>{const{conditions:n,rules:s}=e,{result:r,referenceRecord:i}=qn(n,t);if(r)return Yn(s,{...t,referenceRecord:{...t.referenceRecord,...i}})},Yn=(e,t)=>{for(const n of e)if("endpoint"===n.type){const e=Gn(n,t);if(e)return e}else if("error"===n.type)Kn(n,t);else{if("tree"!==n.type)throw new _n(`Unknown endpoint rule: ${n}`);{const e=Xn(n,t);if(e)return e}}throw new _n("Rules evaluation failed")},Zn=(e,t=!1)=>{if(t){for(const t of e.split("."))if(!Zn(t))return!1;return!0}return!!Pn(e)&&(!(e.length<3||e.length>63)&&(e===e.toLowerCase()&&!kn(e)))};let Jn={partitions:[{id:"aws",outputs:{dnsSuffix:"amazonaws.com",dualStackDnsSuffix:"api.aws",implicitGlobalRegion:"us-east-1",name:"aws",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^(us|eu|ap|sa|ca|me|af|il|mx)\\-\\w+\\-\\d+$",regions:{"af-south-1":{description:"Africa (Cape Town)"},"ap-east-1":{description:"Asia Pacific (Hong Kong)"},"ap-northeast-1":{description:"Asia Pacific (Tokyo)"},"ap-northeast-2":{description:"Asia Pacific (Seoul)"},"ap-northeast-3":{description:"Asia Pacific (Osaka)"},"ap-south-1":{description:"Asia Pacific (Mumbai)"},"ap-south-2":{description:"Asia Pacific (Hyderabad)"},"ap-southeast-1":{description:"Asia Pacific (Singapore)"},"ap-southeast-2":{description:"Asia Pacific (Sydney)"},"ap-southeast-3":{description:"Asia Pacific (Jakarta)"},"ap-southeast-4":{description:"Asia Pacific (Melbourne)"},"ap-southeast-5":{description:"Asia Pacific (Malaysia)"},"aws-global":{description:"AWS Standard global region"},"ca-central-1":{description:"Canada (Central)"},"ca-west-1":{description:"Canada West (Calgary)"},"eu-central-1":{description:"Europe (Frankfurt)"},"eu-central-2":{description:"Europe (Zurich)"},"eu-north-1":{description:"Europe (Stockholm)"},"eu-south-1":{description:"Europe (Milan)"},"eu-south-2":{description:"Europe (Spain)"},"eu-west-1":{description:"Europe (Ireland)"},"eu-west-2":{description:"Europe (London)"},"eu-west-3":{description:"Europe (Paris)"},"il-central-1":{description:"Israel (Tel Aviv)"},"me-central-1":{description:"Middle East (UAE)"},"me-south-1":{description:"Middle East (Bahrain)"},"sa-east-1":{description:"South America (Sao Paulo)"},"us-east-1":{description:"US East (N. Virginia)"},"us-east-2":{description:"US East (Ohio)"},"us-west-1":{description:"US West (N. California)"},"us-west-2":{description:"US West (Oregon)"}}},{id:"aws-cn",outputs:{dnsSuffix:"amazonaws.com.cn",dualStackDnsSuffix:"api.amazonwebservices.com.cn",implicitGlobalRegion:"cn-northwest-1",name:"aws-cn",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^cn\\-\\w+\\-\\d+$",regions:{"aws-cn-global":{description:"AWS China global region"},"cn-north-1":{description:"China (Beijing)"},"cn-northwest-1":{description:"China (Ningxia)"}}},{id:"aws-us-gov",outputs:{dnsSuffix:"amazonaws.com",dualStackDnsSuffix:"api.aws",implicitGlobalRegion:"us-gov-west-1",name:"aws-us-gov",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^us\\-gov\\-\\w+\\-\\d+$",regions:{"aws-us-gov-global":{description:"AWS GovCloud (US) global region"},"us-gov-east-1":{description:"AWS GovCloud (US-East)"},"us-gov-west-1":{description:"AWS GovCloud (US-West)"}}},{id:"aws-iso",outputs:{dnsSuffix:"c2s.ic.gov",dualStackDnsSuffix:"c2s.ic.gov",implicitGlobalRegion:"us-iso-east-1",name:"aws-iso",supportsDualStack:!1,supportsFIPS:!0},regionRegex:"^us\\-iso\\-\\w+\\-\\d+$",regions:{"aws-iso-global":{description:"AWS ISO (US) global region"},"us-iso-east-1":{description:"US ISO East"},"us-iso-west-1":{description:"US ISO WEST"}}},{id:"aws-iso-b",outputs:{dnsSuffix:"sc2s.sgov.gov",dualStackDnsSuffix:"sc2s.sgov.gov",implicitGlobalRegion:"us-isob-east-1",name:"aws-iso-b",supportsDualStack:!1,supportsFIPS:!0},regionRegex:"^us\\-isob\\-\\w+\\-\\d+$",regions:{"aws-iso-b-global":{description:"AWS ISOB (US) global region"},"us-isob-east-1":{description:"US ISOB East (Ohio)"}}},{id:"aws-iso-e",outputs:{dnsSuffix:"cloud.adc-e.uk",dualStackDnsSuffix:"cloud.adc-e.uk",implicitGlobalRegion:"eu-isoe-west-1",name:"aws-iso-e",supportsDualStack:!1,supportsFIPS:!0},regionRegex:"^eu\\-isoe\\-\\w+\\-\\d+$",regions:{"eu-isoe-west-1":{description:"EU ISOE West"}}},{id:"aws-iso-f",outputs:{dnsSuffix:"csp.hci.ic.gov",dualStackDnsSuffix:"csp.hci.ic.gov",implicitGlobalRegion:"us-isof-south-1",name:"aws-iso-f",supportsDualStack:!1,supportsFIPS:!0},regionRegex:"^us\\-isof\\-\\w+\\-\\d+$",regions:{}}],version:"1.1"};const Qn={isVirtualHostableS3Bucket:Zn,parseArn:e=>{const t=e.split(":");if(t.length<6)return null;const[n,s,r,i,o,...a]=t;if("arn"!==n||""===s||""===r||""===a.join(":"))return null;return{partition:s,service:r,region:i,accountId:o,resourceId:a.map((e=>e.split("/"))).flat()}},partition:e=>{const{partitions:t}=Jn;for(const n of t){const{regions:t,outputs:s}=n;for(const[n,r]of Object.entries(t))if(n===e)return{...s,...r}}for(const n of t){const{regionRegex:t,outputs:s}=n;if(new RegExp(t).test(e))return{...s}}const n=t.find((e=>"aws"===e.id));if(!n)throw new Error("Provided region was not found in the partition array or regex, and default partition with id 'aws' doesn't exist.");return{...n.outputs}}};function es(e,t,n){e.__aws_sdk_context?e.__aws_sdk_context.features||(e.__aws_sdk_context.features={}):e.__aws_sdk_context={features:{}},e.__aws_sdk_context.features[t]=n}Mn.aws=Qn;const ts=e=>Ht.isInstance(e)?e.headers?.date??e.headers?.Date:void 0,ns=e=>new Date(Date.now()+e),ss=(e,t)=>{const n=Date.parse(e);return((e,t)=>Math.abs(ns(t).getTime()-e)>=3e5)(n,t)?n-Date.now():t},rs=(e,t)=>{if(!t)throw new Error(`Property \`${e}\` is not resolved for AWS SDK SigV4Auth`);return t};class is{async sign(e,t,n){if(!qt.isInstance(e))throw new Error("The request is not an instance of `HttpRequest` and cannot be signed");const s=await(async e=>{const t=rs("context",e.context),n=rs("config",e.config),s=t.endpointV2?.properties?.authSchemes?.[0],r=rs("signer",n.signer),i=await r(s),o=e?.signingRegion,a=e?.signingRegionSet,c=e?.signingName;return{config:n,signer:i,signingRegion:o,signingRegionSet:a,signingName:c}})(n),{config:r,signer:i}=s;let{signingRegion:o,signingName:a}=s;const c=n.context;if(c?.authSchemes?.length){const[e,t]=c.authSchemes;"sigv4a"===e?.name&&"sigv4"===t?.name&&(o=t?.signingRegion??o,a=t?.signingName??a)}return await i.sign(e,{signingDate:ns(r.systemClockOffset),signingRegion:o,signingService:a})}errorHandler(e){return t=>{const n=t.ServerTime??ts(t.$response);if(n){const s=rs("config",e.config),r=s.systemClockOffset;s.systemClockOffset=ss(n,s.systemClockOffset);s.systemClockOffset!==r&&t.$metadata&&(t.$metadata.clockSkewCorrected=!0)}throw t}}successHandler(e,t){const n=ts(e);if(n){const e=rs("config",t.config);e.systemClockOffset=ss(n,e.systemClockOffset)}}}const os="X-Amz-Date",as="X-Amz-Signature",cs="X-Amz-Security-Token",ds="authorization",us=os.toLowerCase(),ls=[ds,us,"date"],hs=as.toLowerCase(),ps="x-amz-content-sha256",fs=cs.toLowerCase(),ms={authorization:!0,"cache-control":!0,connection:!0,expect:!0,from:!0,"keep-alive":!0,"max-forwards":!0,pragma:!0,referer:!0,te:!0,trailer:!0,"transfer-encoding":!0,upgrade:!0,"user-agent":!0,"x-amzn-trace-id":!0},gs=/^proxy-/,ys=/^sec-/,ws="AWS4-HMAC-SHA256",Es="AWS4-HMAC-SHA256-PAYLOAD",bs="aws4_request",Ss={},vs=[],As=(e,t,n)=>`${e}/${t}/${n}/${bs}`,Is=(e,t,n)=>{const s=new e(t);return s.update(pn(n)),s.digest()},Ts=({headers:e},t,n)=>{const s={};for(const r of Object.keys(e).sort()){if(null==e[r])continue;const i=r.toLowerCase();(i in ms||t?.has(i)||gs.test(i)||ys.test(i))&&(!n||n&&!n.has(i))||(s[i]=e[r].trim().replace(/\s+/g," "))}return s},Os=async({headers:e,body:t},n)=>{for(const t of Object.keys(e))if(t.toLowerCase()===ps)return e[t];if(null==t)return"e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855";if("string"==typeof t||ArrayBuffer.isView(t)||(s=t,"function"==typeof ArrayBuffer&&s instanceof ArrayBuffer||"[object ArrayBuffer]"===Object.prototype.toString.call(s))){const e=new n;return e.update(pn(t)),Sn(await e.digest())}var s;return"UNSIGNED-PAYLOAD"};class Rs{format(e){const t=[];for(const n of Object.keys(e)){const s=hn(n);t.push(Uint8Array.from([s.byteLength]),s,this.formatHeaderValue(e[n]))}const n=new Uint8Array(t.reduce(((e,t)=>e+t.byteLength),0));let s=0;for(const e of t)n.set(e,s),s+=e.byteLength;return n}formatHeaderValue(e){switch(e.type){case"boolean":return Uint8Array.from([e.value?0:1]);case"byte":return Uint8Array.from([2,e.value]);case"short":const t=new DataView(new ArrayBuffer(3));return t.setUint8(0,3),t.setInt16(1,e.value,!1),new Uint8Array(t.buffer);case"integer":const n=new DataView(new ArrayBuffer(5));return n.setUint8(0,4),n.setInt32(1,e.value,!1),new Uint8Array(n.buffer);case"long":const s=new Uint8Array(9);return s[0]=5,s.set(e.value.bytes,1),s;case"binary":const r=new DataView(new ArrayBuffer(3+e.value.byteLength));r.setUint8(0,6),r.setUint16(1,e.value.byteLength,!1);const i=new Uint8Array(r.buffer);return i.set(e.value,3),i;case"string":const o=hn(e.value),a=new DataView(new ArrayBuffer(3+o.byteLength));a.setUint8(0,7),a.setUint16(1,o.byteLength,!1);const c=new Uint8Array(a.buffer);return c.set(o,3),c;case"timestamp":const d=new Uint8Array(9);return d[0]=8,d.set(Ps.fromNumber(e.value.valueOf()).bytes,1),d;case"uuid":if(!xs.test(e.value))throw new Error(`Invalid UUID received: ${e.value}`);const u=new Uint8Array(17);return u[0]=9,u.set(function(e){if(e.length%2!=0)throw new Error("Hex encoded strings must have an even number length");const t=new Uint8Array(e.length/2);for(let n=0;n<e.length;n+=2){const s=e.slice(n,n+2).toLowerCase();if(!(s in bn))throw new Error(`Cannot decode unrecognized sequence ${s} as hexadecimal`);t[n/2]=bn[s]}return t}(e.value.replace(/\-/g,"")),1),u}}}var ks;!function(e){e[e.boolTrue=0]="boolTrue",e[e.boolFalse=1]="boolFalse",e[e.byte=2]="byte",e[e.short=3]="short",e[e.integer=4]="integer",e[e.long=5]="long",e[e.byteArray=6]="byteArray",e[e.string=7]="string",e[e.timestamp=8]="timestamp",e[e.uuid=9]="uuid"}(ks||(ks={}));const xs=/^[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12}$/;class Ps{constructor(e){if(this.bytes=e,8!==e.byteLength)throw new Error("Int64 buffers must be exactly 8 bytes")}static fromNumber(e){if(e>0x8000000000000000||e<-0x8000000000000000)throw new Error(`${e} is too large (or, if negative, too small) to represent as an Int64`);const t=new Uint8Array(8);for(let n=7,s=Math.abs(Math.round(e));n>-1&&s>0;n--,s/=256)t[n]=s;return e<0&&Ms(t),new Ps(t)}valueOf(){const e=this.bytes.slice(0),t=128&e[0];return t&&Ms(e),parseInt(Sn(e),16)*(t?-1:1)}toString(){return String(this.valueOf())}}function Ms(e){for(let t=0;t<8;t++)e[t]^=255;for(let t=7;t>-1&&(e[t]++,0===e[t]);t--);}const Ns=e=>{e=qt.clone(e);for(const t of Object.keys(e.headers))ls.indexOf(t.toLowerCase())>-1&&delete e.headers[t];return e},Cs=e=>"number"==typeof e?new Date(1e3*e):"string"==typeof e?Number(e)?new Date(1e3*Number(e)):new Date(e):e;class _s{constructor({applyChecksum:e,credentials:t,region:n,service:s,sha256:r,uriEscapePath:i=!0}){this.headerFormatter=new Rs,this.service=s,this.sha256=r,this.uriEscapePath=i,this.applyChecksum="boolean"!=typeof e||e,this.regionProvider=Zt(n),this.credentialProvider=Zt(t)}async presign(e,t={}){const{signingDate:n=new Date,expiresIn:s=3600,unsignableHeaders:r,unhoistableHeaders:i,signableHeaders:o,hoistableHeaders:a,signingRegion:c,signingService:d}=t,u=await this.credentialProvider();this.validateResolvedCredentials(u);const l=c??await this.regionProvider(),{longDate:h,shortDate:p}=Us(n);if(s>604800)return Promise.reject("Signature version 4 presigned URLs must have an expiration date less than one week in the future");const f=As(p,l,d??this.service),m=((e,t={})=>{const{headers:n,query:s={}}=qt.clone(e);for(const e of Object.keys(n)){const r=e.toLowerCase();("x-amz-"===r.slice(0,6)&&!t.unhoistableHeaders?.has(r)||t.hoistableHeaders?.has(r))&&(s[e]=n[e],delete n[e])}return{...e,headers:n,query:s}})(Ns(e),{unhoistableHeaders:i,hoistableHeaders:a});u.sessionToken&&(m.query[cs]=u.sessionToken),m.query["X-Amz-Algorithm"]=ws,m.query["X-Amz-Credential"]=`${u.accessKeyId}/${f}`,m.query[os]=h,m.query["X-Amz-Expires"]=s.toString(10);const g=Ts(m,r,o);return m.query["X-Amz-SignedHeaders"]=Ls(g),m.query[as]=await this.getSignature(h,f,this.getSigningKey(u,l,p,d),this.createCanonicalRequest(m,g,await Os(e,this.sha256))),m}async sign(e,t){return"string"==typeof e?this.signString(e,t):e.headers&&e.payload?this.signEvent(e,t):e.message?this.signMessage(e,t):this.signRequest(e,t)}async signEvent({headers:e,payload:t},{signingDate:n=new Date,priorSignature:s,signingRegion:r,signingService:i}){const o=r??await this.regionProvider(),{shortDate:a,longDate:c}=Us(n),d=As(a,o,i??this.service),u=await Os({headers:{},body:t},this.sha256),l=new this.sha256;l.update(e);const h=Sn(await l.digest()),p=[Es,c,d,s,h,u].join("\n");return this.signString(p,{signingDate:n,signingRegion:o,signingService:i})}async signMessage(e,{signingDate:t=new Date,signingRegion:n,signingService:s}){return this.signEvent({headers:this.headerFormatter.format(e.message.headers),payload:e.message.body},{signingDate:t,signingRegion:n,signingService:s,priorSignature:e.priorSignature}).then((t=>({message:e.message,signature:t})))}async signString(e,{signingDate:t=new Date,signingRegion:n,signingService:s}={}){const r=await this.credentialProvider();this.validateResolvedCredentials(r);const i=n??await this.regionProvider(),{shortDate:o}=Us(t),a=new this.sha256(await this.getSigningKey(r,i,o,s));return a.update(pn(e)),Sn(await a.digest())}async signRequest(e,{signingDate:t=new Date,signableHeaders:n,unsignableHeaders:s,signingRegion:r,signingService:i}={}){const o=await this.credentialProvider();this.validateResolvedCredentials(o);const a=r??await this.regionProvider(),c=Ns(e),{longDate:d,shortDate:u}=Us(t),l=As(u,a,i??this.service);c.headers[us]=d,o.sessionToken&&(c.headers[fs]=o.sessionToken);const h=await Os(c,this.sha256);!((e,t)=>{e=e.toLowerCase();for(const n of Object.keys(t))if(e===n.toLowerCase())return!0;return!1})(ps,c.headers)&&this.applyChecksum&&(c.headers[ps]=h);const p=Ts(c,s,n),f=await this.getSignature(d,l,this.getSigningKey(o,a,u,i),this.createCanonicalRequest(c,p,h));return c.headers[ds]=`${ws} Credential=${o.accessKeyId}/${l}, SignedHeaders=${Ls(p)}, Signature=${f}`,c}createCanonicalRequest(e,t,n){const s=Object.keys(t).sort();return`${e.method}\n${this.getCanonicalPath(e)}\n${(({query:e={}})=>{const t=[],n={};for(const s of Object.keys(e)){if(s.toLowerCase()===hs)continue;const r=yn(s);t.push(r);const i=e[s];"string"==typeof i?n[r]=`${r}=${yn(i)}`:Array.isArray(i)&&(n[r]=i.slice(0).reduce(((e,t)=>e.concat([`${r}=${yn(t)}`])),[]).sort().join("&"))}return t.sort().map((e=>n[e])).filter((e=>e)).join("&")})(e)}\n${s.map((e=>`${e}:${t[e]}`)).join("\n")}\n\n${s.join(";")}\n${n}`}async createStringToSign(e,t,n){const s=new this.sha256;s.update(pn(n));const r=await s.digest();return`${ws}\n${e}\n${t}\n${Sn(r)}`}getCanonicalPath({path:e}){if(this.uriEscapePath){const t=[];for(const n of e.split("/"))0!==n?.length&&"."!==n&&(".."===n?t.pop():t.push(n));const n=`${e?.startsWith("/")?"/":""}${t.join("/")}${t.length>0&&e?.endsWith("/")?"/":""}`;return yn(n).replace(/%2F/g,"/")}return e}async getSignature(e,t,n,s){const r=await this.createStringToSign(e,t,s),i=new this.sha256(await n);return i.update(pn(r)),Sn(await i.digest())}getSigningKey(e,t,n,s){return(async(e,t,n,s,r)=>{const i=`${n}:${s}:${r}:${Sn(await Is(e,t.secretAccessKey,t.accessKeyId))}:${t.sessionToken}`;if(i in Ss)return Ss[i];for(vs.push(i);vs.length>50;)delete Ss[vs.shift()];let o=`AWS4${t.secretAccessKey}`;for(const t of[n,s,r,bs])o=await Is(e,o,t);return Ss[i]=o})(this.sha256,e,n,t,s||this.service)}validateResolvedCredentials(e){if("object"!=typeof e||"string"!=typeof e.accessKeyId||"string"!=typeof e.secretAccessKey)throw new Error("Resolved credential object is not valid")}}const Us=e=>{const t=(n=e,Cs(n).toISOString().replace(/\.\d{3}Z$/,"Z")).replace(/[\-:]/g,"");var n;return{longDate:t,shortDate:t.slice(0,8)}},Ls=e=>Object.keys(e).sort().join(";"),$s=e=>{let t,n=!1;e.credentials&&(n=!0,t=((e,t,n)=>{if(void 0===e)return;const s="function"!=typeof e?async()=>Promise.resolve(e):e;let r,i,o,a=!1;const c=async e=>{i||(i=s(e));try{r=await i,o=!0,a=!1}finally{i=void 0}return r};return void 0===t?async e=>(o&&!e?.forceRefresh||(r=await c(e)),r):async e=>(o&&!e?.forceRefresh||(r=await c(e)),a?r:n(r)?t(r)?(await c(e),r):r:(a=!0,r))})(e.credentials,In,On)),t||(t=e.credentialDefaultProvider?cn(e.credentialDefaultProvider(Object.assign({},e,{parentClientConfig:e}))):async()=>{throw new Error("`credentials` is missing")});const{signingEscapePath:s=!0,systemClockOffset:r=e.systemClockOffset||0,sha256:i}=e;let o;return o=e.signer?cn(e.signer):e.regionInfoProvider?()=>cn(e.region)().then((async t=>[await e.regionInfoProvider(t,{useFipsEndpoint:await e.useFipsEndpoint(),useDualstackEndpoint:await e.useDualstackEndpoint()})||{},t])).then((([n,r])=>{const{signingRegion:o,signingService:a}=n;e.signingRegion=e.signingRegion||o||r,e.signingName=e.signingName||a||e.serviceId;const c={...e,credentials:t,region:e.signingRegion,service:e.signingName,sha256:i,uriEscapePath:s};return new(e.signerConstructor||_s)(c)})):async n=>{const r=(n=Object.assign({},{name:"sigv4",signingName:e.signingName||e.defaultSigningName,signingRegion:await cn(e.region)(),properties:{}},n)).signingRegion,o=n.signingName;e.signingRegion=e.signingRegion||r,e.signingName=e.signingName||o||e.serviceId;const a={...e,credentials:t,region:e.signingRegion,service:e.signingName,sha256:i,uriEscapePath:s};return new(e.signerConstructor||_s)(a)},{...e,systemClockOffset:r,signingEscapePath:s,credentials:n?async()=>t().then((e=>{return n="CREDENTIALS_CODE",s="e",(t=e).$source||(t.$source={}),t.$source[n]=s,t;var t,n,s})):t,signer:o}},Bs=(e,t)=>{const n=[];if(e&&n.push(e),t)for(const e of t)n.push(e);return n},Ds=(e,t)=>`${e||"anonymous"}${t&&t.length>0?` (a.k.a. ${t.join(",")})`:""}`,Fs=()=>{let e=[],t=[],n=!1;const s=new Set,r=n=>(e.forEach((e=>{n.add(e.middleware,{...e})})),t.forEach((e=>{n.addRelativeTo(e.middleware,{...e})})),n.identifyOnResolve?.(a.identifyOnResolve()),n),i=e=>{const t=[];return e.before.forEach((e=>{0===e.before.length&&0===e.after.length?t.push(e):t.push(...i(e))})),t.push(e),e.after.reverse().forEach((e=>{0===e.before.length&&0===e.after.length?t.push(e):t.push(...i(e))})),t},o=(n=!1)=>{const s=[],r=[],o={};e.forEach((e=>{const t={...e,before:[],after:[]};for(const e of Bs(t.name,t.aliases))o[e]=t;s.push(t)})),t.forEach((e=>{const t={...e,before:[],after:[]};for(const e of Bs(t.name,t.aliases))o[e]=t;r.push(t)})),r.forEach((e=>{if(e.toMiddleware){const t=o[e.toMiddleware];if(void 0===t){if(n)return;throw new Error(`${e.toMiddleware} is not found when adding ${Ds(e.name,e.aliases)} middleware ${e.relation} ${e.toMiddleware}`)}"after"===e.relation&&t.after.push(e),"before"===e.relation&&t.before.push(e)}}));const a=(c=s,c.sort(((e,t)=>js[t.step]-js[e.step]||qs[t.priority||"normal"]-qs[e.priority||"normal"]))).map(i).reduce(((e,t)=>(e.push(...t),e)),[]);var c;return a},a={add:(t,n={})=>{const{name:r,override:i,aliases:o}=n,a={step:"initialize",priority:"normal",middleware:t,...n},c=Bs(r,o);if(c.length>0){if(c.some((e=>s.has(e)))){if(!i)throw new Error(`Duplicate middleware name '${Ds(r,o)}'`);for(const t of c){const n=e.findIndex((e=>e.name===t||e.aliases?.some((e=>e===t))));if(-1===n)continue;const s=e[n];if(s.step!==a.step||a.priority!==s.priority)throw new Error(`"${Ds(s.name,s.aliases)}" middleware with ${s.priority} priority in ${s.step} step cannot be overridden by "${Ds(r,o)}" middleware with ${a.priority} priority in ${a.step} step.`);e.splice(n,1)}}for(const e of c)s.add(e)}e.push(a)},addRelativeTo:(e,n)=>{const{name:r,override:i,aliases:o}=n,a={middleware:e,...n},c=Bs(r,o);if(c.length>0){if(c.some((e=>s.has(e)))){if(!i)throw new Error(`Duplicate middleware name '${Ds(r,o)}'`);for(const e of c){const n=t.findIndex((t=>t.name===e||t.aliases?.some((t=>t===e))));if(-1===n)continue;const s=t[n];if(s.toMiddleware!==a.toMiddleware||s.relation!==a.relation)throw new Error(`"${Ds(s.name,s.aliases)}" middleware ${s.relation} "${s.toMiddleware}" middleware cannot be overridden by "${Ds(r,o)}" middleware ${a.relation} "${a.toMiddleware}" middleware.`);t.splice(n,1)}}for(const e of c)s.add(e)}t.push(a)},clone:()=>r(Fs()),use:e=>{e.applyToStack(a)},remove:n=>"string"==typeof n?(n=>{let r=!1;const i=e=>{const t=Bs(e.name,e.aliases);if(t.includes(n)){r=!0;for(const e of t)s.delete(e);return!1}return!0};return e=e.filter(i),t=t.filter(i),r})(n):(n=>{let r=!1;const i=e=>{if(e.middleware===n){r=!0;for(const t of Bs(e.name,e.aliases))s.delete(t);return!1}return!0};return e=e.filter(i),t=t.filter(i),r})(n),removeByTag:n=>{let r=!1;const i=e=>{const{tags:t,name:i,aliases:o}=e;if(t&&t.includes(n)){const e=Bs(i,o);for(const t of e)s.delete(t);return r=!0,!1}return!0};return e=e.filter(i),t=t.filter(i),r},concat:e=>{const t=r(Fs());return t.use(e),t.identifyOnResolve(n||t.identifyOnResolve()||(e.identifyOnResolve?.()??!1)),t},applyToStack:r,identify:()=>o(!0).map((e=>{const t=e.step??e.relation+" "+e.toMiddleware;return Ds(e.name,e.aliases)+" - "+t})),identifyOnResolve:e=>("boolean"==typeof e&&(n=e),n),resolve:(e,t)=>{for(const n of o().map((e=>e.middleware)).reverse())e=n(e,t);return n&&console.log(a.identify()),e}};return a},js={initialize:5,serialize:4,build:3,finalizeRequest:2,deserialize:1},qs={high:3,normal:2,low:1};class Hs{constructor(e){this.config=e,this.middlewareStack=Fs()}send(e,t,n){const s="function"!=typeof t?t:void 0,r="function"==typeof t?t:n;let i;if(void 0===s&&!0===this.config.cacheMiddleware){this.handlers||(this.handlers=new WeakMap);const t=this.handlers;t.has(e.constructor)?i=t.get(e.constructor):(i=e.resolveMiddleware(this.middlewareStack,this.config,s),t.set(e.constructor,i))}else delete this.handlers,i=e.resolveMiddleware(this.middlewareStack,this.config,s);if(!r)return i(e).then((e=>e.output));i(e).then((e=>r(null,e.output)),(e=>r(e))).catch((()=>{}))}destroy(){this.config?.requestHandler?.destroy?.(),delete this.handlers}}class Vs{constructor(){this.middlewareStack=Fs()}static classBuilder(){return new Ws}resolveMiddlewareWithContext(e,t,n,{middlewareFn:s,clientName:r,commandName:i,inputFilterSensitiveLog:o,outputFilterSensitiveLog:a,smithyContext:c,additionalContext:d,CommandCtor:u}){for(const r of s.bind(this)(u,e,t,n))this.middlewareStack.use(r);const l=e.concat(this.middlewareStack),{logger:h}=t,p={logger:h,clientName:r,commandName:i,inputFilterSensitiveLog:o,outputFilterSensitiveLog:a,[Dt]:{commandInstance:this,...c},...d},{requestHandler:f}=t;return l.resolve((e=>f.handle(e.request,n||{})),p)}}class Ws{constructor(){this._init=()=>{},this._ep={},this._middlewareFn=()=>[],this._commandName="",this._clientName="",this._additionalContext={},this._smithyContext={},this._inputFilterSensitiveLog=e=>e,this._outputFilterSensitiveLog=e=>e,this._serializer=null,this._deserializer=null}init(e){this._init=e}ep(e){return this._ep=e,this}m(e){return this._middlewareFn=e,this}s(e,t,n={}){return this._smithyContext={service:e,operation:t,...n},this}c(e={}){return this._additionalContext=e,this}n(e,t){return this._clientName=e,this._commandName=t,this}f(e=e=>e,t=e=>e){return this._inputFilterSensitiveLog=e,this._outputFilterSensitiveLog=t,this}ser(e){return this._serializer=e,this}de(e){return this._deserializer=e,this}build(){const e=this;let t;return t=class extends Vs{static getEndpointParameterInstructions(){return e._ep}constructor(...[t]){super(),this.serialize=e._serializer,this.deserialize=e._deserializer,this.input=t??{},e._init(this)}resolveMiddleware(n,s,r){return this.resolveMiddlewareWithContext(n,s,r,{CommandCtor:t,middlewareFn:e._middlewareFn,clientName:e._clientName,commandName:e._commandName,inputFilterSensitiveLog:e._inputFilterSensitiveLog,outputFilterSensitiveLog:e._outputFilterSensitiveLog,smithyContext:e._smithyContext,additionalContext:e._additionalContext})}}}}const zs="***SensitiveInformation***";class Gs extends Error{constructor(e){super(e.message),Object.setPrototypeOf(this,Gs.prototype),this.name=e.name,this.$fault=e.$fault,this.$metadata=e.$metadata}}const Ks=(e,t={})=>{Object.entries(t).filter((([,e])=>void 0!==e)).forEach((([t,n])=>{null!=e[t]&&""!==e[t]||(e[t]=n)}));const n=e.message||e.Message||"UnknownError";return e.message=n,delete e.Message,e},Xs=e=>({httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}),Ys=e=>{switch(e){case"standard":case"cross-region":return{retryMode:"standard",connectionTimeout:3100};case"in-region":return{retryMode:"standard",connectionTimeout:1100};case"mobile":return{retryMode:"standard",connectionTimeout:3e4};default:return{}}},Zs=e=>{const t=[];for(const n in $t){const s=$t[n];void 0!==e[s]&&t.push({algorithmId:()=>s,checksumConstructor:()=>e[s]})}return{_checksumAlgorithms:t,addChecksumAlgorithm(e){this._checksumAlgorithms.push(e)},checksumAlgorithms(){return this._checksumAlgorithms}}},Js=e=>{const t={};return e.checksumAlgorithms().forEach((e=>{t[e.algorithmId()]=e.checksumConstructor()})),t},Qs=e=>{let t=e.retryStrategy;return{setRetryStrategy(e){t=e},retryStrategy:()=>t}},er=e=>{const t={};return t.retryStrategy=e.retryStrategy(),t},tr=e=>({...Zs(e),...Qs(e)}),nr=function(){const e=Object.getPrototypeOf(this).constructor,t=new(Function.bind.apply(String,[null,...arguments]));return Object.setPrototypeOf(t,e.prototype),t};nr.prototype=Object.create(String.prototype,{constructor:{value:nr,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf(nr,String);class sr{trace(){}debug(){}info(){}warn(){}error(){}}const rr=e=>{if(null==e)return{};if(Array.isArray(e))return e.filter((e=>null!=e)).map(rr);if("object"==typeof e){const t={};for(const n of Object.keys(e))null!=e[n]&&(t[n]=rr(e[n]));return t}return e},ir=(e,t)=>(async(e=new Uint8Array,t)=>{if(e instanceof Uint8Array)return gn.mutate(e);if(!e)return gn.mutate(new Uint8Array);const n=t.streamCollector(e);return gn.mutate(await n)})(e,t).then((e=>t.utf8Encoder(e))),or=(e,t)=>ir(e,t).then((e=>{if(e.length)try{return JSON.parse(e)}catch(t){throw"SyntaxError"===t?.name&&Object.defineProperty(t,"$responseBodyText",{value:e}),t}return{}})),ar=async(e,t)=>{const n=await or(e,t);return n.message=n.message??n.Message,n};"undefined"!=typeof globalThis?globalThis:"undefined"!="object"?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;function cr(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}const dr=/\d{12}\.ddb/;const ur="user-agent",lr="x-amz-user-agent",hr=/[^\!\$\%\&\'\*\+\-\.\^\_\`\|\~\d\w]/g,pr=/[^\!\$\%\&\'\*\+\-\.\^\_\`\|\~\d\w\#]/g;const fr=e=>(t,n)=>async s=>{const{request:r}=s;if(!qt.isInstance(r))return t(s);const{headers:i}=r,o=n?.userAgent?.map(mr)||[],a=(await e.defaultUserAgentProvider()).map(mr);await async function(e,t,n){const s=n.request;if("rpc-v2-cbor"===s?.headers?.["smithy-protocol"]&&es(e,"PROTOCOL_RPC_V2_CBOR","M"),"function"==typeof t.retryStrategy){const n=await t.retryStrategy();"function"==typeof n.acquireInitialRetryToken?n.constructor?.name?.includes("Adaptive")?es(e,"RETRY_MODE_ADAPTIVE","F"):es(e,"RETRY_MODE_STANDARD","E"):es(e,"RETRY_MODE_LEGACY","D")}if("function"==typeof t.accountIdEndpointMode){const n=e.endpointV2;switch(String(n?.url?.hostname).match(dr)&&es(e,"ACCOUNT_ID_ENDPOINT","O"),await(t.accountIdEndpointMode?.())){case"disabled":es(e,"ACCOUNT_ID_MODE_DISABLED","Q");break;case"preferred":es(e,"ACCOUNT_ID_MODE_PREFERRED","P");break;case"required":es(e,"ACCOUNT_ID_MODE_REQUIRED","R")}}const r=e.__smithy_context?.selectedHttpAuthScheme?.identity;if(r?.$source){const t=r;t.accountId&&es(e,"RESOLVED_ACCOUNT_ID","T");for(const[n,s]of Object.entries(t.$source??{}))es(e,n,s)}}(n,e,s);const c=n;a.push(`m/${function(e){let t="";for(const n in e){const s=e[n];if(!(t.length+s.length+1<=1024))break;t.length?t+=","+s:t+=s}return t}(Object.assign({},n.__smithy_context?.features,c.__aws_sdk_context?.features))}`);const d=e?.customUserAgent?.map(mr)||[],u=await e.userAgentAppId();u&&a.push(mr([`app/${u}`]));const l=[].concat([...a,...o,...d]).join(" "),h=[...a.filter((e=>e.startsWith("aws-sdk-"))),...d].join(" ");return"browser"!==e.runtime?(h&&(i[lr]=i[lr]?`${i[ur]} ${h}`:h),i[ur]=l):i[lr]=l,t({...s,request:r})},mr=e=>{const t=e[0].split("/").map((e=>e.replace(hr,"-"))).join("/"),n=e[1]?.replace(pr,"-"),s=t.indexOf("/"),r=t.substring(0,s);let i=t.substring(s+1);return"api"===r&&(i=i.toLowerCase()),[r,i,n].filter((e=>e&&e.length>0)).reduce(((e,t,n)=>{switch(n){case 0:return t;case 1:return`${e}/${t}`;default:return`${e}#${t}`}}),"")},gr={name:"getUserAgentMiddleware",step:"build",priority:"low",tags:["SET_USER_AGENT","USER_AGENT"],override:!0};var yr;!function(e){e.ENV="env",e.CONFIG="shared config entry"}(yr||(yr={}));const wr=e=>"string"==typeof e&&(e.startsWith("fips-")||e.endsWith("-fips")),Er=e=>wr(e)?["fips-aws-global","aws-fips"].includes(e)?"us-east-1":e.replace(/fips-(dkr-|prod-)?|-fips/,""):e,br="content-length";const Sr={step:"build",tags:["SET_CONTENT_LENGTH","CONTENT_LENGTH"],name:"contentLengthMiddleware",override:!0},vr=e=>({applyToStack:t=>{var n;t.add((n=e.bodyLengthChecker,e=>async t=>{const s=t.request;if(qt.isInstance(s)){const{body:e,headers:t}=s;if(e&&-1===Object.keys(t).map((e=>e.toLowerCase())).indexOf(br))try{const t=n(e);s.headers={...s.headers,[br]:String(t)}}catch(e){}}return e({...t,request:s})}),Sr)}}),Ar=/^[a-z0-9][a-z0-9\.\-]{1,61}[a-z0-9]$/,Ir=/(\d+\.){3}\d+/,Tr=/\.\./,Or=e=>Ar.test(e)&&!Ir.test(e)&&!Tr.test(e),Rr=e=>{const[t,n,s,,,r]=e.split(":"),i="arn"===t&&e.split(":").length>=6,o=Boolean(i&&n&&s&&r);if(i&&!o)throw new Error(`Invalid ARN: ${e} was an invalid ARN.`);return o},kr=(e,t,n)=>{const s=async()=>{const s=n[e]??n[t];return"function"==typeof s?s():s};return"credentialScope"===e||"CredentialScope"===t?async()=>{const e="function"==typeof n.credentials?await n.credentials():n.credentials;return e?.credentialScope??e?.CredentialScope}:"accountId"===e||"AccountId"===t?async()=>{const e="function"==typeof n.credentials?await n.credentials():n.credentials;return e?.accountId??e?.AccountId}:"endpoint"===e||"endpoint"===t?async()=>{const e=await s();if(e&&"object"==typeof e){if("url"in e)return e.url.href;if("hostname"in e){const{protocol:t,hostname:n,port:s,path:r}=e;return`${t}//${n}${s?":"+s:""}${r}`}}return e}:s},xr=async e=>{};const Pr=e=>{if("string"==typeof e)return Pr(new URL(e));const{hostname:t,pathname:n,port:s,protocol:r,search:i}=e;let o;return i&&(o=function(e){const t={};if(e=e.replace(/^\?/,""))for(const n of e.split("&")){let[e,s=null]=n.split("=");e=decodeURIComponent(e),s&&(s=decodeURIComponent(s)),e in t?Array.isArray(t[e])?t[e].push(s):t[e]=[t[e],s]:t[e]=s}return t}(i)),{hostname:t,port:s?parseInt(s):void 0,protocol:r,path:n,query:o}},Mr=e=>"object"==typeof e?"url"in e?Pr(e.url):e:Pr(e),Nr=async(e,t,n)=>{const s={},r=t?.getEndpointParameterInstructions?.()||{};for(const[t,i]of Object.entries(r))switch(i.type){case"staticContextParams":s[t]=i.value;break;case"contextParams":s[t]=e[i.name];break;case"clientContextParams":case"builtInParams":s[t]=await kr(i.name,t,n)();break;default:throw new Error("Unrecognized endpoint parameter instruction: "+JSON.stringify(i))}return 0===Object.keys(r).length&&Object.assign(s,n),"s3"===String(n.serviceId).toLowerCase()&&await(async e=>{const t=e?.Bucket||"";if("string"==typeof e.Bucket&&(e.Bucket=t.replace(/#/g,encodeURIComponent("#")).replace(/\?/g,encodeURIComponent("?"))),Rr(t)){if(!0===e.ForcePathStyle)throw new Error("Path-style addressing cannot be used with ARN buckets")}else(!Or(t)||-1!==t.indexOf(".")&&!String(e.Endpoint).startsWith("http:")||t.toLowerCase()!==t||t.length<3)&&(e.ForcePathStyle=!0);return e.DisableMultiRegionAccessPoints&&(e.disableMultiRegionAccessPoints=!0,e.DisableMRAP=!0),e})(s),s},Cr=({config:e,instructions:t})=>(n,s)=>async r=>{e.endpoint&&function(e,t,n){e.__smithy_context?e.__smithy_context.features||(e.__smithy_context.features={}):e.__smithy_context={features:{}},e.__smithy_context.features[t]=n}(s,"ENDPOINT_OVERRIDE","N");const i=await(async(e,t,n,s)=>{if(!n.endpoint){let e;e=n.serviceConfiguredEndpoint?await n.serviceConfiguredEndpoint():await xr(n.serviceId),e&&(n.endpoint=()=>Promise.resolve(Mr(e)))}const r=await Nr(e,t,n);if("function"!=typeof n.endpointProvider)throw new Error("config.endpointProvider is not set.");return n.endpointProvider(r,s)})(r.input,{getEndpointParameterInstructions:()=>t},{...e},s);s.endpointV2=i,s.authSchemes=i.properties?.authSchemes;const o=s.authSchemes?.[0];if(o){s.signing_region=o.signingRegion,s.signing_service=o.signingName;const e=Yt(s),t=e?.selectedHttpAuthScheme?.httpAuthOption;t&&(t.signingProperties=Object.assign(t.signingProperties||{},{signing_region:o.signingRegion,signingRegion:o.signingRegion,signing_service:o.signingName,signingName:o.signingName,signingRegionSet:o.signingRegionSet},o.properties))}return n({...r})},_r={step:"serialize",tags:["ENDPOINT_PARAMETERS","ENDPOINT_V2","ENDPOINT"],name:"endpointV2Middleware",override:!0,relation:"before",toMiddleware:tn.name},Ur=(e,t)=>({applyToStack:n=>{n.addRelativeTo(Cr({config:e,instructions:t}),_r)}});var Lr;!function(e){e.STANDARD="standard",e.ADAPTIVE="adaptive"}(Lr||(Lr={}));const $r=Lr.STANDARD,Br=["BandwidthLimitExceeded","EC2ThrottledException","LimitExceededException","PriorRequestNotComplete","ProvisionedThroughputExceededException","RequestLimitExceeded","RequestThrottled","RequestThrottledException","SlowDown","ThrottledException","Throttling","ThrottlingException","TooManyRequestsException","TransactionInProgressException"],Dr=["TimeoutError","RequestTimeout","RequestTimeoutException"],Fr=[500,502,503,504],jr=["ECONNRESET","ECONNREFUSED","EPIPE","ETIMEDOUT"],qr=e=>429===e.$metadata?.httpStatusCode||Br.includes(e.name)||1==e.$retryable?.throttling,Hr=e=>(e=>e.$metadata?.clockSkewCorrected)(e)||Dr.includes(e.name)||jr.includes(e?.code||"")||Fr.includes(e.$metadata?.httpStatusCode||0);class Vr{constructor(e){this.currentCapacity=0,this.enabled=!1,this.lastMaxRate=0,this.measuredTxRate=0,this.requestCount=0,this.lastTimestamp=0,this.timeWindow=0,this.beta=e?.beta??.7,this.minCapacity=e?.minCapacity??1,this.minFillRate=e?.minFillRate??.5,this.scaleConstant=e?.scaleConstant??.4,this.smooth=e?.smooth??.8;const t=this.getCurrentTimeInSeconds();this.lastThrottleTime=t,this.lastTxRateBucket=Math.floor(this.getCurrentTimeInSeconds()),this.fillRate=this.minFillRate,this.maxCapacity=this.minCapacity}getCurrentTimeInSeconds(){return Date.now()/1e3}async getSendToken(){return this.acquireTokenBucket(1)}async acquireTokenBucket(e){if(this.enabled){if(this.refillTokenBucket(),e>this.currentCapacity){const t=(e-this.currentCapacity)/this.fillRate*1e3;await new Promise((e=>setTimeout(e,t)))}this.currentCapacity=this.currentCapacity-e}}refillTokenBucket(){const e=this.getCurrentTimeInSeconds();if(!this.lastTimestamp)return void(this.lastTimestamp=e);const t=(e-this.lastTimestamp)*this.fillRate;this.currentCapacity=Math.min(this.maxCapacity,this.currentCapacity+t),this.lastTimestamp=e}updateClientSendingRate(e){let t;if(this.updateMeasuredRate(),qr(e)){const e=this.enabled?Math.min(this.measuredTxRate,this.fillRate):this.measuredTxRate;this.lastMaxRate=e,this.calculateTimeWindow(),this.lastThrottleTime=this.getCurrentTimeInSeconds(),t=this.cubicThrottle(e),this.enableTokenBucket()}else this.calculateTimeWindow(),t=this.cubicSuccess(this.getCurrentTimeInSeconds());const n=Math.min(t,2*this.measuredTxRate);this.updateTokenBucketRate(n)}calculateTimeWindow(){this.timeWindow=this.getPrecise(Math.pow(this.lastMaxRate*(1-this.beta)/this.scaleConstant,1/3))}cubicThrottle(e){return this.getPrecise(e*this.beta)}cubicSuccess(e){return this.getPrecise(this.scaleConstant*Math.pow(e-this.lastThrottleTime-this.timeWindow,3)+this.lastMaxRate)}enableTokenBucket(){this.enabled=!0}updateTokenBucketRate(e){this.refillTokenBucket(),this.fillRate=Math.max(e,this.minFillRate),this.maxCapacity=Math.max(e,this.minCapacity),this.currentCapacity=Math.min(this.currentCapacity,this.maxCapacity)}updateMeasuredRate(){const e=this.getCurrentTimeInSeconds(),t=Math.floor(2*e)/2;if(this.requestCount++,t>this.lastTxRateBucket){const e=this.requestCount/(t-this.lastTxRateBucket);this.measuredTxRate=this.getPrecise(e*this.smooth+this.measuredTxRate*(1-this.smooth)),this.requestCount=0,this.lastTxRateBucket=t}}getPrecise(e){return parseFloat(e.toFixed(8))}}const Wr=({retryDelay:e,retryCount:t,retryCost:n})=>({getRetryCount:()=>t,getRetryDelay:()=>Math.min(2e4,e),getRetryCost:()=>n});class zr{constructor(e){this.maxAttempts=e,this.mode=Lr.STANDARD,this.capacity=500,this.retryBackoffStrategy=(()=>{let e=100;return{computeNextBackoffDelay:t=>Math.floor(Math.min(2e4,Math.random()*2**t*e)),setDelayBase:t=>{e=t}}})(),this.maxAttemptsProvider="function"==typeof e?e:async()=>e}async acquireInitialRetryToken(e){return Wr({retryDelay:100,retryCount:0})}async refreshRetryTokenForRetry(e,t){const n=await this.getMaxAttempts();if(this.shouldRetry(e,t,n)){const n=t.errorType;this.retryBackoffStrategy.setDelayBase("THROTTLING"===n?500:100);const s=this.retryBackoffStrategy.computeNextBackoffDelay(e.getRetryCount()),r=t.retryAfterHint?Math.max(t.retryAfterHint.getTime()-Date.now()||0,s):s,i=this.getCapacityCost(n);return this.capacity-=i,Wr({retryDelay:r,retryCount:e.getRetryCount()+1,retryCost:i})}throw new Error("No retry token available")}recordSuccess(e){this.capacity=Math.max(500,this.capacity+(e.getRetryCost()??1))}getCapacity(){return this.capacity}async getMaxAttempts(){try{return await this.maxAttemptsProvider()}catch(e){return console.warn("Max attempts provider could not resolve. Using default of 3"),3}}shouldRetry(e,t,n){return e.getRetryCount()+1<n&&this.capacity>=this.getCapacityCost(t.errorType)&&this.isRetryableError(t.errorType)}getCapacityCost(e){return"TRANSIENT"===e?10:5}isRetryableError(e){return"THROTTLING"===e||"TRANSIENT"===e}}class Gr{constructor(e,t){this.maxAttemptsProvider=e,this.mode=Lr.ADAPTIVE;const{rateLimiter:n}=t??{};this.rateLimiter=n??new Vr,this.standardRetryStrategy=new zr(e)}async acquireInitialRetryToken(e){return await this.rateLimiter.getSendToken(),this.standardRetryStrategy.acquireInitialRetryToken(e)}async refreshRetryTokenForRetry(e,t){return this.rateLimiter.updateClientSendingRate(t),this.standardRetryStrategy.refreshRetryTokenForRetry(e,t)}recordSuccess(e){this.rateLimiter.updateClientSendingRate({}),this.standardRetryStrategy.recordSuccess(e)}}let Kr;const Xr=new Uint8Array(16);function Yr(){if(!Kr&&(Kr="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Kr))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Kr(Xr)}const Zr=[];for(let e=0;e<256;++e)Zr.push((e+256).toString(16).slice(1));var Jr={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};function Qr(e,t,n){if(Jr.randomUUID&&!t&&!e)return Jr.randomUUID();const s=(e=e||{}).random||(e.rng||Yr)();if(s[6]=15&s[6]|64,s[8]=63&s[8]|128,t){n=n||0;for(let e=0;e<16;++e)t[n+e]=s[e];return t}return function(e,t=0){return Zr[e[t+0]]+Zr[e[t+1]]+Zr[e[t+2]]+Zr[e[t+3]]+"-"+Zr[e[t+4]]+Zr[e[t+5]]+"-"+Zr[e[t+6]]+Zr[e[t+7]]+"-"+Zr[e[t+8]]+Zr[e[t+9]]+"-"+Zr[e[t+10]]+Zr[e[t+11]]+Zr[e[t+12]]+Zr[e[t+13]]+Zr[e[t+14]]+Zr[e[t+15]]}(s)}const ei=e=>e?.body instanceof ReadableStream,ti=e=>void 0!==e.acquireInitialRetryToken&&void 0!==e.refreshRetryTokenForRetry&&void 0!==e.recordSuccess,ni=e=>{const t={error:e,errorType:si(e)},n=oi(e.$response);return n&&(t.retryAfterHint=n),t},si=e=>qr(e)?"THROTTLING":Hr(e)?"TRANSIENT":(e=>{if(void 0!==e.$metadata?.httpStatusCode){const t=e.$metadata.httpStatusCode;return 500<=t&&t<=599&&!Hr(e)}return!1})(e)?"SERVER_ERROR":"CLIENT_ERROR",ri={name:"retryMiddleware",tags:["RETRY"],step:"finalizeRequest",priority:"high",override:!0},ii=e=>({applyToStack:t=>{t.add((e=>(t,n)=>async s=>{let r=await e.retryStrategy();const i=await e.maxAttempts();if(!ti(r))return r?.mode&&(n.userAgent=[...n.userAgent||[],["cfg/retry-mode",r.mode]]),r.retry(t,s);{let e=await r.acquireInitialRetryToken(n.partition_id),a=new Error,c=0,d=0;const{request:u}=s,l=qt.isInstance(u);for(l&&(u.headers["amz-sdk-invocation-id"]=Qr());;)try{l&&(u.headers["amz-sdk-request"]=`attempt=${c+1}; max=${i}`);const{response:n,output:o}=await t(s);return r.recordSuccess(e),o.$metadata.attempts=c+1,o.$metadata.totalRetryDelay=d,{response:n,output:o}}catch(t){const s=ni(t);if(a=(o=t)instanceof Error?o:o instanceof Object?Object.assign(new Error,o):"string"==typeof o?new Error(o):new Error(`AWS SDK error wrapper for ${o}`),l&&ei(u))throw(n.logger instanceof sr?console:n.logger)?.warn("An error was encountered in a non-retryable streaming request."),a;try{e=await r.refreshRetryTokenForRetry(e,s)}catch(e){throw a.$metadata||(a.$metadata={}),a.$metadata.attempts=c+1,a.$metadata.totalRetryDelay=d,a}c=e.getRetryCount();const i=e.getRetryDelay();d+=i,await new Promise((e=>setTimeout(e,i)))}}var o})(e),ri)}}),oi=e=>{if(!Ht.isInstance(e))return;const t=Object.keys(e.headers).find((e=>"retry-after"===e.toLowerCase()));if(!t)return;const n=e.headers[t],s=Number(n);if(!Number.isNaN(s))return new Date(1e3*s);return new Date(n)},ai=async(e,t,n)=>({operation:Yt(t).operation,region:await Zt(e.region)()||(()=>{throw new Error("expected `region` to be configured for `aws.auth#sigv4`")})()});const ci=e=>{const t=[];switch(e.operation){case"AssociateSoftwareToken":case"ChangePassword":case"ConfirmDevice":case"ConfirmForgotPassword":case"ConfirmSignUp":case"DeleteUser":case"DeleteUserAttributes":case"ForgetDevice":case"ForgotPassword":case"GetDevice":case"GetUser":case"GetUserAttributeVerificationCode":case"GlobalSignOut":case"InitiateAuth":case"ListDevices":case"ResendConfirmationCode":case"RespondToAuthChallenge":case"RevokeToken":case"SetUserMFAPreference":case"SetUserSettings":case"SignUp":case"UpdateAuthEventFeedback":case"UpdateDeviceStatus":case"UpdateUserAttributes":case"VerifySoftwareToken":case"VerifyUserAttribute":t.push({schemeId:"smithy.api#noAuth"});break;default:t.push(function(e){return{schemeId:"aws.auth#sigv4",signingProperties:{name:"cognito-idp",region:e.region},propertiesExtractor:(e,t)=>({signingProperties:{config:e,context:t}})}}(e))}return t},di={UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}};var ui="3.678.0";var li="undefined"!=typeof Buffer&&Buffer.from?function(e){return Buffer.from(e,"utf8")}:e=>(new TextEncoder).encode(e);function hi(e){return e instanceof Uint8Array?e:"string"==typeof e?li(e):ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(e)}function pi(e){return"string"==typeof e?0===e.length:0===e.byteLength}var fi={name:"SHA-256"},mi={name:"HMAC",hash:fi},gi=new Uint8Array([227,176,196,66,152,252,28,20,154,251,244,200,153,111,185,36,39,174,65,228,100,155,147,76,164,149,153,27,120,82,184,85]);function yi(){return window}var wi=function(){function e(e){this.toHash=new Uint8Array(0),this.secret=e,this.reset()}return e.prototype.update=function(e){if(!pi(e)){var t=hi(e),n=new Uint8Array(this.toHash.byteLength+t.byteLength);n.set(this.toHash,0),n.set(t,this.toHash.byteLength),this.toHash=n}},e.prototype.digest=function(){var e=this;return this.key?this.key.then((function(t){return yi().crypto.subtle.sign(mi,t,e.toHash).then((function(e){return new Uint8Array(e)}))})):pi(this.toHash)?Promise.resolve(gi):Promise.resolve().then((function(){return yi().crypto.subtle.digest(fi,e.toHash)})).then((function(e){return Promise.resolve(new Uint8Array(e))}))},e.prototype.reset=function(){var e=this;this.toHash=new Uint8Array(0),this.secret&&void 0!==this.secret&&(this.key=new Promise((function(t,n){yi().crypto.subtle.importKey("raw",hi(e.secret),mi,!1,["sign"]).then(t,n)})),this.key.catch((function(){})))},e}();function Ei(e,t,n,s){return new(n||(n=Promise))((function(r,i){function o(e){try{c(s.next(e))}catch(e){i(e)}}function a(e){try{c(s.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((s=s.apply(e,t||[])).next())}))}function bi(e,t){var n,s,r,i={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]},o=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return o.next=a(0),o.throw=a(1),o.return=a(2),"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(a){return function(c){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,a[0]&&(i=0)),i;)try{if(n=1,s&&(r=2&a[0]?s.return:a[0]?s.throw||((r=s.return)&&r.call(s),0):s.next)&&!(r=r.call(s,a[1])).done)return r;switch(s=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,s=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(r=i.trys,(r=r.length>0&&r[r.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!r||a[1]>r[0]&&a[1]<r[3])){i.label=a[1];break}if(6===a[0]&&i.label<r[1]){i.label=r[1],r=a;break}if(r&&i.label<r[2]){i.label=r[2],i.ops.push(a);break}r[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],s=0}finally{n=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}}"function"==typeof SuppressedError&&SuppressedError;var Si=64,vi=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Ai=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],Ii=Math.pow(2,53)-1,Ti=function(){function e(){this.state=Int32Array.from(Ai),this.temp=new Int32Array(64),this.buffer=new Uint8Array(64),this.bufferLength=0,this.bytesHashed=0,this.finished=!1}return e.prototype.update=function(e){if(this.finished)throw new Error("Attempted to update an already finished hash.");var t=0,n=e.byteLength;if(this.bytesHashed+=n,8*this.bytesHashed>Ii)throw new Error("Cannot hash more than 2^53 - 1 bits");for(;n>0;)this.buffer[this.bufferLength++]=e[t++],n--,this.bufferLength===Si&&(this.hashBuffer(),this.bufferLength=0)},e.prototype.digest=function(){if(!this.finished){var e=8*this.bytesHashed,t=new DataView(this.buffer.buffer,this.buffer.byteOffset,this.buffer.byteLength),n=this.bufferLength;if(t.setUint8(this.bufferLength++,128),n%Si>=56){for(var s=this.bufferLength;s<Si;s++)t.setUint8(s,0);this.hashBuffer(),this.bufferLength=0}for(s=this.bufferLength;s<56;s++)t.setUint8(s,0);t.setUint32(56,Math.floor(e/4294967296),!0),t.setUint32(60,e),this.hashBuffer(),this.finished=!0}var r=new Uint8Array(32);for(s=0;s<8;s++)r[4*s]=this.state[s]>>>24&255,r[4*s+1]=this.state[s]>>>16&255,r[4*s+2]=this.state[s]>>>8&255,r[4*s+3]=this.state[s]>>>0&255;return r},e.prototype.hashBuffer=function(){for(var e=this.buffer,t=this.state,n=t[0],s=t[1],r=t[2],i=t[3],o=t[4],a=t[5],c=t[6],d=t[7],u=0;u<Si;u++){if(u<16)this.temp[u]=(255&e[4*u])<<24|(255&e[4*u+1])<<16|(255&e[4*u+2])<<8|255&e[4*u+3];else{var l=this.temp[u-2],h=(l>>>17|l<<15)^(l>>>19|l<<13)^l>>>10,p=((l=this.temp[u-15])>>>7|l<<25)^(l>>>18|l<<14)^l>>>3;this.temp[u]=(h+this.temp[u-7]|0)+(p+this.temp[u-16]|0)}var f=(((o>>>6|o<<26)^(o>>>11|o<<21)^(o>>>25|o<<7))+(o&a^~o&c)|0)+(d+(vi[u]+this.temp[u]|0)|0)|0,m=((n>>>2|n<<30)^(n>>>13|n<<19)^(n>>>22|n<<10))+(n&s^n&r^s&r)|0;d=c,c=a,a=o,o=i+f|0,i=r,r=s,s=n,n=f+m|0}t[0]+=n,t[1]+=s,t[2]+=r,t[3]+=i,t[4]+=o,t[5]+=a,t[6]+=c,t[7]+=d},e}(),Oi=function(){function e(e){this.secret=e,this.hash=new Ti,this.reset()}return e.prototype.update=function(e){if(!pi(e)&&!this.error)try{this.hash.update(hi(e))}catch(e){this.error=e}},e.prototype.digestSync=function(){if(this.error)throw this.error;return this.outer?(this.outer.finished||this.outer.update(this.hash.digest()),this.outer.digest()):this.hash.digest()},e.prototype.digest=function(){return Ei(this,void 0,void 0,(function(){return bi(this,(function(e){return[2,this.digestSync()]}))}))},e.prototype.reset=function(){if(this.hash=new Ti,this.secret){this.outer=new Ti;var e=function(e){var t=hi(e);if(t.byteLength>Si){var n=new Ti;n.update(t),t=n.digest()}var s=new Uint8Array(Si);return s.set(t),s}(this.secret),t=new Uint8Array(Si);t.set(e);for(var n=0;n<Si;n++)e[n]^=54,t[n]^=92;this.hash.update(e),this.outer.update(t);for(n=0;n<e.byteLength;n++)e[n]=0}},e}();var Ri=["decrypt","digest","encrypt","exportKey","generateKey","importKey","sign","verify"];function ki(e){return!(!function(e){if("object"==="object".crypto){return"function"==typeof e.crypto.getRandomValues}return!1}(e)||"object"!=="object".crypto.subtle)&&function(e){return e&&Ri.every((function(t){return"function"==typeof e[t]}))}(e.crypto.subtle)}var xi=function(){function e(e){ki(yi())?this.hash=new wi(e):this.hash=new Oi(e)}return e.prototype.update=function(e,t){this.hash.update(hi(e))},e.prototype.digest=function(){return this.hash.digest()},e.prototype.reset=function(){this.hash.reset()},e}(),Pi=function(e,t,n){return e(n={path:t,exports:{},require:function(e,t){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(null==t&&n.path)}},n.exports),n.exports}((function(e,t){e.exports=function(e){var t={};function n(s){if(t[s])return t[s].exports;var r=t[s]={i:s,l:!1,exports:{}};return e[s].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,s){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(n.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(s,r,function(t){return e[t]}.bind(null,r));return s},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=90)}({17:function(e,t,n){t.__esModule=!0,t.default=void 0;var s=n(18),r=function(){function e(){}return e.getFirstMatch=function(e,t){var n=t.match(e);return n&&n.length>0&&n[1]||""},e.getSecondMatch=function(e,t){var n=t.match(e);return n&&n.length>1&&n[2]||""},e.matchAndReturnConst=function(e,t,n){if(e.test(t))return n},e.getWindowsVersionName=function(e){switch(e){case"NT":return"NT";case"XP":case"NT 5.1":return"XP";case"NT 5.0":return"2000";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return}},e.getMacOSVersionName=function(e){var t=e.split(".").splice(0,2).map((function(e){return parseInt(e,10)||0}));if(t.push(0),10===t[0])switch(t[1]){case 5:return"Leopard";case 6:return"Snow Leopard";case 7:return"Lion";case 8:return"Mountain Lion";case 9:return"Mavericks";case 10:return"Yosemite";case 11:return"El Capitan";case 12:return"Sierra";case 13:return"High Sierra";case 14:return"Mojave";case 15:return"Catalina";default:return}},e.getAndroidVersionName=function(e){var t=e.split(".").splice(0,2).map((function(e){return parseInt(e,10)||0}));if(t.push(0),!(1===t[0]&&t[1]<5))return 1===t[0]&&t[1]<6?"Cupcake":1===t[0]&&t[1]>=6?"Donut":2===t[0]&&t[1]<2?"Eclair":2===t[0]&&2===t[1]?"Froyo":2===t[0]&&t[1]>2?"Gingerbread":3===t[0]?"Honeycomb":4===t[0]&&t[1]<1?"Ice Cream Sandwich":4===t[0]&&t[1]<4?"Jelly Bean":4===t[0]&&t[1]>=4?"KitKat":5===t[0]?"Lollipop":6===t[0]?"Marshmallow":7===t[0]?"Nougat":8===t[0]?"Oreo":9===t[0]?"Pie":void 0},e.getVersionPrecision=function(e){return e.split(".").length},e.compareVersions=function(t,n,s){void 0===s&&(s=!1);var r=e.getVersionPrecision(t),i=e.getVersionPrecision(n),o=Math.max(r,i),a=0,c=e.map([t,n],(function(t){var n=o-e.getVersionPrecision(t),s=t+new Array(n+1).join(".0");return e.map(s.split("."),(function(e){return new Array(20-e.length).join("0")+e})).reverse()}));for(s&&(a=o-Math.min(r,i)),o-=1;o>=a;){if(c[0][o]>c[1][o])return 1;if(c[0][o]===c[1][o]){if(o===a)return 0;o-=1}else if(c[0][o]<c[1][o])return-1}},e.map=function(e,t){var n,s=[];if(Array.prototype.map)return Array.prototype.map.call(e,t);for(n=0;n<e.length;n+=1)s.push(t(e[n]));return s},e.find=function(e,t){var n,s;if(Array.prototype.find)return Array.prototype.find.call(e,t);for(n=0,s=e.length;n<s;n+=1){var r=e[n];if(t(r,n))return r}},e.assign=function(e){for(var t,n,s=e,r=arguments.length,i=new Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];if(Object.assign)return Object.assign.apply(Object,[e].concat(i));var a=function(){var e=i[t];"object"==typeof e&&null!==e&&Object.keys(e).forEach((function(t){s[t]=e[t]}))};for(t=0,n=i.length;t<n;t+=1)a();return e},e.getBrowserAlias=function(e){return s.BROWSER_ALIASES_MAP[e]},e.getBrowserTypeByAlias=function(e){return s.BROWSER_MAP[e]||""},e}();t.default=r,e.exports=t.default},18:function(e,t,n){t.__esModule=!0,t.ENGINE_MAP=t.OS_MAP=t.PLATFORMS_MAP=t.BROWSER_MAP=t.BROWSER_ALIASES_MAP=void 0,t.BROWSER_ALIASES_MAP={"Amazon Silk":"amazon_silk","Android Browser":"android",Bada:"bada",BlackBerry:"blackberry",Chrome:"chrome",Chromium:"chromium",Electron:"electron",Epiphany:"epiphany",Firefox:"firefox",Focus:"focus",Generic:"generic","Google Search":"google_search",Googlebot:"googlebot","Internet Explorer":"ie","K-Meleon":"k_meleon",Maxthon:"maxthon","Microsoft Edge":"edge","MZ Browser":"mz","NAVER Whale Browser":"naver",Opera:"opera","Opera Coast":"opera_coast",PhantomJS:"phantomjs",Puffin:"puffin",QupZilla:"qupzilla",QQ:"qq",QQLite:"qqlite",Safari:"safari",Sailfish:"sailfish","Samsung Internet for Android":"samsung_internet",SeaMonkey:"seamonkey",Sleipnir:"sleipnir",Swing:"swing",Tizen:"tizen","UC Browser":"uc",Vivaldi:"vivaldi","WebOS Browser":"webos",WeChat:"wechat","Yandex Browser":"yandex",Roku:"roku"},t.BROWSER_MAP={amazon_silk:"Amazon Silk",android:"Android Browser",bada:"Bada",blackberry:"BlackBerry",chrome:"Chrome",chromium:"Chromium",electron:"Electron",epiphany:"Epiphany",firefox:"Firefox",focus:"Focus",generic:"Generic",googlebot:"Googlebot",google_search:"Google Search",ie:"Internet Explorer",k_meleon:"K-Meleon",maxthon:"Maxthon",edge:"Microsoft Edge",mz:"MZ Browser",naver:"NAVER Whale Browser",opera:"Opera",opera_coast:"Opera Coast",phantomjs:"PhantomJS",puffin:"Puffin",qupzilla:"QupZilla",qq:"QQ Browser",qqlite:"QQ Browser Lite",safari:"Safari",sailfish:"Sailfish",samsung_internet:"Samsung Internet for Android",seamonkey:"SeaMonkey",sleipnir:"Sleipnir",swing:"Swing",tizen:"Tizen",uc:"UC Browser",vivaldi:"Vivaldi",webos:"WebOS Browser",wechat:"WeChat",yandex:"Yandex Browser"},t.PLATFORMS_MAP={tablet:"tablet",mobile:"mobile",desktop:"desktop",tv:"tv"},t.OS_MAP={WindowsPhone:"Windows Phone",Windows:"Windows",MacOS:"macOS",iOS:"iOS",Android:"Android",WebOS:"WebOS",BlackBerry:"BlackBerry",Bada:"Bada",Tizen:"Tizen",Linux:"Linux",ChromeOS:"Chrome OS",PlayStation4:"PlayStation 4",Roku:"Roku"},t.ENGINE_MAP={EdgeHTML:"EdgeHTML",Blink:"Blink",Trident:"Trident",Presto:"Presto",Gecko:"Gecko",WebKit:"WebKit"}},90:function(e,t,n){t.__esModule=!0,t.default=void 0;var s,r=(s=n(91))&&s.__esModule?s:{default:s},i=n(18);function o(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}var a=function(){function e(){}var t,n,s;return e.getParser=function(e,t){if(void 0===t&&(t=!1),"string"!=typeof e)throw new Error("UserAgent should be a string");return new r.default(e,t)},e.parse=function(e){return new r.default(e).getResult()},t=e,s=[{key:"BROWSER_MAP",get:function(){return i.BROWSER_MAP}},{key:"ENGINE_MAP",get:function(){return i.ENGINE_MAP}},{key:"OS_MAP",get:function(){return i.OS_MAP}},{key:"PLATFORMS_MAP",get:function(){return i.PLATFORMS_MAP}}],(n=null)&&o(t.prototype,n),s&&o(t,s),e}();t.default=a,e.exports=t.default},91:function(e,t,n){t.__esModule=!0,t.default=void 0;var s=c(n(92)),r=c(n(93)),i=c(n(94)),o=c(n(95)),a=c(n(17));function c(e){return e&&e.__esModule?e:{default:e}}var d=function(){function e(e,t){if(void 0===t&&(t=!1),null==e||""===e)throw new Error("UserAgent parameter can't be empty");this._ua=e,this.parsedResult={},!0!==t&&this.parse()}var t=e.prototype;return t.getUA=function(){return this._ua},t.test=function(e){return e.test(this._ua)},t.parseBrowser=function(){var e=this;this.parsedResult.browser={};var t=a.default.find(s.default,(function(t){if("function"==typeof t.test)return t.test(e);if(t.test instanceof Array)return t.test.some((function(t){return e.test(t)}));throw new Error("Browser's test function is not valid")}));return t&&(this.parsedResult.browser=t.describe(this.getUA())),this.parsedResult.browser},t.getBrowser=function(){return this.parsedResult.browser?this.parsedResult.browser:this.parseBrowser()},t.getBrowserName=function(e){return e?String(this.getBrowser().name).toLowerCase()||"":this.getBrowser().name||""},t.getBrowserVersion=function(){return this.getBrowser().version},t.getOS=function(){return this.parsedResult.os?this.parsedResult.os:this.parseOS()},t.parseOS=function(){var e=this;this.parsedResult.os={};var t=a.default.find(r.default,(function(t){if("function"==typeof t.test)return t.test(e);if(t.test instanceof Array)return t.test.some((function(t){return e.test(t)}));throw new Error("Browser's test function is not valid")}));return t&&(this.parsedResult.os=t.describe(this.getUA())),this.parsedResult.os},t.getOSName=function(e){var t=this.getOS().name;return e?String(t).toLowerCase()||"":t||""},t.getOSVersion=function(){return this.getOS().version},t.getPlatform=function(){return this.parsedResult.platform?this.parsedResult.platform:this.parsePlatform()},t.getPlatformType=function(e){void 0===e&&(e=!1);var t=this.getPlatform().type;return e?String(t).toLowerCase()||"":t||""},t.parsePlatform=function(){var e=this;this.parsedResult.platform={};var t=a.default.find(i.default,(function(t){if("function"==typeof t.test)return t.test(e);if(t.test instanceof Array)return t.test.some((function(t){return e.test(t)}));throw new Error("Browser's test function is not valid")}));return t&&(this.parsedResult.platform=t.describe(this.getUA())),this.parsedResult.platform},t.getEngine=function(){return this.parsedResult.engine?this.parsedResult.engine:this.parseEngine()},t.getEngineName=function(e){return e?String(this.getEngine().name).toLowerCase()||"":this.getEngine().name||""},t.parseEngine=function(){var e=this;this.parsedResult.engine={};var t=a.default.find(o.default,(function(t){if("function"==typeof t.test)return t.test(e);if(t.test instanceof Array)return t.test.some((function(t){return e.test(t)}));throw new Error("Browser's test function is not valid")}));return t&&(this.parsedResult.engine=t.describe(this.getUA())),this.parsedResult.engine},t.parse=function(){return this.parseBrowser(),this.parseOS(),this.parsePlatform(),this.parseEngine(),this},t.getResult=function(){return a.default.assign({},this.parsedResult)},t.satisfies=function(e){var t=this,n={},s=0,r={},i=0;if(Object.keys(e).forEach((function(t){var o=e[t];"string"==typeof o?(r[t]=o,i+=1):"object"==typeof o&&(n[t]=o,s+=1)})),s>0){var o=Object.keys(n),c=a.default.find(o,(function(e){return t.isOS(e)}));if(c){var d=this.satisfies(n[c]);if(void 0!==d)return d}var u=a.default.find(o,(function(e){return t.isPlatform(e)}));if(u){var l=this.satisfies(n[u]);if(void 0!==l)return l}}if(i>0){var h=Object.keys(r),p=a.default.find(h,(function(e){return t.isBrowser(e,!0)}));if(void 0!==p)return this.compareVersion(r[p])}},t.isBrowser=function(e,t){void 0===t&&(t=!1);var n=this.getBrowserName().toLowerCase(),s=e.toLowerCase(),r=a.default.getBrowserTypeByAlias(s);return t&&r&&(s=r.toLowerCase()),s===n},t.compareVersion=function(e){var t=[0],n=e,s=!1,r=this.getBrowserVersion();if("string"==typeof r)return">"===e[0]||"<"===e[0]?(n=e.substr(1),"="===e[1]?(s=!0,n=e.substr(2)):t=[],">"===e[0]?t.push(1):t.push(-1)):"="===e[0]?n=e.substr(1):"~"===e[0]&&(s=!0,n=e.substr(1)),t.indexOf(a.default.compareVersions(r,n,s))>-1},t.isOS=function(e){return this.getOSName(!0)===String(e).toLowerCase()},t.isPlatform=function(e){return this.getPlatformType(!0)===String(e).toLowerCase()},t.isEngine=function(e){return this.getEngineName(!0)===String(e).toLowerCase()},t.is=function(e,t){return void 0===t&&(t=!1),this.isBrowser(e,t)||this.isOS(e)||this.isPlatform(e)},t.some=function(e){var t=this;return void 0===e&&(e=[]),e.some((function(e){return t.is(e)}))},e}();t.default=d,e.exports=t.default},92:function(e,t,n){t.__esModule=!0,t.default=void 0;var s,r=(s=n(17))&&s.__esModule?s:{default:s},i=/version\/(\d+(\.?_?\d+)+)/i,o=[{test:[/googlebot/i],describe:function(e){var t={name:"Googlebot"},n=r.default.getFirstMatch(/googlebot\/(\d+(\.\d+))/i,e)||r.default.getFirstMatch(i,e);return n&&(t.version=n),t}},{test:[/opera/i],describe:function(e){var t={name:"Opera"},n=r.default.getFirstMatch(i,e)||r.default.getFirstMatch(/(?:opera)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/opr\/|opios/i],describe:function(e){var t={name:"Opera"},n=r.default.getFirstMatch(/(?:opr|opios)[\s/](\S+)/i,e)||r.default.getFirstMatch(i,e);return n&&(t.version=n),t}},{test:[/SamsungBrowser/i],describe:function(e){var t={name:"Samsung Internet for Android"},n=r.default.getFirstMatch(i,e)||r.default.getFirstMatch(/(?:SamsungBrowser)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/Whale/i],describe:function(e){var t={name:"NAVER Whale Browser"},n=r.default.getFirstMatch(i,e)||r.default.getFirstMatch(/(?:whale)[\s/](\d+(?:\.\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/MZBrowser/i],describe:function(e){var t={name:"MZ Browser"},n=r.default.getFirstMatch(/(?:MZBrowser)[\s/](\d+(?:\.\d+)+)/i,e)||r.default.getFirstMatch(i,e);return n&&(t.version=n),t}},{test:[/focus/i],describe:function(e){var t={name:"Focus"},n=r.default.getFirstMatch(/(?:focus)[\s/](\d+(?:\.\d+)+)/i,e)||r.default.getFirstMatch(i,e);return n&&(t.version=n),t}},{test:[/swing/i],describe:function(e){var t={name:"Swing"},n=r.default.getFirstMatch(/(?:swing)[\s/](\d+(?:\.\d+)+)/i,e)||r.default.getFirstMatch(i,e);return n&&(t.version=n),t}},{test:[/coast/i],describe:function(e){var t={name:"Opera Coast"},n=r.default.getFirstMatch(i,e)||r.default.getFirstMatch(/(?:coast)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/opt\/\d+(?:.?_?\d+)+/i],describe:function(e){var t={name:"Opera Touch"},n=r.default.getFirstMatch(/(?:opt)[\s/](\d+(\.?_?\d+)+)/i,e)||r.default.getFirstMatch(i,e);return n&&(t.version=n),t}},{test:[/yabrowser/i],describe:function(e){var t={name:"Yandex Browser"},n=r.default.getFirstMatch(/(?:yabrowser)[\s/](\d+(\.?_?\d+)+)/i,e)||r.default.getFirstMatch(i,e);return n&&(t.version=n),t}},{test:[/ucbrowser/i],describe:function(e){var t={name:"UC Browser"},n=r.default.getFirstMatch(i,e)||r.default.getFirstMatch(/(?:ucbrowser)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/Maxthon|mxios/i],describe:function(e){var t={name:"Maxthon"},n=r.default.getFirstMatch(i,e)||r.default.getFirstMatch(/(?:Maxthon|mxios)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/epiphany/i],describe:function(e){var t={name:"Epiphany"},n=r.default.getFirstMatch(i,e)||r.default.getFirstMatch(/(?:epiphany)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/puffin/i],describe:function(e){var t={name:"Puffin"},n=r.default.getFirstMatch(i,e)||r.default.getFirstMatch(/(?:puffin)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/sleipnir/i],describe:function(e){var t={name:"Sleipnir"},n=r.default.getFirstMatch(i,e)||r.default.getFirstMatch(/(?:sleipnir)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/k-meleon/i],describe:function(e){var t={name:"K-Meleon"},n=r.default.getFirstMatch(i,e)||r.default.getFirstMatch(/(?:k-meleon)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/micromessenger/i],describe:function(e){var t={name:"WeChat"},n=r.default.getFirstMatch(/(?:micromessenger)[\s/](\d+(\.?_?\d+)+)/i,e)||r.default.getFirstMatch(i,e);return n&&(t.version=n),t}},{test:[/qqbrowser/i],describe:function(e){var t={name:/qqbrowserlite/i.test(e)?"QQ Browser Lite":"QQ Browser"},n=r.default.getFirstMatch(/(?:qqbrowserlite|qqbrowser)[/](\d+(\.?_?\d+)+)/i,e)||r.default.getFirstMatch(i,e);return n&&(t.version=n),t}},{test:[/msie|trident/i],describe:function(e){var t={name:"Internet Explorer"},n=r.default.getFirstMatch(/(?:msie |rv:)(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/\sedg\//i],describe:function(e){var t={name:"Microsoft Edge"},n=r.default.getFirstMatch(/\sedg\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/edg([ea]|ios)/i],describe:function(e){var t={name:"Microsoft Edge"},n=r.default.getSecondMatch(/edg([ea]|ios)\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/vivaldi/i],describe:function(e){var t={name:"Vivaldi"},n=r.default.getFirstMatch(/vivaldi\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/seamonkey/i],describe:function(e){var t={name:"SeaMonkey"},n=r.default.getFirstMatch(/seamonkey\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/sailfish/i],describe:function(e){var t={name:"Sailfish"},n=r.default.getFirstMatch(/sailfish\s?browser\/(\d+(\.\d+)?)/i,e);return n&&(t.version=n),t}},{test:[/silk/i],describe:function(e){var t={name:"Amazon Silk"},n=r.default.getFirstMatch(/silk\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/phantom/i],describe:function(e){var t={name:"PhantomJS"},n=r.default.getFirstMatch(/phantomjs\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/slimerjs/i],describe:function(e){var t={name:"SlimerJS"},n=r.default.getFirstMatch(/slimerjs\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(e){var t={name:"BlackBerry"},n=r.default.getFirstMatch(i,e)||r.default.getFirstMatch(/blackberry[\d]+\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/(web|hpw)[o0]s/i],describe:function(e){var t={name:"WebOS Browser"},n=r.default.getFirstMatch(i,e)||r.default.getFirstMatch(/w(?:eb)?[o0]sbrowser\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/bada/i],describe:function(e){var t={name:"Bada"},n=r.default.getFirstMatch(/dolfin\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/tizen/i],describe:function(e){var t={name:"Tizen"},n=r.default.getFirstMatch(/(?:tizen\s?)?browser\/(\d+(\.?_?\d+)+)/i,e)||r.default.getFirstMatch(i,e);return n&&(t.version=n),t}},{test:[/qupzilla/i],describe:function(e){var t={name:"QupZilla"},n=r.default.getFirstMatch(/(?:qupzilla)[\s/](\d+(\.?_?\d+)+)/i,e)||r.default.getFirstMatch(i,e);return n&&(t.version=n),t}},{test:[/firefox|iceweasel|fxios/i],describe:function(e){var t={name:"Firefox"},n=r.default.getFirstMatch(/(?:firefox|iceweasel|fxios)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/electron/i],describe:function(e){var t={name:"Electron"},n=r.default.getFirstMatch(/(?:electron)\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/MiuiBrowser/i],describe:function(e){var t={name:"Miui"},n=r.default.getFirstMatch(/(?:MiuiBrowser)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/chromium/i],describe:function(e){var t={name:"Chromium"},n=r.default.getFirstMatch(/(?:chromium)[\s/](\d+(\.?_?\d+)+)/i,e)||r.default.getFirstMatch(i,e);return n&&(t.version=n),t}},{test:[/chrome|crios|crmo/i],describe:function(e){var t={name:"Chrome"},n=r.default.getFirstMatch(/(?:chrome|crios|crmo)\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/GSA/i],describe:function(e){var t={name:"Google Search"},n=r.default.getFirstMatch(/(?:GSA)\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:function(e){var t=!e.test(/like android/i),n=e.test(/android/i);return t&&n},describe:function(e){var t={name:"Android Browser"},n=r.default.getFirstMatch(i,e);return n&&(t.version=n),t}},{test:[/playstation 4/i],describe:function(e){var t={name:"PlayStation 4"},n=r.default.getFirstMatch(i,e);return n&&(t.version=n),t}},{test:[/safari|applewebkit/i],describe:function(e){var t={name:"Safari"},n=r.default.getFirstMatch(i,e);return n&&(t.version=n),t}},{test:[/.*/i],describe:function(e){var t=-1!==e.search("\\(")?/^(.*)\/(.*)[ \t]\((.*)/:/^(.*)\/(.*) /;return{name:r.default.getFirstMatch(t,e),version:r.default.getSecondMatch(t,e)}}}];t.default=o,e.exports=t.default},93:function(e,t,n){t.__esModule=!0,t.default=void 0;var s,r=(s=n(17))&&s.__esModule?s:{default:s},i=n(18),o=[{test:[/Roku\/DVP/],describe:function(e){var t=r.default.getFirstMatch(/Roku\/DVP-(\d+\.\d+)/i,e);return{name:i.OS_MAP.Roku,version:t}}},{test:[/windows phone/i],describe:function(e){var t=r.default.getFirstMatch(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i,e);return{name:i.OS_MAP.WindowsPhone,version:t}}},{test:[/windows /i],describe:function(e){var t=r.default.getFirstMatch(/Windows ((NT|XP)( \d\d?.\d)?)/i,e),n=r.default.getWindowsVersionName(t);return{name:i.OS_MAP.Windows,version:t,versionName:n}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:function(e){var t={name:i.OS_MAP.iOS},n=r.default.getSecondMatch(/(Version\/)(\d[\d.]+)/,e);return n&&(t.version=n),t}},{test:[/macintosh/i],describe:function(e){var t=r.default.getFirstMatch(/mac os x (\d+(\.?_?\d+)+)/i,e).replace(/[_\s]/g,"."),n=r.default.getMacOSVersionName(t),s={name:i.OS_MAP.MacOS,version:t};return n&&(s.versionName=n),s}},{test:[/(ipod|iphone|ipad)/i],describe:function(e){var t=r.default.getFirstMatch(/os (\d+([_\s]\d+)*) like mac os x/i,e).replace(/[_\s]/g,".");return{name:i.OS_MAP.iOS,version:t}}},{test:function(e){var t=!e.test(/like android/i),n=e.test(/android/i);return t&&n},describe:function(e){var t=r.default.getFirstMatch(/android[\s/-](\d+(\.\d+)*)/i,e),n=r.default.getAndroidVersionName(t),s={name:i.OS_MAP.Android,version:t};return n&&(s.versionName=n),s}},{test:[/(web|hpw)[o0]s/i],describe:function(e){var t=r.default.getFirstMatch(/(?:web|hpw)[o0]s\/(\d+(\.\d+)*)/i,e),n={name:i.OS_MAP.WebOS};return t&&t.length&&(n.version=t),n}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(e){var t=r.default.getFirstMatch(/rim\stablet\sos\s(\d+(\.\d+)*)/i,e)||r.default.getFirstMatch(/blackberry\d+\/(\d+([_\s]\d+)*)/i,e)||r.default.getFirstMatch(/\bbb(\d+)/i,e);return{name:i.OS_MAP.BlackBerry,version:t}}},{test:[/bada/i],describe:function(e){var t=r.default.getFirstMatch(/bada\/(\d+(\.\d+)*)/i,e);return{name:i.OS_MAP.Bada,version:t}}},{test:[/tizen/i],describe:function(e){var t=r.default.getFirstMatch(/tizen[/\s](\d+(\.\d+)*)/i,e);return{name:i.OS_MAP.Tizen,version:t}}},{test:[/linux/i],describe:function(){return{name:i.OS_MAP.Linux}}},{test:[/CrOS/],describe:function(){return{name:i.OS_MAP.ChromeOS}}},{test:[/PlayStation 4/],describe:function(e){var t=r.default.getFirstMatch(/PlayStation 4[/\s](\d+(\.\d+)*)/i,e);return{name:i.OS_MAP.PlayStation4,version:t}}}];t.default=o,e.exports=t.default},94:function(e,t,n){t.__esModule=!0,t.default=void 0;var s,r=(s=n(17))&&s.__esModule?s:{default:s},i=n(18),o=[{test:[/googlebot/i],describe:function(){return{type:"bot",vendor:"Google"}}},{test:[/huawei/i],describe:function(e){var t=r.default.getFirstMatch(/(can-l01)/i,e)&&"Nova",n={type:i.PLATFORMS_MAP.mobile,vendor:"Huawei"};return t&&(n.model=t),n}},{test:[/nexus\s*(?:7|8|9|10).*/i],describe:function(){return{type:i.PLATFORMS_MAP.tablet,vendor:"Nexus"}}},{test:[/ipad/i],describe:function(){return{type:i.PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:function(){return{type:i.PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/kftt build/i],describe:function(){return{type:i.PLATFORMS_MAP.tablet,vendor:"Amazon",model:"Kindle Fire HD 7"}}},{test:[/silk/i],describe:function(){return{type:i.PLATFORMS_MAP.tablet,vendor:"Amazon"}}},{test:[/tablet(?! pc)/i],describe:function(){return{type:i.PLATFORMS_MAP.tablet}}},{test:function(e){var t=e.test(/ipod|iphone/i),n=e.test(/like (ipod|iphone)/i);return t&&!n},describe:function(e){var t=r.default.getFirstMatch(/(ipod|iphone)/i,e);return{type:i.PLATFORMS_MAP.mobile,vendor:"Apple",model:t}}},{test:[/nexus\s*[0-6].*/i,/galaxy nexus/i],describe:function(){return{type:i.PLATFORMS_MAP.mobile,vendor:"Nexus"}}},{test:[/[^-]mobi/i],describe:function(){return{type:i.PLATFORMS_MAP.mobile}}},{test:function(e){return"blackberry"===e.getBrowserName(!0)},describe:function(){return{type:i.PLATFORMS_MAP.mobile,vendor:"BlackBerry"}}},{test:function(e){return"bada"===e.getBrowserName(!0)},describe:function(){return{type:i.PLATFORMS_MAP.mobile}}},{test:function(e){return"windows phone"===e.getBrowserName()},describe:function(){return{type:i.PLATFORMS_MAP.mobile,vendor:"Microsoft"}}},{test:function(e){var t=Number(String(e.getOSVersion()).split(".")[0]);return"android"===e.getOSName(!0)&&t>=3},describe:function(){return{type:i.PLATFORMS_MAP.tablet}}},{test:function(e){return"android"===e.getOSName(!0)},describe:function(){return{type:i.PLATFORMS_MAP.mobile}}},{test:function(e){return"macos"===e.getOSName(!0)},describe:function(){return{type:i.PLATFORMS_MAP.desktop,vendor:"Apple"}}},{test:function(e){return"windows"===e.getOSName(!0)},describe:function(){return{type:i.PLATFORMS_MAP.desktop}}},{test:function(e){return"linux"===e.getOSName(!0)},describe:function(){return{type:i.PLATFORMS_MAP.desktop}}},{test:function(e){return"playstation 4"===e.getOSName(!0)},describe:function(){return{type:i.PLATFORMS_MAP.tv}}},{test:function(e){return"roku"===e.getOSName(!0)},describe:function(){return{type:i.PLATFORMS_MAP.tv}}}];t.default=o,e.exports=t.default},95:function(e,t,n){t.__esModule=!0,t.default=void 0;var s,r=(s=n(17))&&s.__esModule?s:{default:s},i=n(18),o=[{test:function(e){return"microsoft edge"===e.getBrowserName(!0)},describe:function(e){if(/\sedg\//i.test(e))return{name:i.ENGINE_MAP.Blink};var t=r.default.getFirstMatch(/edge\/(\d+(\.?_?\d+)+)/i,e);return{name:i.ENGINE_MAP.EdgeHTML,version:t}}},{test:[/trident/i],describe:function(e){var t={name:i.ENGINE_MAP.Trident},n=r.default.getFirstMatch(/trident\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:function(e){return e.test(/presto/i)},describe:function(e){var t={name:i.ENGINE_MAP.Presto},n=r.default.getFirstMatch(/presto\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:function(e){var t=e.test(/gecko/i),n=e.test(/like gecko/i);return t&&!n},describe:function(e){var t={name:i.ENGINE_MAP.Gecko},n=r.default.getFirstMatch(/gecko\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/(apple)?webkit\/537\.36/i],describe:function(){return{name:i.ENGINE_MAP.Blink}}},{test:[/(apple)?webkit/i],describe:function(e){var t={name:i.ENGINE_MAP.WebKit},n=r.default.getFirstMatch(/webkit\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}}];t.default=o,e.exports=t.default}})})),Mi=cr(Pi);const Ni=({serviceId:e,clientVersion:t})=>async n=>{const s=window?.navigator?.userAgent?Mi.parse(window.navigator.userAgent):void 0,r=[["aws-sdk-js",t],["ua","2.1"],[`os/${s?.os?.name||"other"}`,s?.os?.version],["lang/js"],["md/browser",`${s?.browser?.name??"unknown"}_${s?.browser?.version??"unknown"}`]];e&&r.push([`api/${e}`,t]);const i=await(n?.userAgentAppId?.());return i&&r.push([`app/${i}`]),r};function Ci(e=0){return new Promise(((t,n)=>{e&&setTimeout((()=>{const t=new Error(`Request did not complete within ${e} ms`);t.name="TimeoutError",n(t)}),e)}))}const _i={supported:void 0};class Ui{static create(e){return"function"==typeof e?.handle?e:new Ui(e)}constructor(e){"function"==typeof e?this.configProvider=e().then((e=>e||{})):(this.config=e??{},this.configProvider=Promise.resolve(this.config)),void 0===_i.supported&&(_i.supported=Boolean("undefined"!=typeof Request&&"keepalive"in new Request("https://[::1]")))}destroy(){}async handle(e,{abortSignal:t}={}){this.config||(this.config=await this.configProvider);const n=this.config.requestTimeout,s=!0===this.config.keepAlive,r=this.config.credentials;if(t?.aborted){const e=new Error("Request aborted");return e.name="AbortError",Promise.reject(e)}let i=e.path;const o=function(e){const t=[];for(let n of Object.keys(e).sort()){const s=e[n];if(n=yn(n),Array.isArray(s))for(let e=0,r=s.length;e<r;e++)t.push(`${n}=${yn(s[e])}`);else{let e=n;(s||"string"==typeof s)&&(e+=`=${yn(s)}`),t.push(e)}}return t.join("&")}(e.query||{});o&&(i+=`?${o}`),e.fragment&&(i+=`#${e.fragment}`);let a="";if(null!=e.username||null!=e.password){a=`${e.username??""}:${e.password??""}@`}const{port:c,method:d}=e,u=`${e.protocol}//${a}${e.hostname}${c?`:${c}`:""}${i}`,l="GET"===d||"HEAD"===d?void 0:e.body,h={body:l,headers:new Headers(e.headers),method:d,credentials:r};this.config?.cache&&(h.cache=this.config.cache),l&&(h.duplex="half"),"undefined"!=typeof AbortController&&(h.signal=t),_i.supported&&(h.keepalive=s),"function"==typeof this.config.requestInit&&Object.assign(h,this.config.requestInit(e));let p=()=>{};const f=new Request(u,h),m=[fetch(f).then((e=>{const t=e.headers,n={};for(const e of t.entries())n[e[0]]=e[1];return null!=e.body?{response:new Ht({headers:n,reason:e.statusText,statusCode:e.status,body:e.body})}:e.blob().then((t=>({response:new Ht({headers:n,reason:e.statusText,statusCode:e.status,body:t})})))})),Ci(n)];return t&&m.push(new Promise(((e,n)=>{const s=()=>{const e=new Error("Request aborted");e.name="AbortError",n(e)};if("function"==typeof t.addEventListener){const e=t;e.addEventListener("abort",s,{once:!0}),p=()=>e.removeEventListener("abort",s)}else t.onabort=s}))),Promise.race(m).finally(p)}updateHttpClientConfig(e,t){this.config=void 0,this.configProvider=this.configProvider.then((n=>(n[e]=t,n)))}httpHandlerConfigs(){return this.config??{}}}const Li=e=>"function"==typeof Blob&&e instanceof Blob?async function(e){const t=await function(e){return new Promise(((t,n)=>{const s=new FileReader;s.onloadend=()=>{if(2!==s.readyState)return n(new Error("Reader aborted too early"));const e=s.result??"",r=e.indexOf(","),i=r>-1?r+1:e.length;t(e.substring(i))},s.onabort=()=>n(new Error("Read aborted")),s.onerror=()=>n(s.error),s.readAsDataURL(e)}))}(e),n=ln(t);return new Uint8Array(n)}(e):async function(e){const t=[],n=e.getReader();let s=!1,r=0;for(;!s;){const{done:e,value:i}=await n.read();i&&(t.push(i),r+=i.length),s=e}const i=new Uint8Array(r);let o=0;for(const e of t)i.set(e,o),o+=e.length;return i}(e);const $i="function"==typeof TextEncoder?new TextEncoder:null,Bi=e=>{if("string"==typeof e){if($i)return $i.encode(e).byteLength;let t=e.length;for(let n=t-1;n>=0;n--){const s=e.charCodeAt(n);s>127&&s<=2047?t++:s>2047&&s<=65535&&(t+=2),s>=56320&&s<=57343&&n--}return t}if("number"==typeof e.byteLength)return e.byteLength;if("number"==typeof e.size)return e.size;throw new Error(`Body Length computation failed for ${e}`)},Di="required",Fi="fn",ji="argv",qi="ref",Hi=!0,Vi="isSet",Wi="booleanEquals",zi="error",Gi="endpoint",Ki="tree",Xi="PartitionResult",Yi={[Di]:!1,type:"String"},Zi={[Di]:!0,default:!1,type:"Boolean"},Ji={[qi]:"Endpoint"},Qi={[Fi]:Wi,[ji]:[{[qi]:"UseFIPS"},!0]},eo={[Fi]:Wi,[ji]:[{[qi]:"UseDualStack"},!0]},to={},no={[Fi]:"getAttr",[ji]:[{[qi]:Xi},"supportsFIPS"]},so={[Fi]:Wi,[ji]:[!0,{[Fi]:"getAttr",[ji]:[{[qi]:Xi},"supportsDualStack"]}]},ro=[Qi],io=[eo],oo=[{[qi]:"Region"}],ao={version:"1.0",parameters:{Region:Yi,UseDualStack:Zi,UseFIPS:Zi,Endpoint:Yi},rules:[{conditions:[{[Fi]:Vi,[ji]:[Ji]}],rules:[{conditions:ro,error:"Invalid Configuration: FIPS and custom endpoint are not supported",type:zi},{conditions:io,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",type:zi},{endpoint:{url:Ji,properties:to,headers:to},type:Gi}],type:Ki},{conditions:[{[Fi]:Vi,[ji]:oo}],rules:[{conditions:[{[Fi]:"aws.partition",[ji]:oo,assign:Xi}],rules:[{conditions:[Qi,eo],rules:[{conditions:[{[Fi]:Wi,[ji]:[Hi,no]},so],rules:[{endpoint:{url:"https://cognito-idp-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:to,headers:to},type:Gi}],type:Ki},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",type:zi}],type:Ki},{conditions:ro,rules:[{conditions:[{[Fi]:Wi,[ji]:[no,Hi]}],rules:[{endpoint:{url:"https://cognito-idp-fips.{Region}.{PartitionResult#dnsSuffix}",properties:to,headers:to},type:Gi}],type:Ki},{error:"FIPS is enabled but this partition does not support FIPS",type:zi}],type:Ki},{conditions:io,rules:[{conditions:[so],rules:[{endpoint:{url:"https://cognito-idp.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:to,headers:to},type:Gi}],type:Ki},{error:"DualStack is enabled but this partition does not support DualStack",type:zi}],type:Ki},{endpoint:{url:"https://cognito-idp.{Region}.{PartitionResult#dnsSuffix}",properties:to,headers:to},type:Gi}],type:Ki}],type:Ki},{error:"Invalid Configuration: Missing Region",type:zi}]},co=new class{constructor({size:e,params:t}){this.data=new Map,this.parameters=[],this.capacity=e??50,t&&(this.parameters=t)}get(e,t){const n=this.hash(e);if(!1===n)return t();if(!this.data.has(n)){if(this.data.size>this.capacity+10){const e=this.data.keys();let t=0;for(;;){const{value:n,done:s}=e.next();if(this.data.delete(n),s||++t>10)break}}this.data.set(n,t())}return this.data.get(n)}size(){return this.data.size}hash(e){let t="";const{parameters:n}=this;if(0===n.length)return!1;for(const s of n){const n=String(e[s]??"");if(n.includes("|;"))return!1;t+=n+"|;"}return t}}({size:50,params:["Endpoint","Region","UseDualStack","UseFIPS"]}),uo=(e,t={})=>co.get(e,(()=>((e,t)=>{const{endpointParams:n,logger:s}=t,{parameters:r,rules:i}=e;t.logger?.debug?.(`${Nn} Initial EndpointParams: ${Cn(n)}`);const o=Object.entries(r).filter((([,e])=>null!=e.default)).map((([e,t])=>[e,t.default]));if(o.length>0)for(const[e,t]of o)n[e]=n[e]??t;const a=Object.entries(r).filter((([,e])=>e.required)).map((([e])=>e));for(const e of a)if(null==n[e])throw new _n(`Missing required parameter: '${e}'`);const c=Yn(i,{endpointParams:n,logger:s,referenceRecord:{}});return t.logger?.debug?.(`${Nn} Resolved endpoint: ${Cn(c)}`),c})(ao,{endpointParams:e,logger:t.logger})));Mn.aws=Qn;const lo=["in-region","cross-region","mobile","standard","legacy"],ho=()=>{const e=window?.navigator?.userAgent?Mi.parse(window.navigator.userAgent):void 0,t=e?.platform?.type;return"tablet"===t||"mobile"===t},po=e=>{const t=(({defaultsMode:e}={})=>((e,t,n)=>{let s,r,i,o=!1;const a=async()=>{r||(r=e());try{s=await r,i=!0,o=!1}finally{r=void 0}return s};return void 0===t?async e=>(i&&!e?.forceRefresh||(s=await a()),s):async e=>(i&&!e?.forceRefresh||(s=await a()),o?s:n&&!n(s)?(o=!0,s):t(s)?(await a(),s):s)})((async()=>{const t="function"==typeof e?await e():e;switch(t?.toLowerCase()){case"auto":return Promise.resolve(ho()?"mobile":"standard");case"mobile":case"in-region":case"cross-region":case"standard":case"legacy":return Promise.resolve(t?.toLocaleLowerCase());case void 0:return Promise.resolve("legacy");default:throw new Error(`Invalid parameter for "defaultsMode", expect ${lo.join(", ")}, got ${t}`)}})))(e),n=()=>t().then(Ys),s=(e=>({apiVersion:"2016-04-18",base64Decoder:e?.base64Decoder??ln,base64Encoder:e?.base64Encoder??mn,disableHostPrefix:e?.disableHostPrefix??!1,endpointProvider:e?.endpointProvider??uo,extensions:e?.extensions??[],httpAuthSchemeProvider:e?.httpAuthSchemeProvider??ci,httpAuthSchemes:e?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:e=>e.getIdentityProvider("aws.auth#sigv4"),signer:new is},{schemeId:"smithy.api#noAuth",identityProvider:e=>e.getIdentityProvider("smithy.api#noAuth")||(async()=>({})),signer:new An}],logger:e?.logger??new sr,serviceId:e?.serviceId??"Cognito Identity Provider",urlParser:e?.urlParser??Pr,utf8Decoder:e?.utf8Decoder??hn,utf8Encoder:e?.utf8Encoder??fn}))(e);return{...s,...e,runtime:"browser",defaultsMode:t,bodyLengthChecker:e?.bodyLengthChecker??Bi,credentialDefaultProvider:e?.credentialDefaultProvider??(e=>()=>Promise.reject(new Error("Credential is missing"))),defaultUserAgentProvider:e?.defaultUserAgentProvider??Ni({serviceId:s.serviceId,clientVersion:ui}),maxAttempts:e?.maxAttempts??3,region:e?.region??(r="Region is missing",()=>Promise.reject(r)),requestHandler:Ui.create(e?.requestHandler??n),retryMode:e?.retryMode??(async()=>(await n()).retryMode||$r),sha256:e?.sha256??xi,streamCollector:e?.streamCollector??Li,useDualstackEndpoint:e?.useDualstackEndpoint??(()=>Promise.resolve(false)),useFipsEndpoint:e?.useFipsEndpoint??(()=>Promise.resolve(false))};var r},fo=e=>{let t=async()=>{if(void 0===e.region)throw new Error("Region is missing from runtimeConfig");const t=e.region;return"string"==typeof t?t:t()};return{setRegion(e){t=e},region:()=>t}},mo=e=>{const t=e.httpAuthSchemes;let n=e.httpAuthSchemeProvider,s=e.credentials;return{setHttpAuthScheme(e){const n=t.findIndex((t=>t.schemeId===e.schemeId));-1===n?t.push(e):t.splice(n,1,e)},httpAuthSchemes:()=>t,setHttpAuthSchemeProvider(e){n=e},httpAuthSchemeProvider:()=>n,setCredentials(e){s=e},credentials:()=>s}},go=e=>({httpAuthSchemes:e.httpAuthSchemes(),httpAuthSchemeProvider:e.httpAuthSchemeProvider(),credentials:e.credentials()});class yo extends Hs{constructor(...[e]){const t=po(e||{});var n;const s=(e=>{const t=e.tls??!0,{endpoint:n}=e,s=null!=n?async()=>Mr(await Zt(n)()):void 0,r=!!n,i={...e,endpoint:s,tls:t,isCustomEndpoint:r,useDualstackEndpoint:Zt(e.useDualstackEndpoint??!1),useFipsEndpoint:Zt(e.useFipsEndpoint??!1)};let o;return i.serviceConfiguredEndpoint=async()=>(e.serviceId&&!o&&(o=xr(e.serviceId)),o),i})((e=>{const{region:t,useFipsEndpoint:n}=e;if(!t)throw new Error("Region is missing");return{...e,region:async()=>{if("string"==typeof t)return Er(t);const e=await t();return Er(e)},useFipsEndpoint:async()=>{const e="string"==typeof t?t:await t();return!!wr(e)||("function"!=typeof n?Promise.resolve(!!n):n())}}})((e=>{const{retryStrategy:t}=e,n=Zt(e.maxAttempts??3);return{...e,maxAttempts:n,retryStrategy:async()=>t||(await Zt(e.retryMode)()===Lr.ADAPTIVE?new Gr(n):new zr(n))}})(function(e){const t=cn(e.userAgentAppId??void 0);return{...e,customUserAgent:"string"==typeof e.customUserAgent?[[e.customUserAgent]]:e.customUserAgent,userAgentAppId:async()=>{const n=await t();if(!function(e){return void 0===e||"string"==typeof e&&e.length<=50}(n)){const t="NoOpLogger"!==e.logger?.constructor?.name&&e.logger?e.logger:console;"string"!=typeof n?t?.warn("userAgentAppId must be a string or undefined."):n.length>50&&t?.warn("The provided userAgentAppId exceeds the maximum length of 50 characters.")}return n}}}((n=t,{...n,useDualstackEndpoint:n.useDualstackEndpoint??!1,useFipsEndpoint:n.useFipsEndpoint??!1,defaultSigningName:"cognito-idp"})))));const r=((e,t)=>{const n={...fo(e),...tr(e),...Ct(e),...mo(e)};return t.forEach((e=>e.configure(n))),{...e,...(i=n,{region:i.region()}),...(r=n,{...Js(r),...er(r)}),...(s=n,{httpHandler:s.httpHandler()}),...go(n)};var s,r,i})({...$s(s)},e?.extensions||[]);super(r),this.config=r,this.middlewareStack.use((e=>({applyToStack:t=>{t.add(fr(e),gr)}}))(this.config)),this.middlewareStack.use(ii(this.config)),this.middlewareStack.use(vr(this.config)),this.middlewareStack.use(Wt(this.config)),this.middlewareStack.use((this.config,{applyToStack:e=>{e.add(((e,t)=>async n=>{try{const s=await e(n),{clientName:r,commandName:i,logger:o,dynamoDbDocumentClientOptions:a={}}=t,{overrideInputFilterSensitiveLog:c,overrideOutputFilterSensitiveLog:d}=a,u=c??t.inputFilterSensitiveLog,l=d??t.outputFilterSensitiveLog,{$metadata:h,...p}=s.output;return o?.info?.({clientName:r,commandName:i,input:u(n.input),output:l(p),metadata:h}),s}catch(e){const{clientName:s,commandName:r,logger:i,dynamoDbDocumentClientOptions:o={}}=t,{overrideInputFilterSensitiveLog:a}=o,c=a??t.inputFilterSensitiveLog;throw i?.error?.({clientName:s,commandName:r,input:c(n.input),error:e,metadata:e.$metadata}),e}}),zt)}})),this.middlewareStack.use(Xt(this.config)),this.middlewareStack.use(((e,{httpAuthSchemeParametersProvider:t,identityProviderConfigProvider:n})=>({applyToStack:s=>{s.addRelativeTo(Jt(e,{httpAuthSchemeParametersProvider:t,identityProviderConfigProvider:n}),Qt)}}))(this.config,{httpAuthSchemeParametersProvider:ai,identityProviderConfigProvider:async e=>new vn({"aws.auth#sigv4":e.credentials})})),this.middlewareStack.use(an(this.config))}destroy(){super.destroy()}}class wo extends Gs{constructor(e){super(e),Object.setPrototypeOf(this,wo.prototype)}}class Eo extends wo{constructor(e){super({name:"InternalErrorException",$fault:"server",...e}),this.name="InternalErrorException",this.$fault="server",Object.setPrototypeOf(this,Eo.prototype)}}class bo extends wo{constructor(e){super({name:"InvalidParameterException",$fault:"client",...e}),this.name="InvalidParameterException",this.$fault="client",Object.setPrototypeOf(this,bo.prototype)}}class So extends wo{constructor(e){super({name:"NotAuthorizedException",$fault:"client",...e}),this.name="NotAuthorizedException",this.$fault="client",Object.setPrototypeOf(this,So.prototype)}}class vo extends wo{constructor(e){super({name:"ResourceNotFoundException",$fault:"client",...e}),this.name="ResourceNotFoundException",this.$fault="client",Object.setPrototypeOf(this,vo.prototype)}}class Ao extends wo{constructor(e){super({name:"TooManyRequestsException",$fault:"client",...e}),this.name="TooManyRequestsException",this.$fault="client",Object.setPrototypeOf(this,Ao.prototype)}}class Io extends wo{constructor(e){super({name:"UserImportInProgressException",$fault:"client",...e}),this.name="UserImportInProgressException",this.$fault="client",Object.setPrototypeOf(this,Io.prototype)}}class To extends wo{constructor(e){super({name:"UserNotFoundException",$fault:"client",...e}),this.name="UserNotFoundException",this.$fault="client",Object.setPrototypeOf(this,To.prototype)}}class Oo extends wo{constructor(e){super({name:"InvalidLambdaResponseException",$fault:"client",...e}),this.name="InvalidLambdaResponseException",this.$fault="client",Object.setPrototypeOf(this,Oo.prototype)}}class Ro extends wo{constructor(e){super({name:"LimitExceededException",$fault:"client",...e}),this.name="LimitExceededException",this.$fault="client",Object.setPrototypeOf(this,Ro.prototype)}}class ko extends wo{constructor(e){super({name:"TooManyFailedAttemptsException",$fault:"client",...e}),this.name="TooManyFailedAttemptsException",this.$fault="client",Object.setPrototypeOf(this,ko.prototype)}}class xo extends wo{constructor(e){super({name:"UnexpectedLambdaException",$fault:"client",...e}),this.name="UnexpectedLambdaException",this.$fault="client",Object.setPrototypeOf(this,xo.prototype)}}class Po extends wo{constructor(e){super({name:"UserLambdaValidationException",$fault:"client",...e}),this.name="UserLambdaValidationException",this.$fault="client",Object.setPrototypeOf(this,Po.prototype)}}class Mo extends wo{constructor(e){super({name:"CodeDeliveryFailureException",$fault:"client",...e}),this.name="CodeDeliveryFailureException",this.$fault="client",Object.setPrototypeOf(this,Mo.prototype)}}class No extends wo{constructor(e){super({name:"InvalidPasswordException",$fault:"client",...e}),this.name="InvalidPasswordException",this.$fault="client",Object.setPrototypeOf(this,No.prototype)}}class Co extends wo{constructor(e){super({name:"InvalidSmsRoleAccessPolicyException",$fault:"client",...e}),this.name="InvalidSmsRoleAccessPolicyException",this.$fault="client",Object.setPrototypeOf(this,Co.prototype)}}class _o extends wo{constructor(e){super({name:"InvalidSmsRoleTrustRelationshipException",$fault:"client",...e}),this.name="InvalidSmsRoleTrustRelationshipException",this.$fault="client",Object.setPrototypeOf(this,_o.prototype)}}class Uo extends wo{constructor(e){super({name:"PreconditionNotMetException",$fault:"client",...e}),this.name="PreconditionNotMetException",this.$fault="client",Object.setPrototypeOf(this,Uo.prototype)}}class Lo extends wo{constructor(e){super({name:"UnsupportedUserStateException",$fault:"client",...e}),this.name="UnsupportedUserStateException",this.$fault="client",Object.setPrototypeOf(this,Lo.prototype)}}class $o extends wo{constructor(e){super({name:"UsernameExistsException",$fault:"client",...e}),this.name="UsernameExistsException",this.$fault="client",Object.setPrototypeOf(this,$o.prototype)}}class Bo extends wo{constructor(e){super({name:"AliasExistsException",$fault:"client",...e}),this.name="AliasExistsException",this.$fault="client",Object.setPrototypeOf(this,Bo.prototype)}}class Do extends wo{constructor(e){super({name:"InvalidUserPoolConfigurationException",$fault:"client",...e}),this.name="InvalidUserPoolConfigurationException",this.$fault="client",Object.setPrototypeOf(this,Do.prototype)}}class Fo extends wo{constructor(e){super({name:"InvalidEmailRoleAccessPolicyException",$fault:"client",...e}),this.name="InvalidEmailRoleAccessPolicyException",this.$fault="client",Object.setPrototypeOf(this,Fo.prototype)}}class jo extends wo{constructor(e){super({name:"MFAMethodNotFoundException",$fault:"client",...e}),this.name="MFAMethodNotFoundException",this.$fault="client",Object.setPrototypeOf(this,jo.prototype)}}class qo extends wo{constructor(e){super({name:"PasswordResetRequiredException",$fault:"client",...e}),this.name="PasswordResetRequiredException",this.$fault="client",Object.setPrototypeOf(this,qo.prototype)}}class Ho extends wo{constructor(e){super({name:"UserNotConfirmedException",$fault:"client",...e}),this.name="UserNotConfirmedException",this.$fault="client",Object.setPrototypeOf(this,Ho.prototype)}}class Vo extends wo{constructor(e){super({name:"UserPoolAddOnNotEnabledException",$fault:"client",...e}),this.name="UserPoolAddOnNotEnabledException",this.$fault="client",Object.setPrototypeOf(this,Vo.prototype)}}class Wo extends wo{constructor(e){super({name:"CodeMismatchException",$fault:"client",...e}),this.name="CodeMismatchException",this.$fault="client",Object.setPrototypeOf(this,Wo.prototype)}}class zo extends wo{constructor(e){super({name:"ExpiredCodeException",$fault:"client",...e}),this.name="ExpiredCodeException",this.$fault="client",Object.setPrototypeOf(this,zo.prototype)}}class Go extends wo{constructor(e){super({name:"PasswordHistoryPolicyViolationException",$fault:"client",...e}),this.name="PasswordHistoryPolicyViolationException",this.$fault="client",Object.setPrototypeOf(this,Go.prototype)}}class Ko extends wo{constructor(e){super({name:"SoftwareTokenMFANotFoundException",$fault:"client",...e}),this.name="SoftwareTokenMFANotFoundException",this.$fault="client",Object.setPrototypeOf(this,Ko.prototype)}}class Xo extends wo{constructor(e){super({name:"ConcurrentModificationException",$fault:"client",...e}),this.name="ConcurrentModificationException",this.$fault="client",Object.setPrototypeOf(this,Xo.prototype)}}class Yo extends wo{constructor(e){super({name:"ForbiddenException",$fault:"client",...e}),this.name="ForbiddenException",this.$fault="client",Object.setPrototypeOf(this,Yo.prototype)}}class Zo extends wo{constructor(e){super({name:"GroupExistsException",$fault:"client",...e}),this.name="GroupExistsException",this.$fault="client",Object.setPrototypeOf(this,Zo.prototype)}}class Jo extends wo{constructor(e){super({name:"DuplicateProviderException",$fault:"client",...e}),this.name="DuplicateProviderException",this.$fault="client",Object.setPrototypeOf(this,Jo.prototype)}}class Qo extends wo{constructor(e){super({name:"UserPoolTaggingException",$fault:"client",...e}),this.name="UserPoolTaggingException",this.$fault="client",Object.setPrototypeOf(this,Qo.prototype)}}class ea extends wo{constructor(e){super({name:"InvalidOAuthFlowException",$fault:"client",...e}),this.name="InvalidOAuthFlowException",this.$fault="client",Object.setPrototypeOf(this,ea.prototype)}}class ta extends wo{constructor(e){super({name:"ScopeDoesNotExistException",$fault:"client",...e}),this.name="ScopeDoesNotExistException",this.$fault="client",Object.setPrototypeOf(this,ta.prototype)}}class na extends wo{constructor(e){super({name:"UnsupportedIdentityProviderException",$fault:"client",...e}),this.name="UnsupportedIdentityProviderException",this.$fault="client",Object.setPrototypeOf(this,na.prototype)}}const sa=e=>({...e,...e.Value&&{Value:zs}}),ra=e=>({...e,...e.AccessToken&&{AccessToken:zs},...e.RefreshToken&&{RefreshToken:zs},...e.IdToken&&{IdToken:zs}}),ia=e=>({...e,...e.AuthParameters&&{AuthParameters:zs},...e.ClientId&&{ClientId:zs},...e.UserContextData&&{UserContextData:zs}}),oa=e=>({...e,...e.Session&&{Session:zs},...e.AuthenticationResult&&{AuthenticationResult:ra(e.AuthenticationResult)}}),aa=e=>({...e,...e.ClientId&&{ClientId:zs},...e.Session&&{Session:zs},...e.ChallengeResponses&&{ChallengeResponses:zs},...e.UserContextData&&{UserContextData:zs}});class ca extends wo{constructor(e){super({name:"UnauthorizedException",$fault:"client",...e}),this.name="UnauthorizedException",this.$fault="client",Object.setPrototypeOf(this,ca.prototype)}}class da extends wo{constructor(e){super({name:"UnsupportedOperationException",$fault:"client",...e}),this.name="UnsupportedOperationException",this.$fault="client",Object.setPrototypeOf(this,da.prototype)}}class ua extends wo{constructor(e){super({name:"UnsupportedTokenTypeException",$fault:"client",...e}),this.name="UnsupportedTokenTypeException",this.$fault="client",Object.setPrototypeOf(this,ua.prototype)}}class la extends wo{constructor(e){super({name:"EnableSoftwareTokenMFAException",$fault:"client",...e}),this.name="EnableSoftwareTokenMFAException",this.$fault="client",Object.setPrototypeOf(this,la.prototype)}}const ha=e=>({...e,...e.Session&&{Session:zs},...e.AuthenticationResult&&{AuthenticationResult:ra(e.AuthenticationResult)}}),pa=e=>({...e,...e.ClientId&&{ClientId:zs},...e.SecretHash&&{SecretHash:zs},...e.Username&&{Username:zs},...e.Password&&{Password:zs},...e.UserAttributes&&{UserAttributes:e.UserAttributes.map((e=>sa(e)))},...e.ValidationData&&{ValidationData:e.ValidationData.map((e=>sa(e)))},...e.UserContextData&&{UserContextData:zs}}),fa=async(e,t)=>{const n=pc("InitiateAuth");let s;return s=JSON.stringify(rr(e)),hc(t,n,"/",void 0,s)},ma=async(e,t)=>{const n=pc("RespondToAuthChallenge");let s;return s=JSON.stringify(rr(e)),hc(t,n,"/",void 0,s)},ga=async(e,t)=>{const n=pc("SignUp");let s;return s=JSON.stringify(rr(e)),hc(t,n,"/",void 0,s)},ya=async(e,t)=>{if(e.statusCode>=300)return ba(e,t);const n=await or(e.body,t);let s={};s=rr(n);return{$metadata:dc(e),...s}},wa=async(e,t)=>{if(e.statusCode>=300)return ba(e,t);const n=await or(e.body,t);let s={};s=rr(n);return{$metadata:dc(e),...s}},Ea=async(e,t)=>{if(e.statusCode>=300)return ba(e,t);const n=await or(e.body,t);let s={};s=rr(n);return{$metadata:dc(e),...s}},ba=async(e,t)=>{const n={...e,body:await ar(e.body,t)},s=((e,t)=>{const n=e=>{let t=e;return"number"==typeof t&&(t=t.toString()),t.indexOf(",")>=0&&(t=t.split(",")[0]),t.indexOf(":")>=0&&(t=t.split(":")[0]),t.indexOf("#")>=0&&(t=t.split("#")[1]),t},s=(r=e.headers,i="x-amzn-errortype",Object.keys(r).find((e=>e.toLowerCase()===i.toLowerCase())));var r,i;return void 0!==s?n(e.headers[s]):void 0!==t.code?n(t.code):void 0!==t.__type?n(t.__type):void 0})(e,n.body);switch(s){case"InternalErrorException":case"com.amazonaws.cognitoidentityprovider#InternalErrorException":throw await Pa(n);case"InvalidParameterException":case"com.amazonaws.cognitoidentityprovider#InvalidParameterException":throw await _a(n);case"NotAuthorizedException":case"com.amazonaws.cognitoidentityprovider#NotAuthorizedException":throw await ja(n);case"ResourceNotFoundException":case"com.amazonaws.cognitoidentityprovider#ResourceNotFoundException":throw await Wa(n);case"TooManyRequestsException":case"com.amazonaws.cognitoidentityprovider#TooManyRequestsException":throw await Xa(n);case"UserImportInProgressException":case"com.amazonaws.cognitoidentityprovider#UserImportInProgressException":throw await nc(n);case"UserNotFoundException":case"com.amazonaws.cognitoidentityprovider#UserNotFoundException":throw await oc(n);case"InvalidLambdaResponseException":case"com.amazonaws.cognitoidentityprovider#InvalidLambdaResponseException":throw await Na(n);case"LimitExceededException":case"com.amazonaws.cognitoidentityprovider#LimitExceededException":throw await Da(n);case"TooManyFailedAttemptsException":case"com.amazonaws.cognitoidentityprovider#TooManyFailedAttemptsException":throw await Ka(n);case"UnexpectedLambdaException":case"com.amazonaws.cognitoidentityprovider#UnexpectedLambdaException":throw await Za(n);case"UserLambdaValidationException":case"com.amazonaws.cognitoidentityprovider#UserLambdaValidationException":throw await sc(n);case"CodeDeliveryFailureException":case"com.amazonaws.cognitoidentityprovider#CodeDeliveryFailureException":throw await va(n);case"InvalidPasswordException":case"com.amazonaws.cognitoidentityprovider#InvalidPasswordException":throw await Ua(n);case"InvalidSmsRoleAccessPolicyException":case"com.amazonaws.cognitoidentityprovider#InvalidSmsRoleAccessPolicyException":throw await La(n);case"InvalidSmsRoleTrustRelationshipException":case"com.amazonaws.cognitoidentityprovider#InvalidSmsRoleTrustRelationshipException":throw await $a(n);case"PreconditionNotMetException":case"com.amazonaws.cognitoidentityprovider#PreconditionNotMetException":throw await Va(n);case"UnsupportedUserStateException":case"com.amazonaws.cognitoidentityprovider#UnsupportedUserStateException":throw await tc(n);case"UsernameExistsException":case"com.amazonaws.cognitoidentityprovider#UsernameExistsException":throw await rc(n);case"AliasExistsException":case"com.amazonaws.cognitoidentityprovider#AliasExistsException":throw await Sa(n);case"InvalidUserPoolConfigurationException":case"com.amazonaws.cognitoidentityprovider#InvalidUserPoolConfigurationException":throw await Ba(n);case"InvalidEmailRoleAccessPolicyException":case"com.amazonaws.cognitoidentityprovider#InvalidEmailRoleAccessPolicyException":throw await Ma(n);case"MFAMethodNotFoundException":case"com.amazonaws.cognitoidentityprovider#MFAMethodNotFoundException":throw await Fa(n);case"PasswordResetRequiredException":case"com.amazonaws.cognitoidentityprovider#PasswordResetRequiredException":throw await Ha(n);case"UserNotConfirmedException":case"com.amazonaws.cognitoidentityprovider#UserNotConfirmedException":throw await ic(n);case"UserPoolAddOnNotEnabledException":case"com.amazonaws.cognitoidentityprovider#UserPoolAddOnNotEnabledException":throw await ac(n);case"CodeMismatchException":case"com.amazonaws.cognitoidentityprovider#CodeMismatchException":throw await Aa(n);case"ExpiredCodeException":case"com.amazonaws.cognitoidentityprovider#ExpiredCodeException":throw await Ra(n);case"PasswordHistoryPolicyViolationException":case"com.amazonaws.cognitoidentityprovider#PasswordHistoryPolicyViolationException":throw await qa(n);case"SoftwareTokenMFANotFoundException":case"com.amazonaws.cognitoidentityprovider#SoftwareTokenMFANotFoundException":throw await Ga(n);case"ConcurrentModificationException":case"com.amazonaws.cognitoidentityprovider#ConcurrentModificationException":throw await Ia(n);case"ForbiddenException":case"com.amazonaws.cognitoidentityprovider#ForbiddenException":throw await ka(n);case"GroupExistsException":case"com.amazonaws.cognitoidentityprovider#GroupExistsException":throw await xa(n);case"DuplicateProviderException":case"com.amazonaws.cognitoidentityprovider#DuplicateProviderException":throw await Ta(n);case"UserPoolTaggingException":case"com.amazonaws.cognitoidentityprovider#UserPoolTaggingException":throw await cc(n);case"InvalidOAuthFlowException":case"com.amazonaws.cognitoidentityprovider#InvalidOAuthFlowException":throw await Ca(n);case"ScopeDoesNotExistException":case"com.amazonaws.cognitoidentityprovider#ScopeDoesNotExistException":throw await za(n);case"UnsupportedIdentityProviderException":case"com.amazonaws.cognitoidentityprovider#UnsupportedIdentityProviderException":throw await Ja(n);case"UnauthorizedException":case"com.amazonaws.cognitoidentityprovider#UnauthorizedException":throw await Ya(n);case"UnsupportedOperationException":case"com.amazonaws.cognitoidentityprovider#UnsupportedOperationException":throw await Qa(n);case"UnsupportedTokenTypeException":case"com.amazonaws.cognitoidentityprovider#UnsupportedTokenTypeException":throw await ec(n);case"EnableSoftwareTokenMFAException":case"com.amazonaws.cognitoidentityprovider#EnableSoftwareTokenMFAException":throw await Oa(n);default:const t=n.body;return uc({output:e,parsedBody:t,errorCode:s})}},Sa=async(e,t)=>{const n=e.body,s=rr(n),r=new Bo({$metadata:dc(e),...s});return Ks(r,n)},va=async(e,t)=>{const n=e.body,s=rr(n),r=new Mo({$metadata:dc(e),...s});return Ks(r,n)},Aa=async(e,t)=>{const n=e.body,s=rr(n),r=new Wo({$metadata:dc(e),...s});return Ks(r,n)},Ia=async(e,t)=>{const n=e.body,s=rr(n),r=new Xo({$metadata:dc(e),...s});return Ks(r,n)},Ta=async(e,t)=>{const n=e.body,s=rr(n),r=new Jo({$metadata:dc(e),...s});return Ks(r,n)},Oa=async(e,t)=>{const n=e.body,s=rr(n),r=new la({$metadata:dc(e),...s});return Ks(r,n)},Ra=async(e,t)=>{const n=e.body,s=rr(n),r=new zo({$metadata:dc(e),...s});return Ks(r,n)},ka=async(e,t)=>{const n=e.body,s=rr(n),r=new Yo({$metadata:dc(e),...s});return Ks(r,n)},xa=async(e,t)=>{const n=e.body,s=rr(n),r=new Zo({$metadata:dc(e),...s});return Ks(r,n)},Pa=async(e,t)=>{const n=e.body,s=rr(n),r=new Eo({$metadata:dc(e),...s});return Ks(r,n)},Ma=async(e,t)=>{const n=e.body,s=rr(n),r=new Fo({$metadata:dc(e),...s});return Ks(r,n)},Na=async(e,t)=>{const n=e.body,s=rr(n),r=new Oo({$metadata:dc(e),...s});return Ks(r,n)},Ca=async(e,t)=>{const n=e.body,s=rr(n),r=new ea({$metadata:dc(e),...s});return Ks(r,n)},_a=async(e,t)=>{const n=e.body,s=rr(n),r=new bo({$metadata:dc(e),...s});return Ks(r,n)},Ua=async(e,t)=>{const n=e.body,s=rr(n),r=new No({$metadata:dc(e),...s});return Ks(r,n)},La=async(e,t)=>{const n=e.body,s=rr(n),r=new Co({$metadata:dc(e),...s});return Ks(r,n)},$a=async(e,t)=>{const n=e.body,s=rr(n),r=new _o({$metadata:dc(e),...s});return Ks(r,n)},Ba=async(e,t)=>{const n=e.body,s=rr(n),r=new Do({$metadata:dc(e),...s});return Ks(r,n)},Da=async(e,t)=>{const n=e.body,s=rr(n),r=new Ro({$metadata:dc(e),...s});return Ks(r,n)},Fa=async(e,t)=>{const n=e.body,s=rr(n),r=new jo({$metadata:dc(e),...s});return Ks(r,n)},ja=async(e,t)=>{const n=e.body,s=rr(n),r=new So({$metadata:dc(e),...s});return Ks(r,n)},qa=async(e,t)=>{const n=e.body,s=rr(n),r=new Go({$metadata:dc(e),...s});return Ks(r,n)},Ha=async(e,t)=>{const n=e.body,s=rr(n),r=new qo({$metadata:dc(e),...s});return Ks(r,n)},Va=async(e,t)=>{const n=e.body,s=rr(n),r=new Uo({$metadata:dc(e),...s});return Ks(r,n)},Wa=async(e,t)=>{const n=e.body,s=rr(n),r=new vo({$metadata:dc(e),...s});return Ks(r,n)},za=async(e,t)=>{const n=e.body,s=rr(n),r=new ta({$metadata:dc(e),...s});return Ks(r,n)},Ga=async(e,t)=>{const n=e.body,s=rr(n),r=new Ko({$metadata:dc(e),...s});return Ks(r,n)},Ka=async(e,t)=>{const n=e.body,s=rr(n),r=new ko({$metadata:dc(e),...s});return Ks(r,n)},Xa=async(e,t)=>{const n=e.body,s=rr(n),r=new Ao({$metadata:dc(e),...s});return Ks(r,n)},Ya=async(e,t)=>{const n=e.body,s=rr(n),r=new ca({$metadata:dc(e),...s});return Ks(r,n)},Za=async(e,t)=>{const n=e.body,s=rr(n),r=new xo({$metadata:dc(e),...s});return Ks(r,n)},Ja=async(e,t)=>{const n=e.body,s=rr(n),r=new na({$metadata:dc(e),...s});return Ks(r,n)},Qa=async(e,t)=>{const n=e.body,s=rr(n),r=new da({$metadata:dc(e),...s});return Ks(r,n)},ec=async(e,t)=>{const n=e.body,s=rr(n),r=new ua({$metadata:dc(e),...s});return Ks(r,n)},tc=async(e,t)=>{const n=e.body,s=rr(n),r=new Lo({$metadata:dc(e),...s});return Ks(r,n)},nc=async(e,t)=>{const n=e.body,s=rr(n),r=new Io({$metadata:dc(e),...s});return Ks(r,n)},sc=async(e,t)=>{const n=e.body,s=rr(n),r=new Po({$metadata:dc(e),...s});return Ks(r,n)},rc=async(e,t)=>{const n=e.body,s=rr(n),r=new $o({$metadata:dc(e),...s});return Ks(r,n)},ic=async(e,t)=>{const n=e.body,s=rr(n),r=new Ho({$metadata:dc(e),...s});return Ks(r,n)},oc=async(e,t)=>{const n=e.body,s=rr(n),r=new To({$metadata:dc(e),...s});return Ks(r,n)},ac=async(e,t)=>{const n=e.body,s=rr(n),r=new Vo({$metadata:dc(e),...s});return Ks(r,n)},cc=async(e,t)=>{const n=e.body,s=rr(n),r=new Qo({$metadata:dc(e),...s});return Ks(r,n)},dc=e=>({httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}),uc=(lc=wo,({output:e,parsedBody:t,errorCode:n})=>{(({output:e,parsedBody:t,exceptionCtor:n,errorCode:s})=>{const r=Xs(e),i=r.httpStatusCode?r.httpStatusCode+"":void 0,o=new n({name:t?.code||t?.Code||s||i||"UnknownError",$fault:"client",$metadata:r});throw Ks(o,t)})({output:e,parsedBody:t,exceptionCtor:lc,errorCode:n})});var lc;const hc=async(e,t,n,s,r)=>{const{hostname:i,protocol:o="https",port:a,path:c}=await e.endpoint(),d={protocol:o,hostname:i,port:a,method:"POST",path:c.endsWith("/")?c.slice(0,-1)+n:c+n,headers:t};return void 0!==s&&(d.hostname=s),void 0!==r&&(d.body=r),new qt(d)};function pc(e){return{"content-type":"application/x-amz-json-1.1","x-amz-target":`AWSCognitoIdentityProviderService.${e}`}}class fc extends(Vs.classBuilder().ep(di).m((function(e,t,n,s){return[nn(n,this.serialize,this.deserialize),Ur(n,e.getEndpointParameterInstructions())]})).s("AWSCognitoIdentityProviderService","InitiateAuth",{}).n("CognitoIdentityProviderClient","InitiateAuthCommand").f(ia,oa).ser(fa).de(ya).build()){}class mc extends(Vs.classBuilder().ep(di).m((function(e,t,n,s){return[nn(n,this.serialize,this.deserialize),Ur(n,e.getEndpointParameterInstructions())]})).s("AWSCognitoIdentityProviderService","RespondToAuthChallenge",{}).n("CognitoIdentityProviderClient","RespondToAuthChallengeCommand").f(aa,ha).ser(ma).de(wa).build()){}class gc extends(Vs.classBuilder().ep(di).m((function(e,t,n,s){return[nn(n,this.serialize,this.deserialize),Ur(n,e.getEndpointParameterInstructions())]})).s("AWSCognitoIdentityProviderService","SignUp",{}).n("CognitoIdentityProviderClient","SignUpCommand").f(pa,void 0).ser(ga).de(Ea).build()){}class yc{constructor(e,t){this.region=e,this.clientId=t,this.cognitoMemo=void 0}cognito(){return this.cognitoMemo||(this.cognitoMemo=new yo({region:this.region})),this.cognitoMemo}signUp(e){return e=e.toLowerCase().trim(),this.cognito().send(new gc({ClientId:this.clientId,Username:e,Password:"aB1%"+(t=14,Array.from(wc(t)).map((e=>e.toString(16).padStart(2,"0"))).join("")),UserAttributes:[{Name:"email",Value:e}]}));var t}signIn(e){return e=e.toLowerCase().trim(),this.cognito().send(new fc({AuthFlow:"CUSTOM_AUTH",ClientId:this.clientId,AuthParameters:{USERNAME:e}}))}async initiateAuth({email:e}){let t;e=e.toLowerCase().trim();try{t=await this.signIn(e)}catch(n){if(!(n instanceof Po&&n.message.includes("user not found")))throw n;await this.signUp(e),t=await this.signIn(e)}if(!t.Session)throw new Error("response session is empty");return{instance:t.Session,email:e}}async finalizeAuth({instance:e,email:t,answer:n,sessionHash:s}){t=t.toLowerCase().trim();const r=await this.cognito().send(new mc({ClientId:this.clientId,Session:e,ChallengeName:"CUSTOM_CHALLENGE",ChallengeResponses:{USERNAME:t,ANSWER:n},ClientMetadata:{SESSION_HASH:s}}));if(!r.AuthenticationResult||!r.AuthenticationResult.IdToken)throw new Error("AuthenticationResult.IdToken is empty");return{idToken:r.AuthenticationResult.IdToken}}}function wc(e){const t=new Uint8Array(e);if("object"==="object".crypto)return window.crypto.getRandomValues(t);{console.warn("window.crypto.getRandomValues is not available. Falling back to less secure Math.random().");const t=new Uint8Array(e);for(let n=0;n<e;n++){const e=Math.floor(256*Math.random());t[n]=e}return t}}class Ec extends Error{}function bc(e){let t=e.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw new Error("base64 string is not of the correct length")}try{return function(e){return decodeURIComponent(atob(e).replace(/(.)/g,((e,t)=>{let n=t.charCodeAt(0).toString(16).toUpperCase();return n.length<2&&(n="0"+n),"%"+n})))}(t)}catch(e){return atob(t)}}function Sc(e,t){if("string"!=typeof e)throw new Ec("Invalid token specified: must be a string");t||(t={});const n=!0===t.header?0:1,s=e.split(".")[n];if("string"!=typeof s)throw new Ec(`Invalid token specified: missing part #${n+1}`);let r;try{r=bc(s)}catch(e){throw new Ec(`Invalid token specified: invalid base64 for part #${n+1} (${e.message})`)}try{return JSON.parse(r)}catch(e){throw new Ec(`Invalid token specified: invalid json for part #${n+1} (${e.message})`)}}Ec.prototype.name="InvalidTokenError";class vc{}class Ac extends vc{constructor(e,t){super(),this.sessionId=e,this.challenge=t}getIntentParams(){const e=t.ethers.id(this.challenge+this.sessionId);return{identityType:w.Guest,verifier:this.sessionId,answer:e}}withAnswer(e){return this}}class Ic extends vc{constructor(e,t,n){super(),this.email=e,this.sessionId=t,this.challenge=n,this.hashedAnswer=void 0}getIntentParams(){return{identityType:w.Email,verifier:`${this.email};${this.sessionId}`,answer:this.hashedAnswer}}setAnswer(e){this.hashedAnswer=t.ethers.id(this.challenge+e)}withAnswer(e){const t=new Ic(this.email,this.sessionId,this.challenge);return t.setAnswer(e),t}}class Tc extends vc{constructor(e){super(),this.idToken=e}getIntentParams(){const e=Sc(this.idToken),n=t.ethers.id(this.idToken);return{identityType:w.OIDC,verifier:`${n};${e.exp}`,answer:this.idToken}}withAnswer(){return this}}class Oc extends Tc{constructor(e){super(e),this.idToken=e}getIntentParams(){return n({},super.getIntentParams(),{identityType:w.Stytch})}}class Rc extends vc{constructor(e,t){super(),this.titleId=e,this.sessionTicket=t}getIntentParams(){const e=t.ethers.id(this.sessionTicket);return{identityType:w.PlayFab,verifier:`${this.titleId}|${e}`,answer:this.sessionTicket}}withAnswer(){return this}}function kc(e){return JSON.parse(atob(e))}function xc(e){const t=e.waasConfigKey,s=n({},e,t?kc(t):{});if(void 0===s.network&&(s.network=1),void 0===s.projectId)throw new Error("Missing project id");if(void 0===s.projectAccessKey)throw new Error("Missing access key");return s}const Pc=globalThis.fetch,Mc={keys:[{alg:"RS256",e:"AQAB",kid:"9LkLZyHdNq1N2aeHMlC5jw",kty:"RSA",n:"qllUB_ERsOjbKx4SirGow4XDov05lQyhiF7Duo4sPkH9CwMN11OqhLuIqeIXPq0rPNIXGP99A7riXTcpRNk-5ZNL29zs-Xjj3idp7nZQZLIU1CBQErTcbxbwUYp8Q46k7lJXVlMmwoLQvQAgH8BZLuSe-Xk1tye0mDC-bHvmrMfqm2zmuWeDnZercU3Jg2iYwyPrjKWx7YSBSMTXTKPGndws4m3s3XIEpI2alLcLLWsPQk2UjIlux6I7vLwvjM_BgjFhYHqgg1tgZUPn_Xxt4wvhobF8UIacRVmGcuyYBnhRxKnBQhEClGSBVtnFYYBSvRjTgliOwf3DhFoXdnmyPQ",use:"sig"}]},Nc={keys:[{alg:"RS256",e:"AQAB",kid:"nWh-_3nQ1lnhhI1ZSQTQmw",kty:"RSA",n:"pECaEq2k0k22J9e7hFLAFmKbzPLlWToUJJmFeWAdEiU4zpW17EUEOyfjRzjgBewc7KFJQEblC3eTD7Vc5bh9-rafPEj8LaKyZzzS5Y9ZATXhlMo5Pnlar3BrTm48XcnT6HnLsvDeJHUVbrYd1JyE1kqeTjUKWvgKX4mgIJiuYhpdzbOC22cPaWb1dYCVhArDVAPHGqaEwRjX7JneETdY5hLJ6JhsAws706W7fwfNKddPQo2mY95S9q8HFxMr5EaXEMmhwxk8nT5k-Ouar2dobMXRMmQiEZSt9fJaGKlK7KWJSnbPOVa2cZud1evs1Rz2SdCSA2bhuZ6NnZCxkqnagw",use:"sig"}]};e.AccountAlreadyLinkedError=ut,e.AnswerIncorrectError=ht,e.Challenge=vc,e.ChallengeExpiredError=pt,e.EmailAlreadyInUseError=dt,e.EmailChallenge=Ic,e.FeeTokenType=y,e.GuestChallenge=Ac,e.IdTokenChallenge=Tc,e.IdentityType=w,e.IntentName=f,e.IntentResponseCode=g,e.PlayFabChallenge=Rc,e.ProofVerificationFailedError=lt,e.SequenceWaaS=class{constructor(e,t=new H,s=ve(),r=je()){var i=this;this.store=t,this.cryptoBackend=s,this.secureStoreBackend=r,this.waas=void 0,this.client=void 0,this.validationRequiredCallback=[],this.emailConflictCallback=[],this.emailAuthCodeRequiredCallback=[],this.validationRequiredSalt=void 0,this.config=void 0,this.deviceName=void 0,this.emailClient=void 0,this.lastDate=void 0,this.signatureVerificationFailed=!1,this._fetch=(e,t)=>{if(this.signatureVerificationFailed)throw new Error("Signature verification failed");if(this.cryptoBackend&&!0!==this.config.disableHttpSignatureCheck&&null!=t&&t.headers){const e={"Accept-Signature":'sig=();alg="rsa-v1_5-sha256"'};t.headers=n({},t.headers,e)}const s=Pc(e,t);return this.cryptoBackend&&!0!==this.config.disableHttpSignatureCheck&&s.then((async function(e){try{var t,n;const s=e.clone(),r=await s.text(),o=e.headers.get("Content-Digest"),a=e.headers.get("Signature-Input"),c=e.headers.get("Signature");if(!o)throw new Error("Content-Digest header not set");if(!a)throw new Error("Signature-Input header not set");if(!c)throw new Error("Signature header not set");const d=null==(t=o.match(":(.*):"))?void 0:t[1];if(!d)throw new Error("Content digest not found");const u=(new TextEncoder).encode(r),l=await i.cryptoBackend.digest("SHA-256",u);if(d!==btoa(String.fromCharCode(...l)))throw new Error("Digest mismatch");const h=`"content-digest": ${o}\n"@signature-params": ${a.substring(4)}`,p={name:"RSASSA-PKCS1-v1_5",hash:"SHA-256"},f=e.url.includes("dev-waas")?Mc:Nc,m=await i.cryptoBackend.importKey("jwk",f.keys[0],p,!1,["verify"]),g=null==(n=c.match(":(.*):"))?void 0:n[1];if(!g)throw new Error("Signature not found");const y=Uint8Array.from(atob(g),(e=>e.charCodeAt(0)));if(!await i.cryptoBackend.verify(p,m,y,(new TextEncoder).encode(h)))throw new Error("Signature verification failed, consequent requests will fail")}catch(e){throw i.signatureVerificationFailed=!0,e}})),s},this.config=xc(e),this.waas=new We(n({network:1},e),this.store,this.cryptoBackend,this.secureStoreBackend),this.client=new ze(this.config.rpcServer,this._fetch),this.deviceName=new q(this.store,"@0xsequence.waas.auth.deviceName",void 0)}get email(){if(this.emailClient)return this.emailClient;if(!this.config.emailRegion)throw new Error("Missing emailRegion");if(!this.config.emailClientId)throw new Error("Missing emailClientId");return this.emailClient=new yc(this.config.emailRegion,this.config.emailClientId),this.emailClient}async onValidationRequired(e){return this.validationRequiredCallback.push(e),()=>{this.validationRequiredCallback=this.validationRequiredCallback.filter((t=>t!==e))}}onEmailConflict(e){return this.emailConflictCallback.push(e),()=>{this.emailConflictCallback=this.emailConflictCallback.filter((t=>t!==e))}}onEmailAuthCodeRequired(e){return this.emailAuthCodeRequiredCallback.push(e),()=>{this.emailAuthCodeRequiredCallback=this.emailAuthCodeRequiredCallback.filter((t=>t!==e))}}async handleValidationRequired({onValidationRequired:e}={}){var t;if(!(!e||e()))return!1;const n=await this.waas.validateSession({deviceMetadata:null!=(t=await this.deviceName.get())?t:"Unknown device"}),s=await this.sendIntent(n);this.validationRequiredSalt=s.data.salt;for(const e of this.validationRequiredCallback)e();return this.waitForSessionValid()}headers(){return{"X-Access-Key":this.config.projectAccessKey}}async updateTimeDrift(){if(void 0===l()){const t=(await Pc(`${this.config.rpcServer}/status`)).headers.get("Date");if(!t)throw new Error("failed to get Date header value from /status");e=new Date(t),c=(Date.now()-e.getTime())/1e3,u()&&window.sessionStorage.setItem(d,c.toString(10))}var e}async sendIntent(e){if(!await this.waas.getSessionId())throw new Error("session not open");try{return(await this.client.sendIntent({intent:e},this.headers())).response}catch(t){if(Mt(t)&&this.lastDate){const t=await this.waas.updateIntentTime(e,this.lastDate);return(await this.client.sendIntent({intent:t},this.headers())).response}throw t}}async isSignedIn(){return this.waas.isSignedIn()}async signIn(e,t){var n=this;const s=await this.waas.getSessionId();s&&await this.dropSession({sessionId:s,strict:!1});const r="email"in e;return r&&0==this.emailAuthCodeRequiredCallback.length?Promise.reject("Missing emailAuthCodeRequired callback"):new Promise((async function(s,i){let o;try{o=await n.initAuth(e)}catch(e){return i(e)}const a=async function(e){try{const r=await n.completeAuth(o.withAnswer(e),{sessionName:t});s(r)}catch(r){if(r instanceof ht)throw r;if(r instanceof dt){const a=async function(){try{const r=await n.completeAuth(o.withAnswer(e),{sessionName:t,forceCreateAccount:!0});s(r)}catch(e){i(e)}},c={type:w.None,email:"",issuer:""};if(r.cause){const e=r.cause.split("|");e.length>=2&&(c.type=e[0],c.email=e[1]),e.length>=3&&(c.issuer=e[2])}for(const e of n.emailConflictCallback)e(c,a)}else i(r)}};if(r)for(const e of n.emailAuthCodeRequiredCallback)e(a);else a("")}))}async initAuth(e){if(await this.updateTimeDrift(),"guest"in e&&e.guest)return this.initGuestAuth();if("idToken"in e)return this.initIdTokenAuth(e.idToken);if("email"in e)return this.initEmailAuth(e.email);if("playFabTitleId"in e)return this.initPlayFabAuth(e.playFabTitleId,e.playFabSessionTicket);throw new Error("invalid identity")}async initGuestAuth(){const e=await this.waas.getSessionId(),t=await this.waas.initiateGuestAuth(),n=await this.sendIntent(t);if(!yt(n))throw new Error(`Invalid response: ${JSON.stringify(n)}`);return new Ac(e,n.data.challenge)}async initIdTokenAuth(e){var t;const n=Sc(e),s=(null==(t=n.iss)?void 0:t.startsWith("stytch.com/"))||!1,r=s?await this.waas.initiateStytchAuth(e,n.exp):await this.waas.initiateIdTokenAuth(e,n.exp),i=await this.sendIntent(r);if(!yt(i))throw new Error(`Invalid response: ${JSON.stringify(i)}`);return s?new Oc(e):new Tc(e)}async initEmailAuth(e){const t=await this.waas.getSessionId(),n=await this.waas.initiateEmailAuth(e),s=await this.sendIntent(n);if(!yt(s))throw new Error(`Invalid response: ${JSON.stringify(s)}`);return new Ic(e,t,s.data.challenge)}async initPlayFabAuth(e,t){const n=await this.waas.initiatePlayFabAuth(e,t),s=await this.sendIntent(n);if(!yt(s))throw new Error(`Invalid response: ${JSON.stringify(s)}`);return new Rc(e,t)}async completeAuth(e,t){await this.updateTimeDrift();if(await this.isSignedIn())throw new Error("You are already signed in. Use dropSession to sign out from current session first.");t||(t={}),t.sessionName||(t.sessionName="session name");const n=await this.waas.completeAuth(e.getIntentParams(),{forceCreateAccount:t.forceCreateAccount});try{const e=await this.registerSession(n,t.sessionName);return await this.waas.completeSignIn({code:"sessionOpened",data:{sessionId:e.session.id,wallet:e.response.data.wallet}}),{sessionId:e.session.id,wallet:e.response.data.wallet,email:e.session.identity.email}}catch(e){throw e instanceof dt||e instanceof ht||await this.waas.completeSignOut(),e}}async registerSession(e,t){try{return await this.client.registerSession({intent:e,friendlyName:t},this.headers())}catch(n){if(Mt(n)&&this.lastDate){const n=await this.waas.updateIntentTime(e,this.lastDate);return await this.client.registerSession({intent:n,friendlyName:t},this.headers())}throw n}}async refreshSession(){throw new Error("Not implemented")}async getSessionId(){return this.waas.getSessionId()}async getSessionHash(){const e=(await this.waas.getSessionId()).toLowerCase();return t.ethers.id(e)}async dropSession({sessionId:e,strict:t}={}){await this.updateTimeDrift();const n=await this.waas.getSessionId();if(!n)throw new Error("session not open");const s=e||n;try{const e=await this.waas.signOutSession(s),t=await this.sendIntent(e);if(!Rt(t))throw new Error(`Invalid response: ${JSON.stringify(t)}`)}catch(e){if(t)throw e;console.error(e)}if(s===n){if(!this.secureStoreBackend)throw new Error("No secure store available");(await ne(n,this.cryptoBackend,this.secureStoreBackend)).clear(),await this.waas.completeSignOut(),await this.deviceName.set(void 0)}}async listSessions(){await this.updateTimeDrift();const e=await this.waas.getSessionId();if(!e)throw new Error("session not open");const t=await this.waas.listSessions();return(await this.sendIntent(t)).data.map((t=>n({},t,{isThis:t.id===e})))}async getAddress(){return this.waas.getAddress()}async validateSession(e){return await this.updateTimeDrift(),!!await this.isSessionValid()||this.handleValidationRequired(e)}async finishValidateSession(e){await this.updateTimeDrift();const t=await this.waas.finishValidateSession(this.validationRequiredSalt,e),n=await this.sendIntent(t);if(!Ot(n))throw new Error(`Invalid response: ${JSON.stringify(n)}`);return this.validationRequiredSalt="",n.data.isValid}async isSessionValid(){await this.updateTimeDrift();const e=await this.waas.getSession(),t=await this.sendIntent(e);if(!kt(t))throw new Error(`Invalid response: ${JSON.stringify(t)}`);return t.data.validated}async waitForSessionValid(e=6e5,t=2e3){const n=Date.now();for(;Date.now()-n<e;){if(await this.isSessionValid())return!0;await new Promise((e=>setTimeout(e,t)))}return!1}async sessionAuthProof({nonce:e,network:t,validation:n}){await this.updateTimeDrift();const s=await this.waas.sessionAuthProof({nonce:e,network:t});return await this.trySendIntent({validation:n},s,At)}async listAccounts(){await this.updateTimeDrift();const e=await this.waas.listAccounts(),t=await this.sendIntent(e);if(!Pt(t))throw new Error(`Invalid response: ${JSON.stringify(t)}`);return t.data}async linkAccount(e){await this.updateTimeDrift();const t=await this.waas.linkAccount(e.getIntentParams()),n=await this.sendIntent(t);if(!xt(n))throw new Error(`Invalid response: ${JSON.stringify(n)}`);return n.data}async removeAccount(e){await this.updateTimeDrift();const t=await this.waas.removeAccount({accountId:e});await this.sendIntent(t)}async getIdToken(e){await this.updateTimeDrift();const t=await this.waas.getIdToken({nonce:null==e?void 0:e.nonce}),n=await this.sendIntent(t);if(!Nt(n))throw new Error(`Invalid response: ${JSON.stringify(n)}`);return n.data}async useIdentifier(e){if(e.identifier)return e;return n({},e,{identifier:`ts-sdk-${Date.now()}-${await this.waas.getSessionId()}`})}async trySendIntent(e,t,n){const s=await this.sendIntent(t);if(n(s))return s;if(Tt(s)){if(await this.handleValidationRequired(e.validation)){const e=await this.sendIntent(t);if(n(e))return e}}throw new Error(JSON.stringify(s))}async signMessage(e){await this.updateTimeDrift();const t=await this.waas.signMessage(await this.useIdentifier(e));return this.trySendIntent(e,t,vt)}async trySendTransactionIntent(e,t){let n=await this.trySendIntent(t,e,St);for(;Et(n);){await new Promise((e=>setTimeout(e,1e3)));const s={metaTxHash:n.data.metaTxHash,network:e.data.network,identifier:e.data.identifier,validation:t.validation},r=await this.waas.getTransactionReceipt(await this.useIdentifier(s));n=await this.trySendIntent(s,r,St)}return n}async sendTransaction(e){await this.updateTimeDrift();const t=await this.waas.sendTransaction(await this.useIdentifier(e));return this.trySendTransactionIntent(t,e)}async sendERC20(e){await this.updateTimeDrift();const t=await this.waas.sendERC20(await this.useIdentifier(e));return this.trySendTransactionIntent(t,e)}async sendERC721(e){await this.updateTimeDrift();const t=await this.waas.sendERC721(await this.useIdentifier(e));return this.trySendTransactionIntent(t,e)}async sendERC1155(e){await this.updateTimeDrift();const t=await this.waas.sendERC1155(await this.useIdentifier(e));return this.trySendTransactionIntent(t,e)}async callContract(e){await this.updateTimeDrift();const t=await this.waas.callContract(await this.useIdentifier(e));return this.trySendTransactionIntent(t,e)}async feeOptions(e){await this.updateTimeDrift();const t=await this.waas.feeOptions(await this.useIdentifier(e));return this.trySendIntent(e,t,It)}async networkList(){const e=[],t=await this.client.chainList({"X-Access-Key":this.config.projectAccessKey});for(const n of t.chains)e.push({id:n.id,name:n.name,isEnabled:n.isEnabled});return e}onSessionStateChanged(e){return this.waas.onSessionStateChanged(e)}async fetch(e,t){const n=await globalThis.fetch(e,t),s=n.headers.get("date");return s&&(this.lastDate=new Date(s)),n}},e.SequenceWaaSBase=We,e.StytchChallenge=Oc,e.TenantNotFoundError=ct,e.TooManyAttemptsError=ft,e.TransactionType=m,e.UnauthorizedError=at,e.WebRPCSchemaHash="2e4f5d4a4107d8e8c74c252f4d1a7aad391db6e7",e.WebRPCSchemaVersion="v0.1.0",e.WebRPCVersion="v1",e.WebrpcBadMethodError=Qe,e.WebrpcBadRequestError=et,e.WebrpcBadResponseError=tt,e.WebrpcBadRouteError=Je,e.WebrpcClientDisconnectedError=rt,e.WebrpcEndpointError=Ye,e.WebrpcError=Xe,e.WebrpcInternalErrorError=st,e.WebrpcRequestFailedError=Ze,e.WebrpcServerPanicError=nt,e.WebrpcStreamFinishedError=ot,e.WebrpcStreamLostError=it,e.contractCall=F,e.defaultArgsOrFail=xc,e.delayedEncode=function(e){const t=e,n=e;if(void 0!==t.abi)return{type:"delayedEncode",to:t.to,value:r(BigInt(t.value)),data:{abi:t.abi,func:t.func,args:t.args}};if(void 0!==n.data)return{type:"delayedEncode",to:n.to,value:n.value,data:n.data};throw new Error("Invalid delayed encode transaction")},e.erc1155=D,e.erc20=$,e.erc721=B,e.errors=mt,e.isCloseSessionResponse=Rt,e.isFailedTransactionResponse=bt,e.isFeeOptionsResponse=It,e.isFinishValidateSessionResponse=Ot,e.isGetIdTokenResponse=Nt,e.isGetSessionResponse=kt,e.isInitiateAuthResponse=yt,e.isIntentTimeError=Mt,e.isLinkAccountResponse=xt,e.isListAccountsResponse=Pt,e.isMaySentTransactionResponse=St,e.isOpenSessionResponse=function(e){return"object"==typeof e&&"string"==typeof e.code&&"sessionOpened"===e.code&&"object"==typeof e.data&&"string"==typeof e.data.sessionId&&"string"==typeof e.data.wallet},e.isSentTransactionResponse=wt,e.isSessionAuthProofResponse=At,e.isSignedMessageResponse=vt,e.isTimedOutTransactionResponse=Et,e.isValidateSessionResponse=function(e){return"object"==typeof e&&e.code===g.validationStarted&&"object"==typeof e.data},e.isValidationRequiredResponse=Tt,e.networks=Se,e.parseSequenceWaaSConfigKey=kc,e.store=z,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=0xsequence-waas.umd.min.js.map
